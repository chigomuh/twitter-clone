/*! For license information please see main.c768e483.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),be(e.stateNode,e.type,t))}}function Te(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Ce(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Re=!1;function Ae(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==xe||null!==Ee)&&(Ne(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Oe=!1}function Le(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,bt,xt,Et,St,Tt=!1,Ct=[],It=null,Nt=null,Rt=null,At=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Tt=!1,null!==It&&Ut(It)&&(It=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Rt&&Ut(Rt)&&(Rt=null),At.forEach(jt),Pt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==Rt&&zt(Rt,e),At.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&_t(a),null===(a=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=F({},ln,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var Tn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Tn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Rn=an(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),On=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Mn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function $n(e){if(G(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Hn(t,Gn,e,_e(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Tr=Sr("animationend"),Cr=Sr("animationiteration"),Ir=Sr("animationstart"),Nr=Sr("transitionend"),Rr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),u(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Dr=Ar[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(Ir,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var c=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,l),a=u}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=a,i=_e(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Cn;break;case"focusin":l="focus",u=yn;break;case"focusout":l="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Tr:case Cr:case Ir:u=mn;break;case Nr:u=Rn;break;case"scroll":u=fn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Pe(p,f))&&c.push(Hr(p,v,d)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:wi(u),d=null==l?s:wi(l),(s=new c(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=d,c.relatedTarget=h,v=c),h=v,u&&l)e:{for(f=l,p=0,d=c=u;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)c=Gr(c),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Gr(c),f=Gr(f)}c=null}else c=null;null!==u&&Qr(o,s,u,c,!1),null!==l&&null!==h&&Qr(o,h,l,c,!0)}if("select"===(u=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Yn;else if(Wn(s))if(Xn)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Hn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(m=Kr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Pe(n,a))&&o.unshift(Hr(n,u,s)):i||null!=(u=Pe(n,a))&&o.push(Hr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[di]||null}var bi=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Ti(e,t){xi++,bi[xi]=e.current,e.current=t}var Ci={},Ii=Ei(Ci),Ni=Ei(!1),Ri=Ci;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Ni),Si(Ii)}function Di(e,t,n){if(Ii.current!==Ci)throw Error(a(168));Ti(Ii,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ri=Ii.current,Ti(Ii,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ii),Ti(Ii,e)):Si(Ni),Ti(Ni,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Al(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Al(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ei(null),ga=null,ka=null,wa=null;function _a(){wa=ka=ga=null}function ba(e){var t=ma.current;Si(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ca(e){null===Ta?Ta=[e]:Ta.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Iu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,c=l=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=d,u=h):c=c.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nl(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nl(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nl(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Ri:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Ri:Ii.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Dl(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Dl(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case b:return(t=Ul(t,e.mode,n)).return=e,t;case P:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case b:return n.key===i?c(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m,h=y}if(v===s.length)return n(i,h),ia&&Ji(i,v),l;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===c?l=h:c.sibling=h,c=h);return ia&&Ji(i,v),l}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===c?l=y:c.sibling=y,c=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),l}function y(i,s,u,l){var c=L(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,l);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===h?c=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),c;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,l))&&(s=o(g,s,y),null===h?c=g:h.sibling=g,h=g);return ia&&Ji(i,y),c}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?c=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===x){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===P&&Qa(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ka(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===x?((a=Ll(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Dl(o.type,o.key,o.props,null,r.mode,u)).ref=Ka(r,a,o),u.return=r,r=u)}return s(r);case b:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ul(o,r.mode,u)).return=r,r=a}return s(r);case P:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return y(r,a,o,u);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fl(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ti(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var so=Ei(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,wo=0,_o=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=ls,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==wo;return wo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function Co(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Io(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var h=c.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=f,s=r):l=l.next=f,vo.lanes|=h,Mu|=h}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(ws=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=vo,r=Co(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,ws=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nl(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function zo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ho(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return Co().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ia(e,t,n,r))){nl(n,e,r,el()),as(n,t,r)}}function ns(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ca(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ia(e,t,i,r))&&(nl(n,e,r,i=el()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Sa,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Nu.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Io)},useDebugValue:$o,useDeferredValue:function(e){return Jo(Co(),yo.memoizedState,e)},useTransition:function(){return[No(Io)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1},ls={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:Ro,useRef:Vo,useState:function(){return Ro(Io)},useDebugValue:$o,useDeferredValue:function(e){var t=Co();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[Ro(Io)[0],Co().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Hu=r),fs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=w.ReactCurrentOwner,ws=!1;function _s(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function bs(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||ws?(ia&&n&&ea(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Ol(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(ws=!0)}}return Cs(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ou,Pu),Pu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ou,Pu),Pu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ou,Pu),Pu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ou,Pu),Pu|=r;return _s(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var a=Pi(n)?Ri:Ii.current;return a=Ai(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||ws?(ia&&r&&ea(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Is(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)qs(e,t),qa(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Sa(l):l=Ai(t,l=Pi(n)?Ri:Ii.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Wa(t,o,r,l),Ra=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ni.current||Ra?("function"===typeof c&&(Va(t,n,c,r),u=t.memoizedState),(s=Ra||Ba(t,n,s,r,f,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ya(t.type,s),o.props=l,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Sa(u):u=Ai(t,u=Pi(n)?Ri:Ii.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Wa(t,o,r,u),Ra=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ni.current||Ra?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(l=Ra||Ba(t,n,l,r,f,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):_s(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function As(e,t,n,r,i){return da(),pa(i),t.flags|=256,_s(e,t,n,r),t.child}var Ps,Os,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(so,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Ml(u,i,0,null),e=Ll(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(o=Ll(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,js(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nl(r,e,i,-1))}return vl(),js(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),(t=Us(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Ol(r,s):(s=Ll(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Ol(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Ks(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ii),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ol(aa),aa=null))),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ps(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ye(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&jr("scroll",e):null!=c&&k(e,o,c,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(ol(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Du&&(Du=3):vl())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Ks(t),null;case 10:return ba(t.type._context),Ks(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Hs(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bu&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ks(t),null}else 2*Xe()-o.renderingStartTime>Bu&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=so.current,Ti(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pu)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ii),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&jr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Ys=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){El(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Zs(n,t);case 6:var r=cu,i=hu;cu=null,fu(e,t,n),hu=i,null!==(cu=r)&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Bt(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=hu,cu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),cu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Ys&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){El(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,fu(e,t,n),Ys=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,hu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===cu)throw Error(a(160));du(o,s,i),cu=null,hu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){El(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),mu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(y){El(e,e.return,y)}try{nu(5,e,e.return)}catch(y){El(e,e.return,y)}}break;case 1:vu(t,e),mu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(vu(t,e),mu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){El(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&X(i,o),ke(u,s);var c=ke(u,o);for(s=0;s<l.length;s+=2){var h=l[s],f=l[s+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,c)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){El(e,e.return,y)}}break;case 6:if(vu(t,e),mu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){El(e,e.return,y)}}break;case 3:if(vu(t,e),mu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){El(e,e.return,y)}break;case 4:default:vu(t,e),mu(e);break;case 13:vu(t,e),mu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zu=Xe())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||h,vu(t,e),Ys=c):vu(t,e),mu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(f=Js=h;null!==Js;){switch(p=(d=Js).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){El(r,n,y)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){_u(f);continue}}null!==p?(p.return=d,Js=p):_u(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(y){El(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){El(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),mu(e),4&r&&pu(e);case 21:}}function mu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),lu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){El(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Js=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Ys;s=$s;var l=Ys;if($s=o,(Ys=u)&&!l)for(Js=i;null!==Js;)u=(o=Js).child,22===o.tag&&null!==o.memoizedState?bu(i):null!==u?(u.return=o,Js=u):bu(i);for(;null!==a;)Js=a,ku(a,t,n),a=a.sibling;Js=i,$s=s,Ys=l}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):wu(e)}}function wu(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&iu(t)}catch(d){El(t,t.return,d)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function _u(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function bu(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){El(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){El(t,i,u)}}var a=t.return;try{iu(t)}catch(u){El(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){El(t,o,u)}}}catch(u){El(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var xu,Eu=Math.ceil,Su=w.ReactCurrentDispatcher,Tu=w.ReactCurrentOwner,Cu=w.ReactCurrentBatchConfig,Iu=0,Nu=null,Ru=null,Au=0,Pu=0,Ou=Ei(0),Du=0,Lu=null,Mu=0,Fu=0,Uu=0,ju=null,Vu=null,zu=0,Bu=1/0,qu=null,Wu=!1,Hu=null,Ku=null,Gu=!1,Qu=null,$u=0,Yu=0,Xu=null,Ju=-1,Zu=0;function el(){return 0!==(6&Iu)?Xe():-1!==Ju?Ju:Ju=Xe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Au?Au&-Au:null!==va.transition?(0===Zu&&(Zu=vt()),Zu):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nl(e,t,n,r){if(50<Yu)throw Yu=0,Xu=null,Error(a(185));mt(e,n,r),0!==(2&Iu)&&e===Nu||(e===Nu&&(0===(2&Iu)&&(Fu|=n),4===Du&&sl(e,Au)),rl(e,r),1===n&&0===Iu&&0===(1&t.mode)&&(Bu=Xe()+500,ji&&Bi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Nu?Au:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(ul.bind(null,e)):zi(ul.bind(null,e)),oi((function(){0===(6&Iu)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Ju=-1,Zu=0,0!==(6&Iu))throw Error(a(327));var n=e.callbackNode;if(bl()&&e.callbackNode!==n)return null;var r=ft(e,e===Nu?Au:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=Iu;Iu|=2;var o=pl();for(Nu===e&&Au===t||(qu=null,Bu=Xe()+500,fl(e,t));;)try{gl();break}catch(u){dl(e,u)}_a(),Su.current=o,Iu=i,null!==Ru?t=0:(Nu=null,Au=0,t=Du)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Lu,fl(e,0),sl(e,r),rl(e,Xe()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yl(e,r))&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t))throw n=Lu,fl(e,0),sl(e,r),rl(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_l(e,Vu,qu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=zu+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_l.bind(null,e,Vu,qu),t);break}_l(e,Vu,qu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(_l.bind(null,e,Vu,qu),r);break}_l(e,Vu,qu);break;default:throw Error(a(329))}}}return rl(e,Xe()),e.callbackNode===n?il.bind(null,e):null}function al(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=Vu,Vu=n,null!==t&&ol(t)),e}function ol(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sl(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Iu))throw Error(a(327));bl();var t=ft(e,0);if(0===(1&t))return rl(e,Xe()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Lu,fl(e,0),sl(e,t),rl(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,Vu,qu),rl(e,Xe()),null}function ll(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(Bu=Xe()+500,ji&&Bi())}}function cl(e){null!==Qu&&0===Qu.tag&&0===(6&Iu)&&bl();var t=Iu;Iu|=1;var n=Cu.transition,r=kt;try{if(Cu.transition=null,kt=1,e)return e()}finally{kt=r,Cu.transition=n,0===(6&(Iu=t))&&Bi()}}function hl(){Pu=Ou.current,Si(Ou)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Ni),Si(Ii),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:ba(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Nu=e,Ru=e=Ol(e.current,null),Au=Pu=t,Du=0,Lu=null,Uu=Fu=Mu=0,Vu=ju=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function dl(e,t){for(;;){var n=Ru;try{if(_a(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,wo=0,Tu.current=null,null===n||null===n.return){Du=1,Lu=t,Ru=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Au,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ys(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(l),t.updateQueue=y}else v.add(l);break e}if(0===(1&t)){ys(o,c,t),vl();break e}l=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(cs(l,u));break e}}o=l=cs(l,u),4!==Du&&(Du=2),null===ju?ju=[o]:ju.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,l,t));break e;case 1:u=l;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ku||!Ku.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}wl(n)}catch(w){t=w,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function pl(){var e=Su.current;return Su.current=os,null===e?os:e}function vl(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Nu||0===(268435455&Mu)&&0===(268435455&Fu)||sl(Nu,Au)}function yl(e,t){var n=Iu;Iu|=2;var r=pl();for(Nu===e&&Au===t||(qu=null,fl(e,t));;)try{ml();break}catch(i){dl(e,i)}if(_a(),Iu=n,Su.current=r,null!==Ru)throw Error(a(261));return Nu=null,Au=0,Du}function ml(){for(;null!==Ru;)kl(Ru)}function gl(){for(;null!==Ru&&!$e();)kl(Ru)}function kl(e){var t=xu(e.alternate,e,Pu);e.memoizedProps=e.pendingProps,null===t?wl(e):Ru=t,Tu.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Pu)))return void(Ru=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Du=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Du&&(Du=5)}function _l(e,t,n){var r=kt,i=Cu.transition;try{Cu.transition=null,kt=1,function(e,t,n,r){do{bl()}while(null!==Qu);if(0!==(6&Iu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Ru=Nu=null,Au=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Nl(tt,(function(){return bl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=kt;kt=1;var u=Iu;Iu|=4,Tu.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var s=0,u=-1,l=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(l=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(u=s),d===o&&++h===r&&(l=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(_){El(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=tu,tu=!1}(e,n),yu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gu(n,e,i),Ye(),Iu=u,kt=s,Cu.transition=o}else e.current=n;if(Gu&&(Gu=!1,Qu=e,$u=i),0===(o=e.pendingLanes)&&(Ku=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Hu,Hu=null,e;0!==(1&$u)&&0!==e.tag&&bl(),0!==(1&(o=e.pendingLanes))?e===Xu?Yu++:(Yu=0,Xu=e):Yu=0,Bi()}(e,t,n,r)}finally{Cu.transition=i,kt=r}return null}function bl(){if(null!==Qu){var e=wt($u),t=Cu.transition,n=kt;try{if(Cu.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,$u=0,0!==(6&Iu))throw Error(a(331));var i=Iu;for(Iu|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Js=c;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Js=f;else for(;null!==Js;){var d=(h=Js).sibling,p=h.return;if(au(h),h===c){Js=null;break}if(null!==d){d.return=p,Js=d;break}Js=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Js=g;break e}Js=o.return}}var k=e.current;for(Js=k;null!==Js;){var w=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Js=w;else e:for(s=k;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(b){El(u,u.return,b)}if(u===s){Js=null;break e}var _=u.sibling;if(null!==_){_.return=u.return,Js=_;break e}Js=u.return}}if(Iu=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Cu.transition=t}}return!1}function xl(e,t,n){e=Da(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(mt(e,1,t),rl(e,t))}function El(e,t,n){if(3===e.tag)xl(e,e,n);else for(;null!==t;){if(3===t.tag){xl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Da(t,e=vs(t,e=cs(n,e),1),1),e=el(),null!==t&&(mt(t,1,e),rl(t,e));break}}t=t.return}}function Sl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Au&n)===n&&(4===Du||3===Du&&(130023424&Au)===Au&&500>Xe()-zu?fl(e,0):Uu|=n),rl(e,t)}function Tl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Na(e,t))&&(mt(e,t,n),rl(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tl(e,n)}function Nl(e,t){return Ge(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(e,t,n,r){return new Rl(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Al(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Ll(n.children,i,o,t);case E:s=8,i|=8;break;case S:return(e=Al(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Al(13,n,t,i)).elementType=N,e.lanes=o,e;case R:return(e=Al(19,n,t,i)).elementType=R,e.lanes=o,e;case O:return Ml(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case C:s=9;break e;case I:s=11;break e;case A:s=14;break e;case P:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Al(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ll(e,t,n,r){return(e=Al(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Al(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fl(e,t,n){return(e=Al(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Al(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,a,o,s,u){return e=new jl(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Al(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function zl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,a,o,s,u){return(e=Vl(n,r,!0,e,0,a,0,s,u)).context=Bl(null),n=e.current,(a=Oa(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,mt(e,i,r),rl(e,r),e}function Wl(e,t,n,r){var i=t.current,a=el(),o=tl(i);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nl(e,i,o,a),La(e,i,o)),o}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ti(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ti(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Ws(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=bs(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=As(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ts(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&la(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bs(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ti(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Oa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xs(e,t,r,i=ya(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),qs(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ha(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hl(o);s.call(e)}}Wl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hl(o);a.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),cl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hl(u);s.call(e)}}var u=Vl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[pi]=u.current,Br(8===e.nodeType?e.parentNode:e),cl((function(){Wl(t,u,n,r)})),u}(n,t,e,i,r);return Hl(o)}Yl.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wl(e,t,null,null)},Yl.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Wl(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rl(t,Xe()),0===(6&Iu)&&(Bu=Xe()+500,Bi()))}break;case 13:cl((function(){var t=Na(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Gl(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nl(t,e,134217728,el());Gl(e,134217728)}},xt=function(e){if(13===e.tag){var t=tl(e),n=Na(e,t);if(null!==n)nl(n,e,t,el());Gl(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ll,Ne=cl;var tc={usingClientEntryPoint:!1,Events:[ki,wi,_i,Te,Ce,ll]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xl(t))throw Error(a(200));return zl(e,t,null,n)},t.createRoot=function(e,t){if(!Xl(e))throw Error(a(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $l(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var _=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+I(u,0):a,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",_(e))for(var l=0;l<e.length;l++){var c=a+I(s=e[l],l);u+=N(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,c=a+I(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)b.call(t,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function _(e){if(y=!1,w(e),!v)if(null!==r(l))v=!0,O(b);else{var t=r(c);null!==t&&D(_,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(w(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(l)&&i(l),w(n)}else i(l);f=r(l)}if(null!==f)var u=!0;else{var h=r(c);null!==h&&D(_,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,T=-1,C=5,I=-1;function N(){return!(t.unstable_now()-I<C)}function R(){if(null!==S){var e=t.unstable_now();I=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof k)x=function(){k(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=R,x=function(){P.postMessage(null)}}else x=function(){m(R,0)};function O(e){S=e,E||(E=!0,x())}function D(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(y?(g(T),T=-1):y=!0,D(_,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,O(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.p="/twitter-clone/",function(){var e,t=n(791),r=n(250);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));var h=function(e){return e};var f="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function y(){return Math.random().toString(36).substr(2,8)}function m(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var k=(0,t.createContext)(null);var w=(0,t.createContext)(null);var _=(0,t.createContext)({outlet:null,matches:[]});function b(e,t){if(!e)throw new Error(t)}function x(e,t,n){void 0===n&&(n="/");var r=A(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=E(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=I(i[o],r);return a}function E(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||b(!1),a.relativePath=a.relativePath.slice(r.length));var o=P([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&b(!1),E(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:s})})),t}var S=/^:\w+$/,T=function(e){return"*"===e};function C(e,t){var n=e.split("/"),r=n.length;return n.some(T)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!T(e)})).reduce((function(e,t){return e+(S.test(t)?3:""===t?1:10)}),r)}function I(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=N({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:P([i,c.pathname]),pathnameBase:O(P([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=P([i,c.pathnameBase]))}return a}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Cn){return e}}(c[n]||""),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function R(e,t,n){var r,i="string"===typeof e?g(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:D(a),hash:L(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var P=function(e){return e.join("/").replace(/\/\/+/g,"/")},O=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},D=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M(e){F()||b(!1);var n=(0,t.useContext)(k),r=n.basename,i=n.navigator,a=V(e),o=a.hash,s=a.pathname,u=a.search,l=s;if("/"!==r){var c=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?g(e).pathname:e.pathname}(e),h=null!=c&&c.endsWith("/");l="/"===s?r+(h?"/":""):P([r,s])}return i.createHref({pathname:l,search:u,hash:o})}function F(){return null!=(0,t.useContext)(w)}function U(){return F()||b(!1),(0,t.useContext)(w).location}function j(){F()||b(!1);var e=(0,t.useContext)(k),n=e.basename,r=e.navigator,i=(0,t.useContext)(_).matches,a=U().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),s=(0,t.useRef)(!1);(0,t.useEffect)((function(){s.current=!0}));var u=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=R(e,JSON.parse(o),a);"/"!==n&&(i.pathname=P([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return u}function V(e){var n=(0,t.useContext)(_).matches,r=U().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return R(e,JSON.parse(i),r)}),[e,i,r])}function z(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(_.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function B(e){b(!1)}function q(n){var r=n.basename,i=void 0===r?"/":r,a=n.children,o=void 0===a?null:a,s=n.location,u=n.navigationType,l=void 0===u?e.Pop:u,c=n.navigator,h=n.static,f=void 0!==h&&h;F()&&b(!1);var d=O(i),p=(0,t.useMemo)((function(){return{basename:d,navigator:c,static:f}}),[d,c,f]);"string"===typeof s&&(s=g(s));var v=s,y=v.pathname,m=void 0===y?"/":y,_=v.search,x=void 0===_?"":_,E=v.hash,S=void 0===E?"":E,T=v.state,C=void 0===T?null:T,I=v.key,N=void 0===I?"default":I,R=(0,t.useMemo)((function(){var e=A(m,d);return null==e?null:{pathname:e,search:x,hash:S,state:C,key:N}}),[d,m,x,S,C,N]);return null==R?null:(0,t.createElement)(k.Provider,{value:p},(0,t.createElement)(w.Provider,{children:o,value:{location:R,navigationType:l}}))}function W(e){var n=e.children,r=e.location;return function(e,n){F()||b(!1);var r,i=(0,t.useContext)(_).matches,a=i[i.length-1],o=a?a.params:{},s=(a&&a.pathname,a?a.pathnameBase:"/"),u=(a&&a.route,U());if(n){var l,c="string"===typeof n?g(n):n;"/"===s||(null==(l=c.pathname)?void 0:l.startsWith(s))||b(!1),r=c}else r=u;var h=r.pathname||"/",f=x(e,{pathname:"/"===s?h:h.slice(s.length)||"/"});return z(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:P([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:P([s,e.pathnameBase])})})),i)}(H(n),r)}function H(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==B&&b(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=H(e.props.children)),n.push(r)}else n.push.apply(n,H(e.props.children))})),n}function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function $(n){var r=n.basename,i=n.children,a=n.window,o=(0,t.useRef)();null==o.current&&(o.current=function(t){void 0===t&&(t={});var n=t.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,h({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(d,(function(){if(o)_.call(o),o=null;else{var t=e.Pop,n=a(),r=n[0],i=n[1];if(_.length){if(null!=r){var s=l-r;s&&(o={action:t,location:i,retry:function(){C(-1*s)}},C(s))}}else T(t)}}));var s=e.Pop,u=a(),l=u[0],k=u[1],w=v(),_=v();function b(e){return"string"===typeof e?e:m(e)}function x(e,t){return void 0===t&&(t=null),h(c({pathname:k.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:y()}))}function E(e,t){return[{usr:e.state,key:e.key,idx:t},b(e)]}function S(e,t,n){return!_.length||(_.call({action:e,location:t,retry:n}),!1)}function T(e){s=e;var t=a();l=t[0],k=t[1],w.call({action:s,location:k})}function C(e){i.go(e)}null==l&&(l=0,i.replaceState(c({},i.state,{idx:l}),""));var I={get action(){return s},get location(){return k},createHref:b,push:function t(n,a){var o=e.Push,s=x(n,a);if(S(o,s,(function(){t(n,a)}))){var u=E(s,l+1),c=u[0],h=u[1];try{i.pushState(c,"",h)}catch(Cn){r.location.assign(h)}T(o)}},replace:function t(n,r){var a=e.Replace,o=x(n,r);if(S(a,o,(function(){t(n,r)}))){var s=E(o,l),u=s[0],c=s[1];i.replaceState(u,"",c),T(a)}},go:C,back:function(){C(-1)},forward:function(){C(1)},listen:function(e){return w.push(e)},block:function(e){var t=_.push(e);return 1===_.length&&r.addEventListener(f,p),function(){t(),_.length||r.removeEventListener(f,p)}}};return I}({window:a}));var s=o.current,u=l((0,t.useState)({action:s.action,location:s.location}),2),k=u[0],w=u[1];return(0,t.useLayoutEffect)((function(){return s.listen(w)}),[s]),(0,t.createElement)(q,{basename:r,children:i,location:k.location,navigationType:k.action,navigator:s})}var Y=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,l=e.to,c=G(e,Q),h=M(l),f=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=j(),u=U(),l=V(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||m(u)===m(l);s(e,{replace:n,state:o})}}),[u,s,l,a,o,i,e])}(l,{replace:o,state:s,target:u});return(0,t.createElement)("a",K({},c,{href:h,onClick:function(e){r&&r(e),e.defaultPrevented||i||f(e)},ref:n,target:u}))}));function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function J(){J=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(T){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=u;var c={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=h.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==X(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),s(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),s(m,o,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;b(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function Z(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(Cn){return void n(Cn)}s.done?t(u):Promise.resolve(u).then(r,i)}function ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Z(a,r,i,o,s,"next",e)}function s(e){Z(a,r,i,o,s,"throw",e)}o(void 0)}))}}function te(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}function ue(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function ce(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function he(e,t){if(t&&("object"===X(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function fe(e){var t=ce();return function(){var n,r=le(e);if(t){var i=le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return he(this,n)}}function de(e,t,n){return de=ce()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&se(i,n.prototype),i},de.apply(null,arguments)}function pe(e){var t="function"===typeof Map?new Map:void 0;return pe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return de(e,arguments,le(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),se(n,e)},pe(e)}var ve=!1,ye=!1,me="${JSCORE_VERSION}",ge=function(e,t){if(!e)throw ke(t)},ke=function(e){return new Error("Firebase Database ("+me+") INTERNAL ASSERT FAILED: "+e)},we=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|l>>6,d=63&l;u||(d=64,o||(f=64)),r.push(n[c],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(we(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var l=a<<2|o>>4;if(r.push(l),64!==s){var c=o<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},be=function(e){var t=we(e);return _e.encodeByteArray(t,!0)},xe=function(e){return be(e).replace(/\./g,"")},Ee=function(e){try{return _e.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Se(e){return Te(void 0,e)}function Te(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Te(e[n],t[n]));return e}var Ce=function(){function e(){var t=this;re(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ae(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ie(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function Re(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ae(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Pe(){var e=Ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Oe(){return!0===ve||!0===ye}var De=function(e){ue(n,e);var t=fe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(oe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(oe(a),Le.prototype.create),a}return ae(n)}(pe(Error)),Le=function(){function e(t,n,r){re(this,e),this.service=t,this.serviceName=n,this.errors=r}return ae(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Me(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new De(n,a,t);return o}}]),e}();function Me(e,t){return e.replace(Fe,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Fe=/\{\$([^}]+)}/g;function Ue(e){return JSON.parse(e)}function je(e){return JSON.stringify(e)}var Ve=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ue(Ee(a[0])||""),n=Ue(Ee(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ze(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Be(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function qe(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function We(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function He(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Ke(s)&&Ke(u)){if(!He(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=r;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function Ke(e){return null!==e&&"object"===typeof e}function Ge(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Qe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function $e(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Ye=function(){function e(){re(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return ae(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^c&(h^f),u=1518500249):(s=c^h^f,u=1859775393):p<60?(s=c&h|f&(c|h),u=2400959708):(s=c^h^f,u=3395469782);var v=(l<<5|l>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();var Xe=function(){function e(t,n){var r=this;re(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ae(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ne(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Je),void 0===r.error&&(r.error=Je),void 0===r.complete&&(r.complete=Je);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Je(){}function Ze(e,t){return"".concat(e," failed: ").concat(t," argument ")}var et=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function tt(e){return e&&e._delegate?e._delegate:e}var nt=function(){function e(t,n,r){re(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ae(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),rt="[DEFAULT]",it=function(){function e(t,n){re(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ae(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ce;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:rt})}catch(u){}var t,n=ne(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(te(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),te(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ne(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(gb){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===rt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(gb){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;return this.component?this.component.multipleInstances?e:rt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var at,ot,st=function(){function e(t){re(this,e),this.name=t,this.providers=new Map}return ae(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new it(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ut=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ot||(ot={}));var lt={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},ct=ot.INFO,ht=(i(at={},ot.DEBUG,"log"),i(at,ot.VERBOSE,"log"),i(at,ot.INFO,"info"),i(at,ot.WARN,"warn"),i(at,ot.ERROR,"error"),at),ft=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ht[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},dt=function(){function e(t){re(this,e),this.name=t,this._logLevel=ct,this._logHandler=ft,this._userLogHandler=null,ut.push(this)}return ae(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ot))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?lt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.DEBUG].concat(t)),this._logHandler.apply(this,[this,ot.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ot.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.INFO].concat(t)),this._logHandler.apply(this,[this,ot.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.WARN].concat(t)),this._logHandler.apply(this,[this,ot.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ot.ERROR].concat(t)),this._logHandler.apply(this,[this,ot.ERROR].concat(t))}}]),e}();var pt,vt;var yt=new WeakMap,mt=new WeakMap,gt=new WeakMap,kt=new WeakMap,wt=new WeakMap;var _t={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return mt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||gt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Et(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function bt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vt||(vt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(St(this),n),Et(yt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Et(e.apply(St(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[St(this),t].concat(r));return gt.set(a,t.sort?t.sort():[t]),Et(a)}}function xt(e){return"function"===typeof e?bt(e):(e instanceof IDBTransaction&&function(e){if(!mt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));mt.set(e,t)}}(e),t=e,(pt||(pt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,_t):e);var t}function Et(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Et(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&yt.set(t,e)})).catch((function(){})),wt.set(t,e),t}(e);if(kt.has(e))return kt.get(e);var t=xt(e);return t!==e&&(kt.set(e,t),wt.set(t,e)),t}var St=function(e){return wt.get(e)};var Tt,Ct,It=["get","getKey","getAll","getAllKeys","count"],Nt=["put","add","delete","clear"],Rt=new Map;function At(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Rt.get(t))return Rt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Nt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||It.includes(n))){var a=function(){var e=ee(J().mark((function e(t){var a,o,s,u,l,c,h=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=h[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Rt.set(t,a),a}}}_t=function(e){return o(o({},e),{},{get:function(t,n,r){return At(t,n)||e.get(t,n,r)},has:function(t,n){return!!At(t,n)||e.has(t,n)}})}(_t);var Pt=function(){function e(t){re(this,e),this.container=t}return ae(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ot="@firebase/app",Dt="0.7.27",Lt=new dt("@firebase/app"),Mt="[DEFAULT]",Ft=(i(Tt={},Ot,"fire-core"),i(Tt,"@firebase/app-compat","fire-core-compat"),i(Tt,"@firebase/analytics","fire-analytics"),i(Tt,"@firebase/analytics-compat","fire-analytics-compat"),i(Tt,"@firebase/app-check","fire-app-check"),i(Tt,"@firebase/app-check-compat","fire-app-check-compat"),i(Tt,"@firebase/auth","fire-auth"),i(Tt,"@firebase/auth-compat","fire-auth-compat"),i(Tt,"@firebase/database","fire-rtdb"),i(Tt,"@firebase/database-compat","fire-rtdb-compat"),i(Tt,"@firebase/functions","fire-fn"),i(Tt,"@firebase/functions-compat","fire-fn-compat"),i(Tt,"@firebase/installations","fire-iid"),i(Tt,"@firebase/installations-compat","fire-iid-compat"),i(Tt,"@firebase/messaging","fire-fcm"),i(Tt,"@firebase/messaging-compat","fire-fcm-compat"),i(Tt,"@firebase/performance","fire-perf"),i(Tt,"@firebase/performance-compat","fire-perf-compat"),i(Tt,"@firebase/remote-config","fire-rc"),i(Tt,"@firebase/remote-config-compat","fire-rc-compat"),i(Tt,"@firebase/storage","fire-gcs"),i(Tt,"@firebase/storage-compat","fire-gcs-compat"),i(Tt,"@firebase/firestore","fire-fst"),i(Tt,"@firebase/firestore-compat","fire-fst-compat"),i(Tt,"fire-js","fire-js"),i(Tt,"firebase","fire-js-all"),Tt),Ut=new Map,jt=new Map;function Vt(e,t){try{e.container.addComponent(t)}catch(n){Lt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function zt(e){var t=e.name;if(jt.has(t))return Lt.debug("There were multiple attempts to register component ".concat(t,".")),!1;jt.set(t,e);var n,r=ne(Ut.values());try{for(r.s();!(n=r.n()).done;){Vt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Bt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var qt=(i(Ct={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(Ct,"bad-app-name","Illegal App name: '{$appName}"),i(Ct,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),i(Ct,"app-deleted","Firebase App named '{$appName}' already deleted"),i(Ct,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),i(Ct,"invalid-log-argument","First argument to `onLog` must be null or a function."),i(Ct,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),i(Ct,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),i(Ct,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),i(Ct,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Ct),Wt=new Le("app","Firebase",qt),Ht=function(){function e(t,n,r){var i=this;re(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nt("app",(function(){return i}),"PUBLIC"))}return ae(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}}]),e}(),Kt="9.8.4";function Gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=Ut.get(e);if(!t)throw Wt.create("no-app",{appName:e});return t}function Qt(e,t,n){var r,i=null!==(r=Ft[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Lt.warn(s.join(" "))}zt(new nt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var $t="firebase-heartbeat-store",Yt=null;function Xt(){return Yt||(Yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Et(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Et(s.result),e.oldVersion,e.newVersion,Et(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore($t)}}).catch((function(e){throw Wt.create("storage-open",{originalErrorMessage:e.message})}))),Yt}function Jt(e){return Zt.apply(this,arguments)}function Zt(){return Zt=ee(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xt();case 3:return r=e.sent,e.abrupt("return",r.transaction($t).objectStore($t).get(nn(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Wt.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Zt.apply(this,arguments)}function en(e,t){return tn.apply(this,arguments)}function tn(){return tn=ee(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xt();case 3:return i=e.sent,a=i.transaction($t,"readwrite"),o=a.objectStore($t),e.next=8,o.put(n,nn(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),Wt.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),tn.apply(this,arguments)}function nn(e){return"".concat(e.name,"!").concat(e.options.appId)}var rn=function(){function e(t){var n=this;re(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new un(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ae(e,[{key:"triggerHeartbeat",value:function(){var e=ee(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=an(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ee(J().mark((function e(){var t,n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=an(),n=on(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=xe(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function an(){return(new Date).toISOString().substring(0,10)}function on(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ne(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ln(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ln(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var sn,un=function(){function e(t){re(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ae(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof indexedDB){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Cn){t(Cn)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Jt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ee(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",en(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ee(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",en(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(te(r.heartbeats),te(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ln(e){return xe(JSON.stringify({version:2,heartbeats:e})).length}sn="",zt(new nt("platform-logger",(function(e){return new Pt(e)}),"PRIVATE")),zt(new nt("heartbeat",(function(e){return new rn(e)}),"PRIVATE")),Qt(Ot,Dt,sn),Qt(Ot,Dt,"esm2017"),Qt("fire-js","");Qt("firebase","9.8.4","app");var cn="@firebase/database",hn="0.13.2",fn="";var dn=function(){function e(t){re(this,e),this.domStorage_=t,this.prefix_="firebase:"}return ae(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),je(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ue(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),pn=function(){function e(){re(this,e),this.cache_={},this.isInMemoryStorage=!0}return ae(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ze(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),vn=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new dn(t)}}catch(n){}return new pn},yn=vn("localStorage"),mn=vn("sessionStorage"),gn=new dt("@firebase/database"),kn=function(){var e=1;return function(){return e++}}(),wn=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,ge(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Ye;n.update(t);var r=n.digest();return _e.encodeByteArray(r)},_n=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?je(r):r,t+=" "}return t},bn=null,xn=!0,En=function(e,t){ge(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(gn.logLevel=ot.VERBOSE,bn=gn.log.bind(gn),t&&mn.set("logging_enabled",!0)):"function"===typeof e?bn=e:(bn=null,mn.remove("logging_enabled"))},Sn=function(){if(!0===xn&&(xn=!1,null===bn&&!0===mn.get("logging_enabled")&&En(!0)),bn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=_n.apply(null,t);bn(r)}},Tn=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Sn.apply(void 0,[e].concat(n))}},Cn=function(){var e="FIREBASE INTERNAL ERROR: "+_n.apply(void 0,arguments);gn.error(e)},In=function(){var e="FIREBASE FATAL ERROR: ".concat(_n.apply(void 0,arguments));throw gn.error(e),new Error(e)},Nn=function(){var e="FIREBASE WARNING: "+_n.apply(void 0,arguments);gn.warn(e)},Rn=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},An="[MIN_NAME]",Pn="[MAX_NAME]",On=function(e,t){if(e===t)return 0;if(e===An||t===Pn)return-1;if(t===An||e===Pn)return 1;var n=qn(e),r=qn(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Dn=function(e,t){return e===t?0:e<t?-1:1},Ln=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+je(t))},Mn=function e(t){if("object"!==typeof t||null===t)return je(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=je(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Fn=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Un(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var jn=function(e){ge(!Rn(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(u.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var Vn=new RegExp("^-?(0*)\\d{1,10}$"),zn=-2147483648,Bn=2147483647,qn=function(e){if(Vn.test(e)){var t=Number(e);if(t>=zn&&t<=Bn)return t}return null},Wn=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Nn("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Hn=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},Kn=function(){function e(t,n){var r=this;re(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return ae(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Nn('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Gn=function(){function e(t,n,r){var i=this;re(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return ae(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nn(e)}}]),e}(),Qn=function(){function e(t){re(this,e),this.accessToken=t}return ae(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Qn.OWNER="owner";var $n="5",Yn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xn="websocket",Jn="long_polling",Zn=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];re(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yn.get("host:"+t)||this._host}return ae(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yn.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function er(e,t,n){var r;if(ge("string"===typeof t,"typeof type must == string"),ge("object"===typeof n,"typeof params must == object"),t===Xn)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Jn)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Un(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var tr=function(){function e(){re(this,e),this.counters_={}}return ae(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ze(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Se(this.counters_)}}]),e}(),nr={},rr={};function ir(e){var t=e.toString();return nr[t]||(nr[t]=new tr),nr[t]}var ar=function(){function e(t){re(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return ae(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Wn((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),or="start",sr="close",ur=function(){function e(t,n,r,i,a,o,s){var u=this;re(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Tn(t),this.stats_=ir(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),er(n,Jn,e)}}return ae(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ar(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Oe()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new lr((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===or)n.id=a,n.password=o;else{if(i!==sr)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=$n,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Yn.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=je(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=be(t),r=Fn(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Oe()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=je(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Oe()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),lr=function(){function e(t,n,r,i){if(re(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Oe())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=kn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Sn("frame writing exception"),s.stack&&Sn(s.stack),Sn(s)}}}return ae(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Oe()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Sn("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Sn("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),cr=null;"undefined"!==typeof MozWebSocket?cr=MozWebSocket:"undefined"!==typeof WebSocket&&(cr=WebSocket);var hr=function(){function e(t,n,r,i,a,o,s){re(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Tn(this.connId),this.stats_=ir(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return ae(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yn.set("previous_websocket_failure",!0);try{if(Oe()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat($n,"/").concat(fn,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/twitter-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyChxZANunZ5GNHOAEbc5IAZ6iDBLlaFdrw",REACT_APP_AUTH_DOMAIN:"k-twitter-5c668.firebaseapp.com",REACT_APP_DATABASE_URL:"https://k-twitter-5c668.firebaseio.com",REACT_APP_PROJECT_ID:"k-twitter-5c668",REACT_APP_STORAGE_BUCKET:"k-twitter-5c668.appspot.com",REACT_APP_MESSAGIN_ID:"90818870249",REACT_APP_APP_ID:"1:90818870249:web:0da5980ea6523225d1e978"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new cr(this.connURL,[],undefined)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){yn.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ue(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(ge(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=je(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Fn(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=$n,!Oe()&&"undefined"!==typeof location&&location.hostname&&Yn.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),er(e,Xn,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==cr&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return yn.isInMemoryStorage||!0===yn.get("previous_websocket_failure")}}]),e}();hr.responsesRequiredToBeHealthy=2,hr.healthyTimeout=3e4;var fr=function(){function e(t){re(this,e),this.initTransports_(t)}return ae(e,[{key:"initTransports_",value:function(t){var n=hr&&hr.isAvailable(),r=n&&!hr.previouslyFailed();if(t.webSocketOnly&&(n||Nn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hr];else{var i,a=this.transports_=[],o=ne(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[ur,hr]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();fr.globalTransportInitialized_=!1;var dr=function(){function e(t,n,r,i,a,o,s,u,l,c){re(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Tn("c:"+this.id+":"),this.transportManager_=new fr(n),this.log_("Connection created"),this.start_()}return ae(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Hn((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Ln("t",e),n=Ln("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Ln("t",e),n=Ln("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Ln("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Cn("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Cn("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),$n!==n&&Nn("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Hn((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hn((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),pr=function(){function e(){re(this,e)}return ae(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),vr=function(){function e(t){re(this,e),this.allowedEvents_=t,this.listeners_={},ge(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return ae(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=te(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){ge(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),yr=function(e){ue(n,e);var t=fe(n);function n(){var e;return re(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ne()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return ae(n,[{key:"getInitialEvent",value:function(e){return ge("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(vr),mr=function(){function e(t,n){if(re(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return ae(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function gr(){return new mr("")}function kr(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function wr(e){return e.pieces_.length-e.pieceNum_}function _r(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new mr(e.pieces_,t)}function br(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function xr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Er(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new mr(t,0)}function Sr(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof mr)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new mr(n,0)}function Tr(e){return e.pieceNum_>=e.pieces_.length}function Cr(e,t){var n=kr(e),r=kr(t);if(null===n)return t;if(n===r)return Cr(_r(e),_r(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ir(e,t){if(wr(e)!==wr(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Nr(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(wr(e)>wr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Rr=ae((function e(t,n){re(this,e),this.errorPrefix_=n,this.parts_=xr(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=et(this.parts_[r]);Ar(this)}));function Ar(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pr(e))}function Pr(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Or=function(e){ue(n,e);var t=fe(n);function n(){var e,r,i;return re(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return ae(n,[{key:"getInitialEvent",value:function(e){return ge("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(vr),Dr=1e3,Lr=function(e){ue(n,e);var t=fe(n);function n(e,r,i,a,o,s,u,l){var c;if(re(this,n),(c=t.call(this)).repoInfo_=e,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=a,c.onServerInfoUpdate_=o,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=n.nextPersistentConnectionId_++,c.log_=Tn("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=Dr,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!Oe())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Or.getInstance().on("visible",c.onVisible_,oe(c)),-1===e.host.indexOf("fblocal")&&yr.getInstance().on("online",c.onOnline_,oe(c)),c}return ae(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(je(i)),ge(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Ce,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var t=e.d;"ok"===e.s?n.resolve(t):n.reject(t)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;var i=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[i];void 0!==e&&r===e&&(delete t.outstandingGets_[i],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+i+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(i),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ge(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Ve(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Ve(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+je(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Cn("Unrecognized action received from server: "+je(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;ge(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Dr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Dr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Dr),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=ee(J().mark((function e(){var t,r,i,a,o,s,u,c,h,f,d,p,v,y,m=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},h=function(e){ge(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=l(d,2),v=p[0],y=p[1],s?Sn("getToken() completed but was canceled"):(Sn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,u=new dr(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Nn(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Nn(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Sn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Sn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],qe(this.interruptReasons_)&&(this.reconnectDelay_=Dr,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Mn(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new mr(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Sn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Sn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=ne(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=ne(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Oe()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+fn.replace(/\./g,"-")]=1,Ne()?e["framework.cordova"]=1:Ae()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=yr.getInstance().currentlyOnline();return qe(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ze(e,"w")){var n=Be(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Nn("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(pr);Lr.nextPersistentConnectionId_=0,Lr.nextConnectionId_=0;var Mr,Fr=function(){function e(t,n){re(this,e),this.name=t,this.node=n}return ae(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Ur=function(){function e(){re(this,e)}return ae(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Fr(An,e),r=new Fr(An,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Fr.MIN}}]),e}(),jr=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"compare",value:function(e,t){return On(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw ke("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Fr.MIN}},{key:"maxPost",value:function(){return new Fr(Pn,Mr)}},{key:"makePost",value:function(e,t){return ge("string"===typeof e,"KeyIndex indexValue must always be a string."),new Fr(e,Mr)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Mr},set:function(e){Mr=e}}]),n}(Ur),Vr=new jr,zr=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;re(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return ae(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Br=function(){function e(t,n,r,i,a){re(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Hr.EMPTY_NODE,this.right=null!=a?a:Hr.EMPTY_NODE}return ae(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Hr.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Hr.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Br.RED=!0,Br.BLACK=!1;var qr,Wr=function(){function e(){re(this,e)}return ae(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Br(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Hr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;re(this,e),this.comparator_=t,this.root_=n}return ae(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Br.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Br.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new zr(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new zr(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new zr(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new zr(this.root_,null,this.comparator_,!0,e)}}]),e}();function Kr(e,t){return On(e.name,t.name)}function Gr(e,t){return On(e,t)}Hr.EMPTY_NODE=new Wr;var Qr,$r,Yr,Xr=function(e){return"number"===typeof e?"number:"+jn(e):"string:"+e},Jr=function(e){if(e.isLeafNode()){var t=e.val();ge("string"===typeof t||"number"===typeof t||"object"===typeof t&&ze(t,".sv"),"Priority must be a string or number.")}else ge(e===qr||e.isEmpty(),"priority of unexpected type.");ge(e===qr||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Zr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;re(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,ge(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Jr(this.priorityNode_)}return ae(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Tr(t)?this:".priority"===kr(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=kr(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(ge(".priority"!==r||1===wr(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(_r(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Xr(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?jn(this.value_):this.value_,this.lazyHash_=wn(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(ge(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return ge(i>=0,"Unknown leaf type: "+n),ge(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Qr},set:function(e){Qr=e}}]),e}();Zr.VALUE_TYPE_ORDER=["object","boolean","number","string"];var ei,ti,ni=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?On(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Fr.MIN}},{key:"maxPost",value:function(){return new Fr(Pn,new Zr("[PRIORITY-POST]",Yr))}},{key:"makePost",value:function(e,t){var n=$r(e);return new Fr(t,new Zr("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Ur),ri=new ni,ii=Math.log(2),ai=function(){function e(t){re(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ii,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return ae(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),oi=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new Br(o,a.node,Br.BLACK,null,null);var u=parseInt(s/2,10)+r,l=t(r,u),c=t(u+1,i);return a=e[u],o=n?n(a):a,new Br(o,a.node,Br.BLACK,l,c)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var l=i(a+1,s),c=e[a],h=n?n(c):c;u(new Br(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,Br.BLACK):(s(h,Br.BLACK),s(h,Br.RED))}return a}(new ai(e.length));return new Hr(r||t,a)},si={},ui=function(){function e(t,n){re(this,e),this.indexes_=t,this.indexSet_=n}return ae(e,[{key:"get",value:function(e){var t=Be(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Hr?t:null}},{key:"hasIndex",value:function(e){return ze(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){ge(t!==Vr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Fr.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?oi(i,t.getCompare()):si;var u=t.toString(),l=Object.assign({},this.indexSet_);l[u]=t;var c=Object.assign({},this.indexes_);return c[u]=r,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(We(this.indexes_,(function(e,i){var a=Be(r.indexSet_,i);if(ge(a,"Missing index implementation for "+i),e===si){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Fr.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),oi(o,a.getCompare())}return si}var l=n.get(t.name),c=e;return l&&(c=c.remove(new Fr(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(We(this.indexes_,(function(e){if(e===si)return e;var r=n.get(t.name);return r?e.remove(new Fr(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return ge(si&&ri,"ChildrenNode.ts has not been loaded"),ei=ei||new e({".priority":si},{".priority":ri})}}]),e}(),li=function(){function e(t,n,r){re(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Jr(this.priorityNode_),this.children_.isEmpty()&&ge(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return ae(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||ti}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ti:t}},{key:"getChild",value:function(e){var t=kr(e);return null===t?this:this.getImmediateChild(t).getChild(_r(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(ge(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Fr(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?ti:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=kr(e);if(null===n)return t;ge(".priority"!==kr(e)||1===wr(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(_r(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(ri,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Xr(this.getPriority().val())+":"),this.forEachChild(ri,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":wn(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Fr(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Fr(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Fr(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Fr.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Fr.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ci?-1:0}},{key:"withIndex",value:function(t){if(t===Vr||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Vr||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ri),r=t.getIterator(ri),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Vr?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return ti||(ti=new e(new Hr(Gr),null,ui.Default))}}]),e}();li.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var ci=new(function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.call(this,new Hr(Gr),li.EMPTY_NODE,ui.Default)}return ae(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return li.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(li));Object.defineProperties(Fr,{MIN:{value:new Fr(An,li.EMPTY_NODE)},MAX:{value:new Fr(Pn,ci)}}),jr.__EMPTY_NODE=li.EMPTY_NODE,Zr.__childrenNodeConstructor=li,qr=ci,function(e){Yr=e}(ci);function hi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return li.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ge(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Zr(n,hi(t))}if(e instanceof Array){var r=li.EMPTY_NODE;return Un(e,(function(t,n){if(ze(e,t)&&"."!==t.substring(0,1)){var i=hi(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(hi(t))}var i=[],a=!1,o=e;if(Un(o,(function(e,t){if("."!==e.substring(0,1)){var n=hi(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Fr(e,n)))}})),0===i.length)return li.EMPTY_NODE;var s=oi(i,Kr,(function(e){return e.name}),Gr);if(a){var u=oi(i,ri.getCompare());return new li(s,hi(t),new ui({".priority":u},{".priority":ri}))}return new li(s,hi(t),ui.Default)}!function(e){$r=e}(hi);var fi=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this)).indexPath_=e,ge(!Tr(e)&&".priority"!==kr(e),"Can't create PathIndex with empty path or .priority key"),r}return ae(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?On(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=hi(e),r=li.EMPTY_NODE.updateChild(this.indexPath_,n);return new Fr(t,r)}},{key:"maxPost",value:function(){var e=li.EMPTY_NODE.updateChild(this.indexPath_,ci);return new Fr(Pn,e)}},{key:"toString",value:function(){return xr(this.indexPath_,0).join("/")}}]),n}(Ur),di=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?On(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Fr.MIN}},{key:"maxPost",value:function(){return Fr.MAX}},{key:"makePost",value:function(e,t){var n=hi(e);return new Fr(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Ur),pi=new di,vi="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function yi(e){return{type:"value",snapshotNode:e}}function mi(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function gi(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ki(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var wi=function(){function e(){re(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ri}return ae(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return ge(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return ge(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:An}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return ge(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return ge(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pn}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return ge(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===ri}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function _i(e){var t,n={};return e.isDefault()||(e.index_===ri?t="$priority":e.index_===pi?t="$value":e.index_===Vr?t="$key":(ge(e.index_ instanceof fi,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=je(t),e.startSet_&&(n.startAt=je(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+je(e.indexStartName_))),e.endSet_&&(n.endAt=je(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+je(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function bi(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ri&&(t.i=e.index_.toString()),t}var xi=function(e){ue(n,e);var t=fe(n);function n(e,r,i,a){var o;return re(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Tn("p:rest:"),o.listens_={},o}return ae(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var l=_i(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Be(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=_i(e._queryParams),r=e._path.toString(),i=new Ce;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Ge(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Ue(c.responseText)}catch(n){Nn("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Nn("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(ge(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(pr),Ei=function(){function e(){re(this,e),this.rootNode_=li.EMPTY_NODE}return ae(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Si(){return{value:null,children:new Map}}function Ti(e,t,n){if(Tr(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=kr(t);e.children.has(r)||e.children.set(r,Si()),Ti(e.children.get(r),t=_r(t),n)}}function Ci(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Ci(r,new mr(t.toString()+"/"+e),n)}))}var Ii,Ni=function(){function e(t){re(this,e),this.collection_=t,this.last_=null}return ae(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Un(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Ri=function(){function e(t,n){re(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Ni(t);var r=1e4+2e4*Math.random();Hn(this.reportStats_.bind(this),Math.floor(r))}return ae(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Un(t,(function(t,i){i>0&&ze(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Hn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Ai(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ii||(Ii={}));var Pi,Oi=function(){function e(t,n,r){re(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Ii.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return ae(e,[{key:"operationForChild",value:function(t){if(Tr(this.path)){if(null!=this.affectedTree.value)return ge(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new mr(t));return new e(gr(),n,this.revert)}return ge(kr(this.path)===t,"operationForChild called for unrelated child."),new e(_r(this.path),this.affectedTree,this.revert)}}]),e}(),Di=function(){function e(t,n,r){re(this,e),this.source=t,this.path=n,this.snap=r,this.type=Ii.OVERWRITE}return ae(e,[{key:"operationForChild",value:function(t){return Tr(this.path)?new e(this.source,gr(),this.snap.getImmediateChild(t)):new e(this.source,_r(this.path),this.snap)}}]),e}(),Li=function(){function e(t,n,r){re(this,e),this.source=t,this.path=n,this.children=r,this.type=Ii.MERGE}return ae(e,[{key:"operationForChild",value:function(t){if(Tr(this.path)){var n=this.children.subtree(new mr(t));return n.isEmpty()?null:n.value?new Di(this.source,gr(),n.value):new e(this.source,gr(),n)}return ge(kr(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,_r(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Mi=function(){function e(t,n,r){re(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return ae(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Tr(e))return this.isFullyInitialized()&&!this.filtered_;var t=kr(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function Fi(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw ke("Should only compare child_ events.");var r=new Fr(t.childName,t.snapshotNode),i=new Fr(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Ui(e,t){return{eventCache:e,serverCache:t}}function ji(e,t,n,r){return Ui(new Mi(t,n,r),e.serverCache)}function Vi(e,t,n,r){return Ui(e.eventCache,new Mi(t,n,r))}function zi(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Bi(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var qi=function(){return Pi||(Pi=new Hr(Dn)),Pi},Wi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qi();re(this,e),this.value=t,this.children=n}return ae(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:gr(),value:this.value};if(Tr(e))return null;var n=kr(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(_r(e),t);return null!=i?{path:Sr(new mr(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Tr(t))return this;var n=kr(t),r=this.children.get(n);return null!==r?r.subtree(_r(t)):new e(null)}},{key:"set",value:function(t,n){if(Tr(t))return new e(n,this.children);var r=kr(t),i=(this.children.get(r)||new e(null)).set(_r(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Tr(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=kr(t),r=this.children.get(n);if(r){var i,a=r.remove(_r(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Tr(e))return this.value;var t=kr(e),n=this.children.get(t);return n?n.get(_r(e)):null}},{key:"setTree",value:function(t,n){if(Tr(t))return n;var r,i=kr(t),a=(this.children.get(i)||new e(null)).setTree(_r(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(gr(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Sr(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,gr(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Tr(e))return null;var i=kr(e),a=this.children.get(i);return a?a.findOnPath_(_r(e),Sr(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,gr(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Tr(t))return this;this.value&&r(n,this.value);var i=kr(t),a=this.children.get(i);return a?a.foreachOnPath_(_r(t),Sr(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(gr(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Sr(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Un(t,(function(e,t){n=n.set(new mr(e),t)})),n}}]),e}(),Hi=function(){function e(t){re(this,e),this.writeTree_=t}return ae(e,null,[{key:"empty",value:function(){return new e(new Wi(null))}}]),e}();function Ki(e,t,n){if(Tr(t))return new Hi(new Wi(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Cr(i,t);return a=a.updateChild(o,n),new Hi(e.writeTree_.set(i,a))}var s=new Wi(n),u=e.writeTree_.setTree(t,s);return new Hi(u)}function Gi(e,t,n){var r=e;return Un(n,(function(e,n){r=Ki(r,Sr(t,e),n)})),r}function Qi(e,t){if(Tr(t))return Hi.empty();var n=e.writeTree_.setTree(t,new Wi(null));return new Hi(n)}function $i(e,t){return null!=Yi(e,t)}function Yi(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Cr(n.path,t)):null}function Xi(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ri,(function(e,n){t.push(new Fr(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Fr(e,n.value))})),t}function Ji(e,t){if(Tr(t))return e;var n=Yi(e,t);return new Hi(null!=n?new Wi(n):e.writeTree_.subtree(t))}function Zi(e){return e.writeTree_.isEmpty()}function ea(e,t){return ta(gr(),e.writeTree_,t)}function ta(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(ge(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ta(Sr(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Sr(e,".priority"),r)),n}function na(e,t){return ya(t,e)}function ra(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function ia(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));ge(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&aa(s,r.path)?i=!1:Nr(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=sa(e.allWrites,oa,gr()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Qi(e.visibleWrites,r.path):Un(r.children,(function(t){e.visibleWrites=Qi(e.visibleWrites,Sr(r.path,t))}));return!0}return!1}function aa(e,t){if(e.snap)return Nr(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Nr(Sr(e.path,n),t))return!0;return!1}function oa(e){return e.visible}function sa(e,t,n){for(var r=Hi.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Nr(n,o)?r=Ki(r,s=Cr(n,o),a.snap):Nr(o,n)&&(s=Cr(o,n),r=Ki(r,gr(),a.snap.getChild(s)));else{if(!a.children)throw ke("WriteRecord should have .snap or .children");if(Nr(n,o))r=Gi(r,s=Cr(n,o),a.children);else if(Nr(o,n))if(Tr(s=Cr(o,n)))r=Gi(r,gr(),a.children);else{var u=Be(a.children,kr(s));if(u){var l=u.getChild(_r(s));r=Ki(r,gr(),l)}}}}}return r}function ua(e,t,n,r,i){if(r||i){var a=Ji(e.visibleWrites,t);if(!i&&Zi(a))return n;if(i||null!=n||$i(a,gr())){return ea(sa(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Nr(e.path,t)||Nr(t,e.path))}),t),n||li.EMPTY_NODE)}return null}var o=Yi(e.visibleWrites,t);if(null!=o)return o;var s=Ji(e.visibleWrites,t);return Zi(s)?n:null!=n||$i(s,gr())?ea(s,n||li.EMPTY_NODE):null}function la(e,t,n,r){return ua(e.writeTree,e.treePath,t,n,r)}function ca(e,t){return function(e,t,n){var r=li.EMPTY_NODE,i=Yi(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ri,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Ji(e.visibleWrites,t);return n.forEachChild(ri,(function(e,t){var n=ea(Ji(a,new mr(e)),t);r=r.updateImmediateChild(e,n)})),Xi(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Xi(Ji(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ha(e,t,n,r){return function(e,t,n,r,i){ge(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Sr(t,n);if($i(e.visibleWrites,a))return null;var o=Ji(e.visibleWrites,a);return Zi(o)?i.getChild(n):ea(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function fa(e,t){return function(e,t){return Yi(e.visibleWrites,t)}(e.writeTree,Sr(e.treePath,t))}function da(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=Ji(e.visibleWrites,t),l=Yi(u,gr());if(null!=l)s=l;else{if(null==n)return[];s=ea(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&c.length<i;)0!==h(d,r)&&c.push(d),d=f.getNext();return c}(e.writeTree,e.treePath,t,n,r,i,a)}function pa(e,t,n){return function(e,t,n,r){var i=Sr(t,n),a=Yi(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?ea(Ji(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function va(e,t){return ya(Sr(e.treePath,t),e.writeTree)}function ya(e,t){return{treePath:e,writeTree:t}}var ma=function(){function e(){re(this,e),this.changeMap=new Map}return ae(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;ge("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ge(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,ki(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,gi(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,mi(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ke("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,ki(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),ga=new(function(){function e(){re(this,e)}return ae(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),ka=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;re(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return ae(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Mi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pa(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Bi(this.viewCache_),i=da(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function wa(e,t,n,r,i){var a,o,s=new ma;if(n.type===Ii.OVERWRITE){var u=n;u.source.fromUser?a=xa(e,t,u.path,u.snap,r,i,s):(ge(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Tr(u.path),a=ba(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===Ii.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var l=Sr(n,r);Ea(t,kr(l))&&(s=xa(e,s,l,u,i,a,o))})),r.foreach((function(r,u){var l=Sr(n,r);Ea(t,kr(l))||(s=xa(e,s,l,u,i,a,o))})),s}(e,t,l.path,l.children,r,i,s):(ge(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=Ta(e,t,l.path,l.children,r,i,o,s))}else if(n.type===Ii.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,r,i,a){var o;if(null!=fa(r,n))return t;var s,u=new ka(r,t,i),l=t.eventCache.getNode();if(Tr(n)||".priority"===kr(n)){var c;if(t.serverCache.isFullyInitialized())c=la(r,Bi(t));else{var h=t.serverCache.getNode();ge(h instanceof li,"serverChildren would be complete if leaf node"),c=ca(r,h)}s=e.filter.updateFullNode(l,c,a)}else{var f=kr(n),d=pa(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=l.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(l,f,d,_r(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(l,f,li.EMPTY_NODE,_r(n),u,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=la(r,Bi(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=fa(r,gr()),ji(t,s,o,e.filter.filtersNodes())}(e,t,c.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=fa(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Tr(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return ba(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Tr(n)){var l=new Wi(null);return u.getNode().forEachChild(Vr,(function(e,t){l=l.set(new mr(e),t)})),Ta(e,t,n,l,i,a,s,o)}return t}var c=new Wi(null);return r.foreach((function(e,t){var r=Sr(n,e);u.isCompleteForPath(r)&&(c=c.set(e,u.getNode().getChild(r)))})),Ta(e,t,n,c,i,a,s,o)}(e,t,c.path,c.affectedTree,r,i,s)}else{if(n.type!==Ii.LISTEN_COMPLETE)throw ke("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Vi(t,a.getNode(),a.isFullyInitialized()||Tr(n),a.isFiltered());return _a(e,o,n,r,ga,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=zi(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(yi(zi(t)))}}(t,a,h),{viewCache:a,changes:h}}function _a(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=fa(r,n))return t;if(Tr(n))if(ge(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=Bi(t),c=ca(r,l instanceof li?l:li.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var h=la(r,Bi(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=kr(n);if(".priority"===f){ge(1===wr(n),"Can't have a priority with additional path components");var d=u.getNode(),p=ha(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=_r(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=ha(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=pa(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return ji(t,o,u.isFullyInitialized()||Tr(n),e.filter.filtersNodes())}function ba(e,t,n,r,i,a,o,s){var u,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(Tr(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{var f=kr(n);if(!l.isCompleteForPath(n)&&wr(n)>1)return t;var d=_r(n),p=l.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),f,p,d,ga,null)}var v=Vi(t,u,l.isFullyInitialized()||Tr(n),c.filtersNodes());return _a(e,v,n,i,new ka(i,v,a),s)}function xa(e,t,n,r,i,a,o){var s,u,l=t.eventCache,c=new ka(i,t,a);if(Tr(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=ji(t,u,!0,e.filter.filtersNodes());else{var h=kr(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=ji(t,u,l.isFullyInitialized(),l.isFiltered());else{var f,d=_r(n),p=l.getNode().getImmediateChild(h);if(Tr(d))f=r;else{var v=c.getCompleteChild(h);f=null!=v?".priority"===br(d)&&v.getChild(Er(d)).isEmpty()?v:v.updateChild(d,r):li.EMPTY_NODE}if(p.equals(f))s=t;else s=ji(t,e.filter.updateChild(l.getNode(),h,f,d,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Ea(e,t){return e.eventCache.isCompleteForChild(t)}function Sa(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ta(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=Tr(n)?r:new Wi(null).setTree(n,r);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(c.hasChild(n)){var u=Sa(0,t.serverCache.getNode().getImmediateChild(n),r);l=ba(e,l,new mr(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!c.hasChild(n)&&!u){var h=Sa(0,t.serverCache.getNode().getImmediateChild(n),r);l=ba(e,l,new mr(n),h,i,a,o,s)}})),l}var Ca;function Ia(e,t){var n=Bi(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Tr(t)&&!n.getImmediateChild(kr(t)).isEmpty())?n.getChild(t):null}function Na(e,t,n,r){t.type===Ii.MERGE&&null!==t.source.queryId&&(ge(Bi(e.viewCache_),"We should always have a full cache before handling merges"),ge(zi(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=wa(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,ge(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),ge(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),ge(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Ra(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Ra(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Fi(e,i,"child_removed",t,r,n),Fi(e,i,"child_added",t,r,n),Fi(e,i,"child_moved",a,r,n),Fi(e,i,"child_changed",t,r,n),Fi(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Aa;function Pa(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return ge(null!=a,"SyncTree gave us an op for an invalid query."),Na(a,t,n,r)}var o,s=[],u=ne(e.views.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s=s.concat(Na(l,t,n,r))}}catch(c){u.e(c)}finally{u.f()}return s}function Oa(e,t){var n,r=null,i=ne(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Ia(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var Da=ae((function e(t){re(this,e),this.listenProvider_=t,this.syncPointTree_=new Wi(null),this.pendingWriteTree_={visibleWrites:Hi.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function La(e,t,n,r,i){return function(e,t,n,r,i){ge(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ki(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Va(e,new Di({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Ma(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ra(e.pendingWriteTree_,t),i=ia(e.pendingWriteTree_,t);if(i){var a=new Wi(null);return null!=r.snap?a=a.set(gr(),!0):Un(r.children,(function(e){a=a.set(new mr(e),!0)})),Va(e,new Oi(r.path,a,n))}return[]}function Fa(e,t,n){return Va(e,new Di({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Ua(e,t,n,r){var i=qa(e,r);if(null!=i){var a=Wa(i),o=a.path,s=a.queryId,u=Cr(o,t);return Ha(e,o,new Di(Ai(s),u,n))}return[]}function ja(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Oa(n,Cr(e,t));if(r)return r}));return ua(r,t,i,n,!0)}function Va(e,t){return za(t,e.syncPointTree_,null,na(e.pendingWriteTree_,gr()))}function za(e,t,n,r){if(Tr(e.path))return Ba(e,t,n,r);var i=t.get(gr());null==n&&null!=i&&(n=Oa(i,gr()));var a=[],o=kr(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var l=n?n.getImmediateChild(o):null,c=va(r,o);a=a.concat(za(s,u,l,c))}return i&&(a=a.concat(Pa(i,e,r,n))),a}function Ba(e,t,n,r){var i=t.get(gr());null==n&&null!=i&&(n=Oa(i,gr()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=va(r,t),u=e.operationForChild(t);u&&(a=a.concat(Ba(u,i,o,s)))})),i&&(a=a.concat(Pa(i,e,r,n))),a}function qa(e,t){return e.tagToQueryMap.get(t)}function Wa(e){var t=e.indexOf("$");return ge(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new mr(e.substr(0,t))}}function Ha(e,t,n){var r=e.syncPointTree_.get(t);return ge(r,"Missing sync point for query tag that we're tracking"),Pa(r,n,na(e.pendingWriteTree_,t),null)}var Ka=function(){function e(t){re(this,e),this.node_=t}return ae(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Ga=function(){function e(t,n){re(this,e),this.syncTree_=t,this.path_=n}return ae(e,[{key:"getImmediateChild",value:function(t){var n=Sr(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return ja(this.syncTree_,this.path_)}}]),e}(),Qa=function(e,t,n){return e&&"object"===typeof e?(ge(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?$a(e[".sv"],t,n):"object"===typeof e[".sv"]?Ya(e[".sv"],t):void ge(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},$a=function(e,t,n){if("timestamp"===e)return n.timestamp;ge(!1,"Unexpected server value: "+e)},Ya=function(e,t,n){e.hasOwnProperty("increment")||ge(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&ge(!1,"Unexpected increment value: "+r);var i=t.node();if(ge(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Xa=function(e,t,n,r){return Za(t,new Ga(n,e),r)},Ja=function(e,t,n){return Za(e,new Ka(t),n)};function Za(e,t,n){var r,i=e.getPriority().val(),a=Qa(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Qa(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Zr(s,hi(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Zr(a))),u.forEachChild(ri,(function(e,i){var a=Za(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var eo=ae((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};re(this,e),this.name=t,this.parent=n,this.node=r}));function to(e,t){for(var n=t instanceof mr?t:new mr(t),r=e,i=kr(n);null!==i;){var a=Be(r.node.children,i)||{children:{},childCount:0};r=new eo(i,r,a),i=kr(n=_r(n))}return r}function no(e){return e.node.value}function ro(e,t){e.node.value=t,uo(e)}function io(e){return e.node.childCount>0}function ao(e,t){Un(e.node.children,(function(n,r){t(new eo(n,e,r))}))}function oo(e,t,n,r){n&&!r&&t(e),ao(e,(function(e){oo(e,t,!0,r)})),n&&r&&t(e)}function so(e){return new mr(null===e.parent?e.name:so(e.parent)+"/"+e.name)}function uo(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===no(e)&&!io(e)}(n),i=ze(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,uo(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,uo(e))}(e.parent,e.name,e)}var lo=/[\[\].#$\/\u0000-\u001F\u007F]/,co=/[\[\].#$\u0000-\u001F\u007F]/,ho=10485760,fo=function(e){return"string"===typeof e&&0!==e.length&&!lo.test(e)},po=function(e){return"string"===typeof e&&0!==e.length&&!co.test(e)},vo=function e(t,n,r){var i=r instanceof mr?new Rr(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Pr(i));if("function"===typeof n)throw new Error(t+"contains a function "+Pr(i)+" with contents = "+n.toString());if(Rn(n))throw new Error(t+"contains "+n.toString()+" "+Pr(i));if("string"===typeof n&&n.length>ho/3&&et(n)>ho)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Pr(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Un(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!fo(n)))throw new Error(t+" contains an invalid key ("+n+") "+Pr(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=et(t),Ar(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=et(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Pr(i)+" in addition to actual children.")}},yo=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!fo(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),po(e)}(n))throw new Error(Ze(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},mo=ae((function e(){re(this,e),this.eventLists_=[],this.recursionDepth_=0}));function go(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Ir(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function ko(e,t,n){go(e,n),wo(e,(function(e){return Nr(e,t)||Nr(t,e)}))}function wo(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(_o(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function _o(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();bn&&Sn("event: "+n.toString()),Wn(r)}}}var bo="repo_interrupt",xo=function(){function e(t,n,r,i){re(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Si(),this.transactionQueueTree_=new eo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return ae(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Eo(e,t,n){if(e.stats_=ir(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new xi(e.repoInfo_,(function(t,n,r,i){Co(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Io(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{je(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Lr(e.repoInfo_,t,(function(t,n,r,i){Co(e,t,n,r,i)}),(function(t){Io(e,t)}),(function(t){!function(e,t){Un(t,(function(t,n){No(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return rr[n]||(rr[n]=t()),rr[n]}(e.repoInfo_,(function(){return new Ri(e.stats_,e.server_)})),e.infoData_=new Ei,e.infoSyncTree_=new Da({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Fa(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),No(e,"connected",!1),e.serverSyncTree_=new Da({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);ko(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function So(e){var t=e.infoData_.getNode(new mr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function To(e){return(t=(t={timestamp:So(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Co(e,t,n,r,i){e.dataUpdateCount++;var a=new mr(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=We(n,(function(e){return hi(e)}));o=function(e,t,n,r){var i=qa(e,r);if(i){var a=Wa(i),o=a.path,s=a.queryId,u=Cr(o,t),l=Wi.fromObject(n);return Ha(e,o,new Li(Ai(s),u,l))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=hi(n);o=Ua(e.serverSyncTree_,a,u,i)}else if(r){var l=We(n,(function(e){return hi(e)}));o=function(e,t,n){var r=Wi.fromObject(n);return Va(e,new Li({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var c=hi(n);o=Fa(e.serverSyncTree_,a,c)}var h=a;o.length>0&&(h=Mo(e,a)),ko(e.eventQueue_,h,o)}function Io(e,t){No(e,"connected",t),!1===t&&function(e){Po(e,"onDisconnectEvents");var t=To(e),n=Si();Ci(e.onDisconnect_,gr(),(function(r,i){var a=Xa(r,i,e.serverSyncTree_,t);Ti(n,r,a)}));var r=[];Ci(n,gr(),(function(t,n){r=r.concat(Fa(e.serverSyncTree_,t,n));var i=zo(e,t);Mo(e,i)})),e.onDisconnect_=Si(),ko(e.eventQueue_,gr(),r)}(e)}function No(e,t,n){var r=new mr("/.info/"+t),i=hi(n);e.infoData_.updateSnapshot(r,i);var a=Fa(e.infoSyncTree_,r,i);ko(e.eventQueue_,r,a)}function Ro(e){return e.nextWriteId_++}function Ao(e){e.persistentConnection_&&e.persistentConnection_.interrupt(bo)}function Po(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Sn.apply(void 0,[t].concat(r))}function Oo(e,t,n){return ja(e.serverSyncTree_,t,n)||li.EMPTY_NODE}function Do(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Vo(e,t),no(t)){var n=Uo(e,t);ge(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Lo(e,so(t),n)}else io(t)&&ao(t,(function(t){Do(e,t)}))}function Lo(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Oo(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];ge(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=Cr(t,u.path);a=a.updateChild(l,u.currentOutputSnapshotRaw)}var c=a.val(!0),h=t;e.server_.put(h.toString(),c,(function(r){Po(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Ma(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Vo(e,to(e.transactionQueueTree_,t)),Do(e,e.transactionQueueTree_),ko(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)Wn(a[u])}else{if("datastale"===r)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{Nn("transaction at "+h.toString()+" failed: "+r);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=r}Mo(e,t)}}),o)}function Mo(e,t){var n=Fo(e,t),r=so(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],l=Cr(n,u.path),c=!1,h=void 0;if(ge(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)c=!0,h=u.abortReason,i=i.concat(Ma(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)c=!0,h="maxretry",i=i.concat(Ma(e.serverSyncTree_,u.currentWriteId,!0));else{var f=Oo(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){vo("transaction failed: Data returned ",d,u.path);var p=hi(d);"object"===typeof d&&null!=d&&ze(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=To(e),m=Ja(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=Ro(e),o.splice(o.indexOf(v),1),i=(i=i.concat(La(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(Ma(e.serverSyncTree_,v,!0))}else c=!0,h="nodata",i=i.concat(Ma(e.serverSyncTree_,u.currentWriteId,!0))}ko(e.eventQueue_,n,i),i=[],c&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);Vo(e,e.transactionQueueTree_);for(var l=0;l<r.length;l++)Wn(r[l]);Do(e,e.transactionQueueTree_)}(e,Uo(e,n),r),r}function Fo(e,t){var n,r=e.transactionQueueTree_;for(n=kr(t);null!==n&&void 0===no(r);)r=to(r,n),n=kr(t=_r(t));return r}function Uo(e,t){var n=[];return jo(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function jo(e,t,n){var r=no(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);ao(t,(function(t){jo(e,t,n)}))}function Vo(e,t){var n=no(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ro(t,n.length>0?n:void 0)}ao(t,(function(t){Vo(e,t)}))}function zo(e,t){var n=so(Fo(e,t)),r=to(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Bo(e,t)})),Bo(e,r),oo(r,(function(t){Bo(e,t)})),n}function Bo(e,t){var n=no(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(ge(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(ge(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ma(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?ro(t,void 0):n.length=a+1,ko(e.eventQueue_,so(t),i);for(var s=0;s<r.length;s++)Wn(r[s])}}var qo=function(e,t){var n=Wo(e),r=n.namespace;"firebase.com"===n.domain&&In(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||In("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Nn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Zn(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new mr(n.pathString)}},Wo=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(c,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=ne(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Nn("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var d=t.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Ho=function(){function e(t,n,r,i){re(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return ae(e,[{key:"key",get:function(){return Tr(this._path)?null:br(this._path)}},{key:"ref",get:function(){return new Ko(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=bi(this._queryParams),t=Mn(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return bi(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=tt(t))instanceof e))return!1;var n=this._repo===t._repo,r=Ir(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var Ko=function(e){ue(n,e);var t=fe(n);function n(e,r){return re(this,n),t.call(this,e,r,new wi,!1)}return ae(n,[{key:"parent",get:function(){var e=Er(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Ho);!function(e){ge(!Ca,"__referenceConstructor has already been defined"),Ca=e}(Ko),function(e){ge(!Aa,"__referenceConstructor has already been defined"),Aa=e}(Ko);var Go={},Qo=!1;function $o(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||In("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sn("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=qo(a,i),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"/twitter-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyChxZANunZ5GNHOAEbc5IAZ6iDBLlaFdrw",REACT_APP_AUTH_DOMAIN:"k-twitter-5c668.firebaseapp.com",REACT_APP_DATABASE_URL:"https://k-twitter-5c668.firebaseio.com",REACT_APP_PROJECT_ID:"k-twitter-5c668",REACT_APP_STORAGE_BUCKET:"k-twitter-5c668.appspot.com",REACT_APP_MESSAGIN_ID:"90818870249",REACT_APP_APP_ID:"1:90818870249:web:0da5980ea6523225d1e978"}.FIREBASE_DATABASE_EMULATOR_HOST),l?(o=!0,a="http://".concat(l,"?ns=").concat(u.namespace),u=(s=qo(a,i)).repoInfo):o=!s.repoInfo.secure;var c=i&&o?new Qn(Qn.OWNER):new Gn(e.name,e.options,t);yo("Invalid Firebase Database URL",s),Tr(s.path)||In("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Go[t.name];i||(i={},Go[t.name]=i);var a=i[e.toURLString()];a&&In("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new xo(e,Qo,n,r),i[e.toURLString()]=a,a}(u,e,c,new Kn(e.name,n));return new Yo(h,e)}var Yo=function(){function e(t,n){re(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return ae(e,[{key:"_repo",get:function(){return this._instanceStarted||(Eo(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Ko(this._repo,gr())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Go[t];n&&n[e.key]===e||In("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Ao(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&In("Cannot call "+e+" on a deleted database.")}}]),e}();Lr.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Lr.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};function Xo(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=le(e)););return e}function Jo(){return Jo="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Xo(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Jo.apply(this,arguments)}!function(e){!function(e){fn=e}(Kt),zt(new nt("database",(function(e,t){var n=t.instanceIdentifier;return $o(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Qt(cn,hn,e),Qt(cn,hn,"esm2017")}();function Zo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var es;Object.create;function ts(){return i({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ns=ts,rs=new Le("auth","Firebase",ts()),is=new dt("@firebase/auth");function as(e){if(is.logLevel<=ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];is.error.apply(is,["Auth (".concat(Kt,"): ").concat(e)].concat(n))}}function os(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw cs.apply(void 0,[e].concat(n))}function ss(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cs.apply(void 0,[e].concat(n))}function us(e,t,n){var r=Object.assign(Object.assign({},ns()),i({},t,n));return new Le("auth","Firebase",r).create(t,{appName:e.name})}function ls(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&os(e,"argument-error"),us(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function cs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=te(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(te(o)))}return rs.create.apply(rs,[e].concat(n))}function hs(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw cs.apply(void 0,[t].concat(r))}}function fs(e){var t="INTERNAL ASSERTION FAILED: "+e;throw as(t),new Error(t)}function ds(e,t){e||fs(t)}var ps=new Map;function vs(e){ds(e instanceof Function,"Expected a class definition");var t=ps.get(e);return t?(ds(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ps.set(e,t),t)}function ys(e,t){var n=Bt(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(He(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;os(r,"already-initialized")}return n.initialize({options:t})}function ms(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function gs(){return"http:"===ks()||"https:"===ks()}function ks(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ws=function(){function e(t,n){re(this,e),this.shortDelay=t,this.longDelay=n,ds(n>t,"Short delay should be less than long delay!"),this.isMobile=Ne()||Ae()}return ae(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(gs()||Re()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function _s(e,t){ds(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var bs=function(){function e(){re(this,e)}return ae(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),xs=(i(es={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),i(es,"MISSING_CUSTOM_TOKEN","internal-error"),i(es,"INVALID_IDENTIFIER","invalid-email"),i(es,"MISSING_CONTINUE_URI","internal-error"),i(es,"INVALID_PASSWORD","wrong-password"),i(es,"MISSING_PASSWORD","internal-error"),i(es,"EMAIL_EXISTS","email-already-in-use"),i(es,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),i(es,"INVALID_IDP_RESPONSE","invalid-credential"),i(es,"INVALID_PENDING_TOKEN","invalid-credential"),i(es,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),i(es,"MISSING_REQ_TYPE","internal-error"),i(es,"EMAIL_NOT_FOUND","user-not-found"),i(es,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),i(es,"EXPIRED_OOB_CODE","expired-action-code"),i(es,"INVALID_OOB_CODE","invalid-action-code"),i(es,"MISSING_OOB_CODE","internal-error"),i(es,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),i(es,"INVALID_ID_TOKEN","invalid-user-token"),i(es,"TOKEN_EXPIRED","user-token-expired"),i(es,"USER_NOT_FOUND","user-token-expired"),i(es,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),i(es,"INVALID_CODE","invalid-verification-code"),i(es,"INVALID_SESSION_INFO","invalid-verification-id"),i(es,"INVALID_TEMPORARY_PROOF","invalid-credential"),i(es,"MISSING_SESSION_INFO","missing-verification-id"),i(es,"SESSION_EXPIRED","code-expired"),i(es,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),i(es,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),i(es,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),i(es,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),i(es,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),i(es,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),i(es,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),i(es,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),i(es,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),i(es,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),i(es,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),es),Es=new ws(3e4,6e4);function Ss(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ts(e,t,n,r){return Cs.apply(this,arguments)}function Cs(){return Cs=ee(J().mark((function e(t,n,r,i){var a,o=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Is(t,a,ee(J().mark((function e(){var a,o,s,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Ge(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",bs.fetch()(Ps(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}function Is(e,t,n){return Ns.apply(this,arguments)}function Ns(){return(Ns=ee(J().mark((function e(t,n,r){var i,a,o,s,u,c,h,f,d,p;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},xs),n),e.prev=2,a=new Os(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Ds(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),h=l(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Ds(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Ds(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Ds(t,"user-disabled",s);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw us(t,p,d);case 34:os(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof De)){e.next=41;break}throw e.t0;case 41:os(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Rs(e,t,n,r){return As.apply(this,arguments)}function As(){return As=ee(J().mark((function e(t,n,r,i){var a,o,s=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Ts(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&os(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),As.apply(this,arguments)}function Ps(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?_s(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Os=function(){function e(t){var n=this;re(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ss(n.auth,"network-request-failed"))}),Es.get())}))}return ae(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ds(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ss(e,t,r);return i.customData._tokenResponse=n,i}function Ls(e,t){return Ms.apply(this,arguments)}function Ms(){return(Ms=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ts(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fs(e,t){return Us.apply(this,arguments)}function Us(){return(Us=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ts(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function js(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Vs(){return Vs=ee(J().mark((function e(t){var n,r,i,a,o,s,u=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=tt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,hs((a=Bs(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:js(zs(a.auth_time)),issuedAtTime:js(zs(a.iat)),expirationTime:js(zs(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}function zs(e){return 1e3*Number(e)}function Bs(e){var t,n=l(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return as("JWT malformed, contained fewer than 3 sections"),null;try{var o=Ee(i);return o?JSON.parse(o):(as("Failed to decode base64 JWT payload"),null)}catch(s){return as("Caught error parsing JWT payload as JSON",null===(t=s)||void 0===t?void 0:t.toString()),null}}function qs(e,t){return Ws.apply(this,arguments)}function Ws(){return Ws=ee(J().mark((function e(t,n){var r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof De&&Hs(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ws.apply(this,arguments)}function Hs(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ks=function(){function e(t){re(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ae(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ee(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Gs=function(){function e(t,n){re(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ae(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=js(this.lastLoginAt),this.creationTime=js(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Qs(e){return $s.apply(this,arguments)}function $s(){return $s=ee(J().mark((function e(t){var n,r,i,a,o,s,u,l,c,h,f;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,qs(t,Fs(r,{idToken:i}));case 6:hs(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Js(o.providerUserInfo):[],u=Xs(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!l&&c,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Gs(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Ys(){return(Ys=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=tt(t),e.next=3,Qs(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xs(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(te(n),te(t))}function Js(e){return e.map((function(e){var t=e.providerId,n=Zo(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Zs(e,t){return eu.apply(this,arguments)}function eu(){return(eu=ee(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Is(t,{},ee(J().mark((function e(){var r,i,a,o,s,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ge({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Ps(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",bs.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tu=function(){function e(){re(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ae(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){hs(e.idToken,"internal-error"),hs("undefined"!==typeof e.idToken,"internal-error"),hs("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Bs(e);return hs(t,"internal-error"),hs("undefined"!==typeof t.exp,"internal-error"),hs("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ee(J().mark((function e(t){var n,r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],hs(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ee(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zs(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return fs("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(hs("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(hs("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(hs("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function nu(e,t){hs("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ru=function(){function e(t){re(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Zo(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ks(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?te(a.providerData):[],this.metadata=new Gs(a.createdAt||void 0,a.lastLoginAt||void 0)}return ae(e,[{key:"getIdToken",value:function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qs(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(hs(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Vs.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ys.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(hs(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){hs(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ee(J().mark((function e(t){var n,r,i=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Qs(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,qs(this,Ls(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,l,c,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(l=n.createdAt)&&void 0!==l?l:void 0,g=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,k=n.uid,w=n.emailVerified,_=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;hs(k&&x,t,"internal-error");var E=tu.fromJSON(this.name,x);hs("string"===typeof k,t,"internal-error"),nu(h,t.name),nu(f,t.name),hs("boolean"===typeof w,t,"internal-error"),hs("boolean"===typeof _,t,"internal-error"),nu(d,t.name),nu(p,t.name),nu(v,t.name),nu(y,t.name),nu(m,t.name),nu(g,t.name);var S=new e({uid:k,auth:t,email:f,emailVerified:w,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(S.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=ee(J().mark((function t(n,r){var i,a,o,s=arguments;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new tu).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Qs(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),iu=function(){function e(){re(this,e),this.type="NONE",this.storage={}}return ae(e,[{key:"_isAvailable",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();iu.type="NONE";var au=iu;function ou(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var su=function(){function e(t,n,r){re(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ou(this.userKey,a.apiKey,o),this.fullPersistenceKey=ou("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ae(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ru._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ee(J().mark((function t(n,r){var i,a,o,s,u,l,c,h,f,d,p,v=arguments;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(vs(au),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||vs(au),s=ou(i,n.config.apiKey,n.name),u=null,l=ne(r),t.prev=10,l.s();case 12:if((c=l.n()).done){t.next=29;break}return h=c.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=ru._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function uu(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fu(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(lu(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pu(t))return"Blackberry";if(vu(t))return"Webos";if(cu(t))return"Safari";if((t.includes("chrome/")||hu(t))&&!t.includes("edge/"))return"Chrome";if(du(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/firefox\//i.test(e)}function cu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/crios\//i.test(e)}function fu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iemobile/i.test(e)}function du(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/android/i.test(e)}function pu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/blackberry/i.test(e)}function vu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/webos/i.test(e)}function yu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iphone|ipad|ipod/i.test(e)}function mu(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return yu(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function gu(){return Pe()&&10===document.documentMode}function ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return yu(e)||du(e)||vu(e)||pu(e)||/windows phone/i.test(e)||fu(e)}function wu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=uu(Ie());break;case"Worker":t="".concat(uu(Ie()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Kt,"/").concat(r)}var _u=function(){function e(t){re(this,e),this.auth=t,this.queue=[]}return ae(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ee(J().mark((function e(t){var n,r,i,a,o,s,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=ne(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),s=ne(r);try{for(s.s();!(u=s.n()).done;){l=u.value;try{l()}catch(c){}}}catch(h){s.e(h)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),bu=function(){function e(t,n,r){re(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eu(this),this.idTokenSubscription=new Eu(this),this.beforeStateQueue=new _u(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rs,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ae(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=vs(t)),this._initializationPromise=this.queue(ee(J().mark((function r(){var i,a;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,su.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ee(J().mark((function e(t){var n,r,i,a,o,s,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return hs(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qs(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?tt(t):null)&&hs(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ee(J().mark((function e(t){var n,r=this,i=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&hs(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ee(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(vs(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Le("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ee(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return hs(n=t&&vs(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,su.create(this,[vs(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ee(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ee(J().mark((function e(t){var n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return hs(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return hs(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wu(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ee(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xu(e){return tt(e)}var Eu=function(){function e(t){var n=this;re(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new Xe(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return ae(e,[{key:"next",get:function(){return hs(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();var Su=function(){function e(t,n){re(this,e),this.providerId=t,this.signInMethod=n}return ae(e,[{key:"toJSON",value:function(){return fs("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return fs("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return fs("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return fs("not implemented")}}]),e}();function Tu(e,t){return Cu.apply(this,arguments)}function Cu(){return(Cu=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ts(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iu(e,t){return Nu.apply(this,arguments)}function Nu(){return(Nu=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rs(t,"POST","/v1/accounts:signInWithPassword",Ss(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ru(e,t){return Au.apply(this,arguments)}function Au(){return(Au=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rs(t,"POST","/v1/accounts:signInWithEmailLink",Ss(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pu(e,t){return Ou.apply(this,arguments)}function Ou(){return(Ou=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rs(t,"POST","/v1/accounts:signInWithEmailLink",Ss(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Du=function(e){ue(n,e);var t=fe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return re(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ae(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Iu(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ru(t,{email:this._email,oobCode:this._password}));case 5:os(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Tu(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Pu(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:os(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Su);function Lu(e,t){return Mu.apply(this,arguments)}function Mu(){return(Mu=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rs(t,"POST","/v1/accounts:signInWithIdp",Ss(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fu=function(e){ue(n,e);var t=fe(n);function n(){var e;return re(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ae(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Lu(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Lu(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Lu(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ge(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):os("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Zo(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Su);function Uu(e,t){return ju.apply(this,arguments)}function ju(){return(ju=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ts(t,"POST","/v1/accounts:sendVerificationCode",Ss(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vu(){return(Vu=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",Ss(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zu(){return(zu=ee(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",Ss(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ds(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bu=i({},"USER_NOT_FOUND","user-not-found");function qu(){return(qu=ee(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",Ss(t,r),Bu));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wu=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ae(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Vu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return zu.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return qu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Su);var Hu=function(){function e(t){var n,r,i,a,o,s;re(this,e);var u=Qe($e(t)),l=null!==(n=u.apiKey)&&void 0!==n?n:null,c=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);hs(l&&c&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=c,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return ae(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Qe($e(e)).link,n=t?Qe($e(t)).deep_link_id:null,r=Qe($e(e)).deep_link_id;return(r?Qe($e(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(gb){return null}}}]),e}();var Ku=function(){function e(){re(this,e),this.providerId=e.PROVIDER_ID}return ae(e,null,[{key:"credential",value:function(e,t){return Du._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Hu.parseLink(t);return hs(n,"argument-error"),Du._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ku.PROVIDER_ID="password",Ku.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ku.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Gu=function(){function e(t){re(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ae(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Qu=function(e){ue(n,e);var t=fe(n);function n(){var e;return re(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ae(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return te(this.scopes)}}]),n}(Gu),$u=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.call(this,"facebook.com")}return ae(n,null,[{key:"credential",value:function(e){return Fu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(gb){return null}}}]),n}(Qu);$u.FACEBOOK_SIGN_IN_METHOD="facebook.com",$u.PROVIDER_ID="facebook.com";var Yu=function(e){ue(n,e);var t=fe(n);function n(){var e;return re(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ae(n,null,[{key:"credential",value:function(e,t){return Fu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(gb){return null}}}]),n}(Qu);Yu.GOOGLE_SIGN_IN_METHOD="google.com",Yu.PROVIDER_ID="google.com";var Xu=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.call(this,"github.com")}return ae(n,null,[{key:"credential",value:function(e){return Fu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(gb){return null}}}]),n}(Qu);Xu.GITHUB_SIGN_IN_METHOD="github.com",Xu.PROVIDER_ID="github.com";var Ju=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.call(this,"twitter.com")}return ae(n,null,[{key:"credential",value:function(e,t){return Fu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(gb){return null}}}]),n}(Qu);function Zu(e,t){return el.apply(this,arguments)}function el(){return(el=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rs(t,"POST","/v1/accounts:signUp",Ss(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ju.TWITTER_SIGN_IN_METHOD="twitter.com",Ju.PROVIDER_ID="twitter.com";var tl=function(){function e(t){re(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ae(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ee(J().mark((function t(n,r,i){var a,o,s,u,l=arguments;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,ru._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=nl(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ee(J().mark((function t(n,r,i){var a;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=nl(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function nl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var rl=function(e){ue(n,e);var t=fe(n);function n(e,r,i,a){var o,s;return re(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(oe(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ae(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(De);function il(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw rl._fromErrorAndOperation(e,n,t,r);throw n}))}function al(e,t){return ol.apply(this,arguments)}function ol(){return ol=ee(J().mark((function e(t,n){var r,i,a=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=qs,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",tl._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ol.apply(this,arguments)}function sl(e,t){return ul.apply(this,arguments)}function ul(){return ul=ee(J().mark((function e(t,n){var r,i,a,o,s,u,l,c=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,qs(t,il(a,o,n,t),r);case 6:return hs((s=e.sent).idToken,a,"internal-error"),hs(u=Bs(s.idToken),a,"internal-error"),l=u.sub,hs(t.uid===l,a,"user-mismatch"),e.abrupt("return",tl._forOperation(t,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&os(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ul.apply(this,arguments)}function ll(e,t){return cl.apply(this,arguments)}function cl(){return cl=ee(J().mark((function e(t,n){var r,i,a,o,s=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,il(t,i,n);case 4:return a=e.sent,e.next=7,tl._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),cl.apply(this,arguments)}function hl(e,t){return fl.apply(this,arguments)}function fl(){return(fl=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ll(xu(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dl(e,t,n){return pl.apply(this,arguments)}function pl(){return(pl=ee(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xu(t),e.next=3,Zu(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,tl._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vl(e,t,n){return hl(tt(e),Ku.credential(t,n))}function yl(e,t){return ml.apply(this,arguments)}function ml(){return(ml=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ts(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gl(e,t){return kl.apply(this,arguments)}function kl(){return(kl=ee(J().mark((function e(t,n){var r,i,a,o,s,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=tt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,qs(a,yl(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(l=a.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wl(e,t){return Ts(e,"POST","/v2/accounts/mfaEnrollment:start",Ss(e,t))}new WeakMap;var _l="__sak",bl=function(){function e(t,n){re(this,e),this.storageRetriever=t,this.type=n}return ae(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(_l,"1"),this.storage.removeItem(_l),Promise.resolve(!0)):Promise.resolve(!1)}catch(gb){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var xl=function(e){ue(n,e);var t=fe(n);function n(){var e;return re(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ie();return cu(e)||yu(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ku(),e._shouldAllowMigration=!0,e}return ae(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);gu()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ee(J().mark((function e(t,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jo(le(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ee(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jo(le(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jo(le(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(bl);xl.type="LOCAL";var El=xl,Sl=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ae(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(bl);Sl.type="SESSION";var Tl=Sl;function Cl(e){return Promise.all(e.map(function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Il=function(){function e(t){re(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ae(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ee(J().mark((function e(t){var n,r,i,a,o,s,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Cl(u);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Nl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Il.receivers=[];var Rl=function(){function e(t){re(this,e),this.target=t,this.handlers=new Set}return ae(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ee(J().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var l=Nl("",20);i.port1.start();var c=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===l)switch(n.data.status){case"ack":clearTimeout(c),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Al(){return window}function Pl(){return"undefined"!==typeof Al().WorkerGlobalScope&&"function"===typeof Al().importScripts}function Ol(){return Dl.apply(this,arguments)}function Dl(){return(Dl=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ll(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ml="firebaseLocalStorageDb",Fl="firebaseLocalStorage",Ul="fbase_key",jl=function(){function e(t){re(this,e),this.request=t}return ae(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Vl(e,t){return e.transaction([Fl],t?"readwrite":"readonly").objectStore(Fl)}function zl(){var e=indexedDB.deleteDatabase(Ml);return new jl(e).toPromise()}function Bl(){var e=indexedDB.open(Ml,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Fl,{keyPath:Ul})}catch(r){n(r)}})),e.addEventListener("success",ee(J().mark((function n(){var r;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Fl)){n.next=12;break}return r.close(),n.next=5,zl();case 5:return n.t0=t,n.next=8,Bl();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ql(e,t,n){return Wl.apply(this,arguments)}function Wl(){return Wl=ee(J().mark((function e(t,n,r){var a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Vl(t,!0).put((i(a={},Ul,n),i(a,"value",r),a)),e.abrupt("return",new jl(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Wl.apply(this,arguments)}function Hl(e,t){return Kl.apply(this,arguments)}function Kl(){return Kl=ee(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vl(t,!1).get(n),e.next=3,new jl(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Kl.apply(this,arguments)}function Gl(e,t){var n=Vl(e,!0).delete(t);return new jl(n).toPromise()}var Ql=function(){function e(){re(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ae(e,[{key:"_openDb",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Bl();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ee(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pl()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ee(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Il._getInstance(Pl()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ee(J().mark((function e(n,r){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ee(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ol();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Rl(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ll()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Bl();case 5:return t=e.sent,e.next=8,ql(t,_l,"1");case 8:return e.next=10,Gl(t,_l);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ee(J().mark((function e(t,n){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ql(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Hl(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ee(J().mark((function e(t){var n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Gl(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ee(J().mark((function e(){var t,n,r,i,a,o,s,u,l,c,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Vl(e,!1).getAll();return new jl(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ne(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(l=0,c=Object.keys(this.localCache);l<c.length;l++)h=c[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ee(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ql.type="LOCAL";var $l=Ql;function Yl(e,t){return Ts(e,"POST","/v2/accounts/mfaSignIn:start",Ss(e,t))}function Xl(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ss("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Jl(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}Jl("rcb"),new ws(3e4,6e4);var Zl="recaptcha";function ec(e,t,n){return tc.apply(this,arguments)}function tc(){return tc=ee(J().mark((function e(t,n,r){var i,a,o,s,u,l,c,h,f;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,hs("string"===typeof a,t,"argument-error"),hs(r.type===Zl,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return hs("enroll"===s.type,t,"internal-error"),e.next=13,wl(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return hs("signin"===s.type,t,"internal-error"),hs(l=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Yl(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return c=e.sent,e.abrupt("return",c.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Uu(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),tc.apply(this,arguments)}var nc=function(){function e(t){re(this,e),this.providerId=e.PROVIDER_ID,this.auth=xu(t)}return ae(e,[{key:"verifyPhoneNumber",value:function(e,t){return ec(this.auth,e,tt(t))}}],[{key:"credential",value:function(e,t){return Wu._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Wu._fromTokenResponse(n,r):null}}]),e}();function rc(e,t){return t?vs(t):(hs(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}nc.PROVIDER_ID="phone",nc.PHONE_SIGN_IN_METHOD="phone";var ic=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ae(n,[{key:"_getIdTokenResponse",value:function(e){return Lu(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Lu(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Lu(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Su);function ac(e){return ll(e.auth,new ic(e),e.bypassAuthState)}function oc(e){var t=e.auth,n=e.user;return hs(n,t,"internal-error"),sl(n,new ic(e),e.bypassAuthState)}function sc(e){return uc.apply(this,arguments)}function uc(){return(uc=ee(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,hs(r=t.user,n,"internal-error"),e.abrupt("return",al(r,new ic(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];re(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ae(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ee(J().mark((function t(n,r){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ee(J().mark((function e(t){var n,r,i,a,o,s,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ac;case"linkViaPopup":case"linkViaRedirect":return sc;case"reauthViaPopup":case"reauthViaRedirect":return oc;default:os(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),cc=new ws(2e3,1e4);function hc(e,t,n){return fc.apply(this,arguments)}function fc(){return(fc=ee(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xu(t),ls(t,n,Gu),a=rc(i,r),o=new dc(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dc=function(e){ue(n,e);var t=fe(n);function n(e,r,i,a,o){var s;return re(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=oe(s),s}return ae(n,[{key:"executeNotNull",value:function(){var e=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return hs(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ee(J().mark((function e(){var t,n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ds(1===this.filter.length,"Popup operations only handle one event"),t=Nl(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ss(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ss(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ss(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,cc.get())}()}}]),n}(lc);dc.currentPopupAction=null;var pc=new Map,vc=function(e){ue(n,e);var t=fe(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return re(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ae(n,[{key:"execute",value:function(){var e=ee(J().mark((function e(){var t,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,yc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Jo(le(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:pc.set(this.auth._key(),t);case 21:return this.bypassAuthState||pc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ee(J().mark((function e(t){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Jo(le(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Jo(le(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(lc);function yc(e,t){return mc.apply(this,arguments)}function mc(){return(mc=ee(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wc(n),i=kc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gc(e,t){pc.set(e._key(),t)}function kc(e){return vs(e._redirectPersistence)}function wc(e){return ou("pendingRedirect",e.config.apiKey,e.name)}function _c(e,t){return bc.apply(this,arguments)}function bc(){return bc=ee(J().mark((function e(t,n){var r,i,a,o,s,u=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=xu(t),a=rc(i,n),o=new vc(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}var xc=function(){function e(t){re(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ae(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Sc(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ss(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ec(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ec(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ec(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Sc(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Tc(e){return Cc.apply(this,arguments)}function Cc(){return Cc=ee(J().mark((function e(t){var n,r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ts(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Cc.apply(this,arguments)}var Ic=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nc=/^https?/;function Rc(){return(Rc=ee(J().mark((function e(t){var n,r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Tc(t);case 4:n=e.sent,r=n.authorizedDomains,i=ne(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ac(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:os(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Ac(e){var t=ms(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Nc.test(r))return!1;if(Ic.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Pc=new ws(3e4,6e4);function Oc(){var e=Al().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=te(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Dc=null;function Lc(e){return Dc=Dc||function(e){return new Promise((function(t,n){var r,i,a;function o(){Oc(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Oc(),n(ss(e,"network-request-failed"))},timeout:Pc.get()})}if(null===(i=null===(r=Al().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Al().gapi)||void 0===a?void 0:a.load)){var s=Jl("iframefcb");return Al()[s]=function(){gapi.load?o():n(ss(e,"network-request-failed"))},Xl("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Dc=null,e}))}(e),Dc}var Mc=new ws(5e3,15e3),Fc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jc(e){var t=e.config;hs(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?_s(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Kt},i=Uc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ge(r).slice(1))}function Vc(e){return zc.apply(this,arguments)}function zc(){return zc=ee(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lc(t);case 2:return n=e.sent,hs(r=Al().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:jc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fc,dontclear:!0},(function(e){return new Promise(function(){var n=ee(J().mark((function n(r,i){var a,o,s;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Al().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ss(t,"network-request-failed"),o=Al().setTimeout((function(){i(a)}),Mc.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),zc.apply(this,arguments)}var Bc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qc="_blank",Wc="http://localhost",Hc=function(){function e(t){re(this,e),this.window=t,this.associatedEvent=null}return ae(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Kc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Bc),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Ie().toLowerCase();n&&(s=hu(c)?qc:n),lu(c)&&(t=t||Wc,u.scrollbars="yes");var h=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(mu(c)&&"_self"!==s)return Gc(t||"",s),new Hc(null);var f=window.open(t||"",s,h);hs(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Hc(f)}function Gc(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Qc="__/auth/handler",$c="emulator/auth/handler";function Yc(e,t,n,r,i,a){hs(e.config.authDomain,e,"auth-domain-config-required"),hs(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Kt,eventId:i};if(t instanceof Gu){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",qe(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=l(u[s],2),h=c[0],f=c[1];o[h]=f}}if(t instanceof Qu){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Qc);return _s(t,$c)}(e),"?").concat(Ge(p).slice(1))}var Xc="webStorageSupport",Jc=function(){function e(){re(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tl,this._completeRedirectFn=_c,this._overrideRedirectResult=gc}return ae(e,[{key:"_openPopup",value:function(){var e=ee(J().mark((function e(t,n,r,i){var a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ds(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Yc(t,n,r,ms(),i),e.abrupt("return",Kc(t,o,Nl()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ee(J().mark((function e(t,n,r,i){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Yc(t,n,r,ms(),i),Al().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ds(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ee(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc(t);case 2:return n=e.sent,r=new xc(t),n.register("authEvent",(function(e){return hs(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Xc,{type:Xc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),os(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Rc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ku()||cu()||yu()}}]),e}(),Zc=Jc,eh=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this,"phone")).credential=e,r}return ae(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ts(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ss(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ts(e,"POST","/v2/accounts/mfaSignIn:finalize",Ss(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){re(this,e),this.factorId=t}return ae(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return fs("unexpected MultiFactorSessionType")}}}]),e}());(function(){function e(){re(this,e)}return ae(e,null,[{key:"assertion",value:function(e){return eh._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var th,nh="@firebase/auth",rh="0.20.4",ih=function(){function e(t){re(this,e),this.auth=t,this.internalListeners=new Map}return ae(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){hs(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();th="Browser",zt(new nt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){hs(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),hs(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:th,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wu(th)},i=new bu(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vs);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),zt(new nt("auth-internal",(function(e){return function(e){return new ih(e)}(xu(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Qt(nh,rh,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(th)),Qt(nh,rh,"esm2017");var ah,oh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},sh={},uh=uh||{},lh=oh||self;function ch(){}function hh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function fh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var dh="closure_uid_"+(1e9*Math.random()>>>0),ph=0;function vh(e,t,n){return e.call.apply(e.bind,arguments)}function yh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function mh(e,t,n){return(mh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vh:yh).apply(null,arguments)}function gh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function kh(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function wh(){this.s=this.s,this.o=this.o}var _h={};wh.prototype.s=!1,wh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,dh)&&e[dh]||(e[dh]=++ph)}(this);delete _h[e]}},wh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var bh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},xh=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Eh(e){return Array.prototype.concat.apply([],arguments)}function Sh(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Th(e){return/^[\s\xa0]*$/.test(e)}var Ch,Ih=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Nh(e,t){return-1!=e.indexOf(t)}function Rh(e,t){return e<t?-1:e>t?1:0}e:{var Ah=lh.navigator;if(Ah){var Ph=Ah.userAgent;if(Ph){Ch=Ph;break e}}Ch=""}function Oh(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Dh(e){var t={};for(var n in e)t[n]=e[n];return t}var Lh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mh(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Lh.length;a++)n=Lh[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Fh(e){return Fh[" "](e),e}Fh[" "]=ch;var Uh,jh=Nh(Ch,"Opera"),Vh=Nh(Ch,"Trident")||Nh(Ch,"MSIE"),zh=Nh(Ch,"Edge"),Bh=zh||Vh,qh=Nh(Ch,"Gecko")&&!(Nh(Ch.toLowerCase(),"webkit")&&!Nh(Ch,"Edge"))&&!(Nh(Ch,"Trident")||Nh(Ch,"MSIE"))&&!Nh(Ch,"Edge"),Wh=Nh(Ch.toLowerCase(),"webkit")&&!Nh(Ch,"Edge");function Hh(){var e=lh.document;return e?e.documentMode:void 0}e:{var Kh="",Gh=function(){var e=Ch;return qh?/rv:([^\);]+)(\)|;)/.exec(e):zh?/Edge\/([\d\.]+)/.exec(e):Vh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Wh?/WebKit\/(\S+)/.exec(e):jh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Gh&&(Kh=Gh?Gh[1]:""),Vh){var Qh=Hh();if(null!=Qh&&Qh>parseFloat(Kh)){Uh=String(Qh);break e}}Uh=Kh}var $h,Yh={};function Xh(){return function(e){var t=Yh;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Ih(String(Uh)).split("."),n=Ih("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Rh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Rh(0==a[2].length,0==o[2].length)||Rh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(lh.document&&Vh){var Jh=Hh();$h=Jh||(parseInt(Uh,10)||void 0)}else $h=void 0;var Zh=$h,ef=function(){if(!lh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{lh.addEventListener("test",ch,t),lh.removeEventListener("test",ch,t)}catch(n){}return e}();function tf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function nf(e,t){if(tf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(qh){e:{try{Fh(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:rf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&nf.Z.h.call(this)}}tf.prototype.h=function(){this.defaultPrevented=!0},kh(nf,tf);var rf={2:"touch",3:"pen",4:"mouse"};nf.prototype.h=function(){nf.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var af="closure_listenable_"+(1e6*Math.random()|0),of=0;function sf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++of,this.ca=this.fa=!1}function uf(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function lf(e){this.src=e,this.g={},this.h=0}function cf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=bh(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(uf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function hf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}lf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=hf(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new sf(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ff="closure_lm_"+(1e6*Math.random()|0),df={};function pf(e,t,n,r,i){if(r&&r.once)return yf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)pf(e,t[a],n,r,i);return null}return n=xf(n),e&&e[af]?e.N(t,n,fh(r)?!!r.capture:!!r,i):vf(e,t,n,!1,r,i)}function vf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=fh(i)?!!i.capture:!!i,s=_f(e);if(s||(e[ff]=s=new lf(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=wf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ef||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(kf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function yf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)yf(e,t[a],n,r,i);return null}return n=xf(n),e&&e[af]?e.O(t,n,fh(r)?!!r.capture:!!r,i):vf(e,t,n,!0,r,i)}function mf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)mf(e,t[a],n,r,i);else r=fh(r)?!!r.capture:!!r,n=xf(n),e&&e[af]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=hf(a=e.g[t],n,r,i))&&(uf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=_f(e))&&(t=e.g[t.toString()],e=-1,t&&(e=hf(t,n,r,i)),(n=-1<e?t[e]:null)&&gf(n))}function gf(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[af])cf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(kf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_f(t))?(cf(n,e),0==n.h&&(n.src=null,t[ff]=null)):uf(e)}}}function kf(e){return e in df?df[e]:df[e]="on"+e}function wf(e,t){if(e.ca)e=!0;else{t=new nf(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&gf(e),e=n.call(r,t)}return e}function _f(e){return(e=e[ff])instanceof lf?e:null}var bf="__closure_events_fn_"+(1e9*Math.random()>>>0);function xf(e){return"function"===typeof e?e:(e[bf]||(e[bf]=function(t){return e.handleEvent(t)}),e[bf])}function Ef(){wh.call(this),this.i=new lf(this),this.P=this,this.I=null}function Sf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new tf(t,e);else if(t instanceof tf)t.target=t.target||e;else{var i=t;Mh(t=new tf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Tf(o,r,!0,t)&&i}if(i=Tf(o=t.g=e,r,!0,t)&&i,i=Tf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Tf(o=t.g=n[a],r,!1,t)&&i}function Tf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&cf(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}kh(Ef,wh),Ef.prototype[af]=!0,Ef.prototype.removeEventListener=function(e,t,n,r){mf(this,e,t,n,r)},Ef.prototype.M=function(){if(Ef.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)uf(n[r]);delete t.g[e],t.h--}}this.I=null},Ef.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ef.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Cf=lh.JSON.stringify;function If(){var e=Mf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Nf,Rf=function(){function e(){re(this,e),this.h=this.g=null}return ae(e,[{key:"add",value:function(e,t){var n=Af.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Af=new(function(){function e(t,n){re(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ae(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Pf}),(function(e){return e.reset()})),Pf=function(){function e(){re(this,e),this.next=this.g=this.h=null}return ae(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Of(e){lh.setTimeout((function(){throw e}),0)}function Df(e,t){Nf||function(){var e=lh.Promise.resolve(void 0);Nf=function(){e.then(Ff)}}(),Lf||(Nf(),Lf=!0),Mf.add(e,t)}var Lf=!1,Mf=new Rf;function Ff(){for(var e;e=If();){try{e.h.call(e.g)}catch(n){Of(n)}var t=Af;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Lf=!1}function Uf(e,t){Ef.call(this),this.h=e||1,this.g=t||lh,this.j=mh(this.kb,this),this.l=Date.now()}function jf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Vf(e,t,n){if("function"===typeof e)n&&(e=mh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=mh(e.handleEvent,e)}return 2147483647<Number(t)?-1:lh.setTimeout(e,t||0)}function zf(e){e.g=Vf((function(){e.g=null,e.i&&(e.i=!1,zf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}kh(Uf,Ef),(ah=Uf.prototype).da=!1,ah.S=null,ah.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Sf(this,"tick"),this.da&&(jf(this),this.start()))}},ah.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ah.M=function(){Uf.Z.M.call(this),jf(this),delete this.g};var Bf=function(e){ue(n,e);var t=fe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ae(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:zf(this)}},{key:"M",value:function(){Jo(le(n.prototype),"M",this).call(this),this.g&&(lh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(wh);function qf(e){wh.call(this),this.h=e,this.g={}}kh(qf,wh);var Wf=[];function Hf(e,t,n,r){Array.isArray(n)||(n&&(Wf[0]=n.toString()),n=Wf);for(var i=0;i<n.length;i++){var a=pf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Kf(e){Oh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&gf(e)}),e),e.g={}}function Gf(){this.g=!0}function Qf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Cf(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}qf.prototype.M=function(){qf.Z.M.call(this),Kf(this)},qf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gf.prototype.Aa=function(){this.g=!1},Gf.prototype.info=function(){};var $f={},Yf=null;function Xf(){return Yf=Yf||new Ef}function Jf(e){tf.call(this,$f.Ma,e)}function Zf(e){var t=Xf();Sf(t,new Jf(t,e))}function ed(e,t){tf.call(this,$f.STAT_EVENT,e),this.stat=t}function td(e){var t=Xf();Sf(t,new ed(t,e))}function nd(e,t){tf.call(this,$f.Na,e),this.size=t}function rd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return lh.setTimeout((function(){e()}),t)}$f.Ma="serverreachability",kh(Jf,tf),$f.STAT_EVENT="statevent",kh(ed,tf),$f.Na="timingevent",kh(nd,tf);var id={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ad={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function od(){}function sd(e){return e.h||(e.h=e.i())}function ud(){}od.prototype.h=null;var ld,cd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hd(){tf.call(this,"d")}function fd(){tf.call(this,"c")}function dd(){}function pd(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new qf(this),this.P=yd,e=Bh?125:void 0,this.W=new Uf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new vd}function vd(){this.i=null,this.g="",this.h=!1}kh(hd,tf),kh(fd,tf),kh(dd,od),dd.prototype.g=function(){return new XMLHttpRequest},dd.prototype.i=function(){return{}},ld=new dd;var yd=45e3,md={},gd={};function kd(e,t,n){e.K=1,e.v=Bd(Md(t)),e.s=n,e.U=!0,wd(e,null)}function wd(e,t){e.F=Date.now(),Ed(e),e.A=Md(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),tp(n.h,"t",r),e.C=0,n=e.l.H,e.h=new vd,e.g=rv(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Bf(mh(e.Ia,e,e.g),e.O)),Hf(e.V,e.g,"readystatechange",e.gb),t=e.H?Dh(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Zf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function _d(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function bd(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=xd(e,n))==gd){4==t&&(e.o=4,td(14),i=!1),Qf(e.j,e.m,null,"[Incomplete Response]");break}if(r==md){e.o=4,td(15),Qf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Qf(e.j,e.m,r,null),Nd(e,r)}_d(e)&&r!=gd&&r!=md&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,td(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),$p(t),t.L=!0,td(11))):(Qf(e.j,e.m,n,"[Invalid Chunked Response]"),Id(e),Cd(e))}function xd(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?gd:(n=Number(t.substring(n,r)),isNaN(n)?md:(r+=1)+n>t.length?gd:(t=t.substr(r,n),e.C=r+n,t))}function Ed(e){e.Y=Date.now()+e.P,Sd(e,e.P)}function Sd(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=rd(mh(e.eb,e),t)}function Td(e){e.B&&(lh.clearTimeout(e.B),e.B=null)}function Cd(e){0==e.l.G||e.I||Jp(e.l,e)}function Id(e){Td(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,jf(e.W),Kf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Nd(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||lp(n.i,e)))if(n.I=e.N,!e.J&&lp(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Xp(n),Vp(n)}Qp(n),td(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=rd(mh(n.ab,n),6e3));if(1>=up(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else ev(n,11)}else if((e.J||n.g==e)&&Xp(n),!Th(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=r.i;!h.g&&(Nh(c,"spdy")||Nh(c,"quic")||Nh(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(cp(h,h.h),h.h=null))}if(r.D){var f=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,zd(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=nv(r,r.H?r.la:null,r.W),d.J){hp(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Td(p),Ed(p)),r.g=d}else Gp(r);0<n.l.length&&qp(n)}else"stop"!=a[0]&&"close"!=a[0]||ev(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ev(n,7):jp(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Zf(4)}catch(a){}}function Rd(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(hh(e)||"string"===typeof e)xh(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(hh(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(hh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Ad(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ad)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Pd(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Od(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Od(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Od(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ah=pd.prototype).setTimeout=function(e){this.P=e},ah.gb=function(e){e=e.target;var t=this.L;t&&3==Dp(e)?t.l():this.Ia(e)},ah.Ia=function(e){try{if(e==this.g)e:{var t=Dp(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Bh||this.g&&(this.h.h||this.g.ga()||Lp(this.g)))){this.I||4!=t||7==n||Zf(8==n||0>=r?3:2),Td(this);var i=this.g.ba();this.N=i;t:if(_d(this)){var a=Lp(this.g);e="";var o=a.length,s=4==Dp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Id(this),Cd(this);var u="";break t}this.h.i=new lh.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Th(l)){var h=l;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,td(12),Id(this),Cd(this);break e}Qf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Nd(this,i)}this.U?(bd(this,t,u),Bh&&this.i&&3==t&&(Hf(this.V,this.W,"tick",this.fb),this.W.start())):(Qf(this.j,this.m,u,null),Nd(this,u)),4==t&&Id(this),this.i&&!this.I&&(4==t?Jp(this.l,this):(this.i=!1,Ed(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,td(12)):(this.o=0,td(13)),Id(this),Cd(this)}}}catch(t){}},ah.fb=function(){if(this.g){var e=Dp(this.g),t=this.g.ga();this.C<t.length&&(Td(this),bd(this,e,t),this.i&&4!=e&&Ed(this))}},ah.cancel=function(){this.I=!0,Id(this)},ah.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Zf(3),td(17)),Id(this),this.o=2,Cd(this)):Sd(this,this.Y-e)},(ah=Ad.prototype).R=function(){Pd(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},ah.T=function(){return Pd(this),this.g.concat()},ah.get=function(e,t){return Od(this.h,e)?this.h[e]:t},ah.set=function(e,t){Od(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},ah.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Dd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ld(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ld){this.g=void 0!==t?t:e.g,Fd(this,e.j),this.s=e.s,Ud(this,e.i),jd(this,e.m),this.l=e.l,t=e.h;var n=new Xd;n.i=t.i,t.g&&(n.g=new Ad(t.g),n.h=t.h),Vd(this,n),this.o=e.o}else e&&(n=String(e).match(Dd))?(this.g=!!t,Fd(this,n[1]||"",!0),this.s=qd(n[2]||""),Ud(this,n[3]||"",!0),jd(this,n[4]),this.l=qd(n[5]||"",!0),Vd(this,n[6]||"",!0),this.o=qd(n[7]||"")):(this.g=!!t,this.h=new Xd(null,this.g))}function Md(e){return new Ld(e)}function Fd(e,t,n){e.j=n?qd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ud(e,t,n){e.i=n?qd(t,!0):t}function jd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Vd(e,t,n){t instanceof Xd?(e.h=t,function(e,t){t&&!e.j&&(Jd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zd(this,t),tp(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Wd(t,$d)),e.h=new Xd(t,e.g))}function zd(e,t,n){e.h.set(t,n)}function Bd(e){return zd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function qd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wd(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Hd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Hd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ld.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Wd(t,Kd,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Wd(t,Kd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Wd(n,"/"==n.charAt(0)?Qd:Gd,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Wd(n,Yd)),e.join("")};var Kd=/[#\/\?@]/g,Gd=/[#\?:]/g,Qd=/[#\?]/g,$d=/[#\?@]/g,Yd=/#/g;function Xd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Jd(e){e.g||(e.g=new Ad,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zd(e,t){Jd(e),t=np(e,t),Od(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Od((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Pd(e)))}function ep(e,t){return Jd(e),t=np(e,t),Od(e.g.h,t)}function tp(e,t,n){Zd(e,t),0<n.length&&(e.i=null,e.g.set(np(e,t),Sh(n)),e.h+=n.length)}function np(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ah=Xd.prototype).add=function(e,t){Jd(this),this.i=null,e=np(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ah.forEach=function(e,t){Jd(this),this.g.forEach((function(n,r){xh(n,(function(n){e.call(t,n,r,this)}),this)}),this)},ah.T=function(){Jd(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},ah.R=function(e){Jd(this);var t=[];if("string"===typeof e)ep(this,e)&&(t=Eh(t,this.g.get(np(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Eh(t,e[n])}return t},ah.set=function(e,t){return Jd(this),this.i=null,ep(this,e=np(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ah.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},ah.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var rp=ae((function e(t,n){re(this,e),this.h=t,this.g=n}));function ip(e){this.l=e||op,lh.PerformanceNavigationTiming?e=0<(e=lh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(lh.g&&lh.g.Ea&&lh.g.Ea()&&lh.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ap,op=10;function sp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function up(e){return e.h?1:e.g?e.g.size:0}function lp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function cp(e,t){e.g?e.g.add(t):e.h=t}function hp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function fp(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ne(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Sh(e.i)}function dp(){}function pp(){this.g=new dp}function vp(e,t,n){var r=n||"";try{Rd(e,(function(e,n){var i=e;fh(e)&&(i=Cf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function yp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function mp(e){this.l=e.$b||null,this.j=e.ib||!1}function gp(e,t){Ef.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=kp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ip.prototype.cancel=function(){if(this.i=fp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ne(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},dp.prototype.stringify=function(e){return lh.JSON.stringify(e,void 0)},dp.prototype.parse=function(e){return lh.JSON.parse(e,void 0)},kh(mp,od),mp.prototype.g=function(){return new gp(this.l,this.j)},mp.prototype.i=(ap={},function(){return ap}),kh(gp,Ef);var kp=0;function wp(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function _p(e){e.readyState=4,e.l=null,e.j=null,e.A=null,bp(e)}function bp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ah=gp.prototype).open=function(e,t){if(this.readyState!=kp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,bp(this)},ah.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||lh).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ah.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_p(this)),this.readyState=kp},ah.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bp(this)),this.g&&(this.readyState=3,bp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof lh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wp(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},ah.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_p(this):bp(this),3==this.readyState&&wp(this)}},ah.Ua=function(e){this.g&&(this.response=this.responseText=e,_p(this))},ah.Ta=function(e){this.g&&(this.response=e,_p(this))},ah.ha=function(){this.g&&_p(this)},ah.setRequestHeader=function(e,t){this.v.append(e,t)},ah.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ah.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(gp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var xp=lh.JSON.parse;function Ep(e){Ef.call(this),this.headers=new Ad,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sp,this.K=this.L=!1}kh(Ep,Ef);var Sp="",Tp=/^https?$/i,Cp=["POST","PUT"];function Ip(e){return"content-type"==e.toLowerCase()}function Np(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Rp(e),Pp(e)}function Rp(e){e.D||(e.D=!0,Sf(e,"complete"),Sf(e,"error"))}function Ap(e){if(e.h&&"undefined"!=typeof uh&&(!e.C[1]||4!=Dp(e)||2!=e.ba()))if(e.v&&4==Dp(e))Vf(e.Fa,0,e);else if(Sf(e,"readystatechange"),4==Dp(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Dd)[1]||null;if(!a&&lh.self&&lh.self.location){var o=lh.self.location.protocol;a=o.substr(0,o.length-1)}i=!Tp.test(a?a.toLowerCase():"")}t=i}if(t)Sf(e,"complete"),Sf(e,"success");else{e.m=6;try{var s=2<Dp(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Rp(e)}}finally{Pp(e)}}}function Pp(e,t){if(e.g){Op(e);var n=e.g,r=e.C[0]?ch:null;e.g=null,e.C=null,t||Sf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Op(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(lh.clearTimeout(e.A),e.A=null)}function Dp(e){return e.g?e.g.readyState:0}function Lp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Sp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Mp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Oh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):zd(e,t,n))}function Fp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Up(e){this.za=0,this.l=[],this.h=new Gf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fp("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fp("baseRetryDelayMs",5e3,e),this.$a=Fp("retryDelaySeedMs",1e4,e),this.Ya=Fp("forwardChannelMaxRetries",2,e),this.ra=Fp("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ip(e&&e.concurrentRequestLimit),this.Ca=new pp,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function jp(e){if(zp(e),3==e.G){var t=e.V++,n=Md(e.F);zd(n,"SID",e.J),zd(n,"RID",t),zd(n,"TYPE","terminate"),Hp(e,n),(t=new pd(e,e.h,t,void 0)).K=2,t.v=Bd(Md(n)),n=!1,lh.navigator&&lh.navigator.sendBeacon&&(n=lh.navigator.sendBeacon(t.v.toString(),"")),!n&&lh.Image&&((new Image).src=t.v,n=!0),n||(t.g=rv(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ed(t)}tv(e)}function Vp(e){e.g&&($p(e),e.g.cancel(),e.g=null)}function zp(e){Vp(e),e.u&&(lh.clearTimeout(e.u),e.u=null),Xp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&lh.clearTimeout(e.m),e.m=null)}function Bp(e,t){e.l.push(new rp(e.Za++,t)),3==e.G&&qp(e)}function qp(e){sp(e.i)||e.m||(e.m=!0,Df(e.Ha,e),e.C=0)}function Wp(e,t){var n;n=t?t.m:e.V++;var r=Md(e.F);zd(r,"SID",e.J),zd(r,"RID",n),zd(r,"AID",e.U),Hp(e,r),e.o&&e.s&&Mp(r,e.o,e.s),n=new pd(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Kp(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),cp(e.i,n),kd(n,r,t)}function Hp(e,t){e.j&&Rd({},(function(e,n){zd(t,n,e)}))}function Kp(e,t,n){n=Math.min(e.l.length,n);var r=e.j?mh(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var l=i[u].h,c=i[u].g;if(0>(l-=a))a=Math.max(0,i[u].h-100),s=!1;else try{vp(c,o,"req"+l+"_")}catch(Av){r&&r(c)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Gp(e){e.g||e.u||(e.Y=1,Df(e.Ga,e),e.A=0)}function Qp(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=rd(mh(e.Ga,e),Zp(e,e.A)),e.A++,!0)}function $p(e){null!=e.B&&(lh.clearTimeout(e.B),e.B=null)}function Yp(e){e.g=new pd(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Md(e.oa);zd(t,"RID","rpc"),zd(t,"SID",e.J),zd(t,"CI",e.N?"0":"1"),zd(t,"AID",e.U),Hp(e,t),zd(t,"TYPE","xmlhttp"),e.o&&e.s&&Mp(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Bd(Md(t)),n.s=null,n.U=!0,wd(n,e)}function Xp(e){null!=e.v&&(lh.clearTimeout(e.v),e.v=null)}function Jp(e,t){var n=null;if(e.g==t){Xp(e),$p(e),e.g=null;var r=2}else{if(!lp(e.i,t))return;n=t.D,hp(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Sf(r=Xf(),new nd(r,n,t,i)),qp(e)}else Gp(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(up(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=rd(mh(e.Ha,e,t),Zp(e,e.C)),e.C++,!0))}(e,t)||2==r&&Qp(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ev(e,5);break;case 4:ev(e,10);break;case 3:ev(e,6);break;default:ev(e,2)}}function Zp(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ev(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=mh(e.jb,e);n||(n=new Ld("//www.google.com/images/cleardot.gif"),lh.location&&"http"==lh.location.protocol||Fd(n,"https"),Bd(n)),function(e,t){var n=new Gf;if(lh.Image){var r=new Image;r.onload=gh(yp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=gh(yp,n,r,"TestLoadImage: error",!1,t),r.onabort=gh(yp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=gh(yp,n,r,"TestLoadImage: timeout",!1,t),lh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else td(2);e.G=0,e.j&&e.j.va(t),tv(e),zp(e)}function tv(e){e.G=0,e.I=-1,e.j&&(0==fp(e.i).length&&0==e.l.length||(e.i.i.length=0,Sh(e.l),e.l.length=0),e.j.ua())}function nv(e,t,n){var r=function(e){return e instanceof Ld?Md(e):new Ld(e,void 0)}(n);if(""!=r.i)t&&Ud(r,t+"."+r.i),jd(r,r.m);else{var i=lh.location;r=function(e,t,n,r){var i=new Ld(null,void 0);return e&&Fd(i,e),t&&Ud(i,t),n&&jd(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Oh(e.aa,(function(e,t){zd(r,t,e)})),t=e.D,n=e.sa,t&&n&&zd(r,t,n),zd(r,"VER",e.ma),Hp(e,r),r}function rv(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Ep(new mp({ib:!0})):new Ep(e.qa)).L=e.H,t}function iv(){}function av(){if(Vh&&!(10<=Number(Zh)))throw Error("Environmental error: no available transport.")}function ov(e,t){Ef.call(this),this.g=new Up(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Th(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Th(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new lv(this)}function sv(e){hd.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function uv(){fd.call(this),this.status=1}function lv(e){this.g=e}(ah=Ep.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ld.g(),this.C=this.u?sd(this.u):sd(ld),this.g.onreadystatechange=mh(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Np(this,a)}e=n||"";var i=new Ad(this.headers);r&&Rd(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Ip,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=lh.FormData&&e instanceof lh.FormData,!(0<=bh(Cp,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Op(this),0<this.B&&((this.K=function(e){return Vh&&Xh()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mh(this.pa,this)):this.A=Vf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Np(this,a)}},ah.pa=function(){"undefined"!=typeof uh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sf(this,"timeout"),this.abort(8))},ah.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Sf(this,"complete"),Sf(this,"abort"),Pp(this))},ah.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Pp(this,!0)),Ep.Z.M.call(this)},ah.Fa=function(){this.s||(this.F||this.v||this.l?Ap(this):this.cb())},ah.cb=function(){Ap(this)},ah.ba=function(){try{return 2<Dp(this)?this.g.status:-1}catch(ap){return-1}},ah.ga=function(){try{return this.g?this.g.responseText:""}catch(ap){return""}},ah.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xp(t)}},ah.Da=function(){return this.m},ah.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(ah=Up.prototype).ma=8,ah.G=1,ah.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},ah.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new pd(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Mh(n=Dh(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Kp(this,t,r),zd(i=Md(this.F),"RID",e),zd(i,"CVER",22),this.D&&zd(i,"X-HTTP-Session-Id",this.D),Hp(this,i),this.o&&n&&Mp(i,this.o,n),cp(this.i,t),this.Ra&&zd(i,"TYPE","init"),this.ja?(zd(i,"$req",r),zd(i,"SID","null"),t.$=!0,kd(t,i,null)):kd(t,i,r),this.G=2}}else 3==this.G&&(e?Wp(this,e):0==this.l.length||sp(this.i)||Wp(this))},ah.Ga=function(){if(this.u=null,Yp(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=rd(mh(this.bb,this),e)}},ah.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,td(10),Vp(this),Yp(this))},ah.ab=function(){null!=this.v&&(this.v=null,Vp(this),Qp(this),td(19))},ah.jb=function(e){e?(this.h.info("Successfully pinged google.com"),td(2)):(this.h.info("Failed to ping google.com"),td(1))},(ah=iv.prototype).xa=function(){},ah.wa=function(){},ah.va=function(){},ah.ua=function(){},ah.Oa=function(){},av.prototype.g=function(e,t){return new ov(e,t)},kh(ov,Ef),ov.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Df(mh(e.hb,e,t))),td(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=nv(e,null,e.W),qp(e)},ov.prototype.close=function(){jp(this.g)},ov.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Bp(this.g,t)}else this.v?((t={}).__data__=Cf(e),Bp(this.g,t)):Bp(this.g,e)},ov.prototype.M=function(){this.g.j=null,delete this.j,jp(this.g),delete this.g,ov.Z.M.call(this)},kh(sv,hd),kh(uv,fd),kh(lv,iv),lv.prototype.xa=function(){Sf(this.g,"a")},lv.prototype.wa=function(e){Sf(this.g,new sv(e))},lv.prototype.va=function(e){Sf(this.g,new uv(e))},lv.prototype.ua=function(){Sf(this.g,"b")},av.prototype.createWebChannel=av.prototype.g,ov.prototype.send=ov.prototype.u,ov.prototype.open=ov.prototype.m,ov.prototype.close=ov.prototype.close,id.NO_ERROR=0,id.TIMEOUT=8,id.HTTP_ERROR=6,ad.COMPLETE="complete",ud.EventType=cd,cd.OPEN="a",cd.CLOSE="b",cd.ERROR="c",cd.MESSAGE="d",Ef.prototype.listen=Ef.prototype.N,Ep.prototype.listenOnce=Ep.prototype.O,Ep.prototype.getLastError=Ep.prototype.La,Ep.prototype.getLastErrorCode=Ep.prototype.Da,Ep.prototype.getStatus=Ep.prototype.ba,Ep.prototype.getResponseJson=Ep.prototype.Qa,Ep.prototype.getResponseText=Ep.prototype.ga,Ep.prototype.send=Ep.prototype.ea;var cv=sh.createWebChannelTransport=function(){return new av},hv=sh.getStatEventTarget=function(){return Xf()},fv=sh.ErrorCode=id,dv=sh.EventType=ad,pv=sh.Event=$f,vv=sh.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yv=sh.FetchXmlHttpFactory=mp,mv=sh.WebChannel=ud,gv=sh.XhrIo=Ep,kv="@firebase/firestore",wv=function(){function e(t){re(this,e),this.uid=t}return ae(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();wv.UNAUTHENTICATED=new wv(null),wv.GOOGLE_CREDENTIALS=new wv("google-credentials-uid"),wv.FIRST_PARTY=new wv("first-party-uid"),wv.MOCK_USER=new wv("mock-user");var _v="9.8.4",bv=new dt("@firebase/firestore");function xv(){return bv.logLevel}function Ev(e){if(bv.logLevel<=ot.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Cv);bv.debug.apply(bv,["Firestore (".concat(_v,"): ").concat(e)].concat(te(i)))}}function Sv(e){if(bv.logLevel<=ot.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Cv);bv.error.apply(bv,["Firestore (".concat(_v,"): ").concat(e)].concat(te(i)))}}function Tv(e){if(bv.logLevel<=ot.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Cv);bv.warn.apply(bv,["Firestore (".concat(_v,"): ").concat(e)].concat(te(i)))}}function Cv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Iv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(_v,") INTERNAL ASSERTION FAILED: ")+e;throw Sv(t),new Error(t)}function Nv(e,t){e||Iv()}function Rv(e,t){return e}var Av={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Pv=function(e){ue(n,e);var t=fe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ae(n)}(De),Ov=ae((function e(){var t=this;re(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Dv=ae((function e(t,n){re(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Lv=function(){function e(){re(this,e)}return ae(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(wv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Mv=function(){function e(t){re(this,e),this.t=t,this.currentUser=wv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ae(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ov;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ov,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Ev("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Ev("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ov)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ev("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Nv("string"==typeof n.accessToken),new Dv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Nv(null===e||"string"==typeof e),new wv(e)}}]),e}(),Fv=ae((function e(t,n,r){re(this,e),this.type="FirstParty",this.user=wv.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Uv=function(){function e(t,n,r){re(this,e),this.h=t,this.l=n,this.m=r}return ae(e,[{key:"getToken",value:function(){return Promise.resolve(new Fv(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(wv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),jv=ae((function e(t){re(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Vv=function(){function e(t){re(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ae(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Ev("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Ev("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ev("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Ev("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Nv("string"==typeof t.token),e.p=t.token,new jv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function zv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Bv=function(){function e(){re(this,e)}return ae(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=zv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function qv(e,t){return e<t?-1:e>t?1:0}function Wv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var Hv=function(){function e(t,n){if(re(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Pv(Av.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pv(Av.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Pv(Av.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pv(Av.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ae(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?qv(this.nanoseconds,e.nanoseconds):qv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Kv=function(){function e(t){re(this,e),this.timestamp=t}return ae(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Hv(0,0))}},{key:"max",value:function(){return new e(new Hv(253402300799,999999999))}}]),e}(),Gv=function(){function e(t,n,r){re(this,e),void 0===n?n=0:n>t.length&&Iv(),void 0===r?r=t.length-n:r>t.length-n&&Iv(),this.segments=t,this.offset=n,this.len=r}return ae(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Qv=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Pv(Av.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,te(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gv),$v=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yv=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return $v.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Pv(Av.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Pv(Av.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Pv(Av.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Pv(Av.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gv),Xv=function(){function e(t){re(this,e),this.path=t}return ae(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Qv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Qv.fromString(t))}},{key:"fromName",value:function(t){return new e(Qv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Qv.emptyPath())}},{key:"comparator",value:function(e,t){return Qv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Qv(t.slice()))}}]),e}(),Jv=ae((function e(t,n,r,i){re(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Jv.UNKNOWN_ID=-1;function Zv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Kv.fromTimestamp(1e9===r?new Hv(n+1,0):new Hv(n,r));return new ty(i,Xv.empty(),t)}function ey(e){return new ty(e.readTime,e.key,-1)}var ty=function(){function e(t,n,r){re(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ae(e,null,[{key:"min",value:function(){return new e(Kv.min(),Xv.empty(),-1)}},{key:"max",value:function(){return new e(Kv.max(),Xv.empty(),-1)}}]),e}();function ny(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Xv.comparator(e.documentKey,t.documentKey))?n:qv(e.largestBatchId,t.largestBatchId)}var ry="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",iy=function(){function e(){re(this,e),this.onCommittedListeners=[]}return ae(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function ay(e){return oy.apply(this,arguments)}function oy(){return oy=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Av.FAILED_PRECONDITION&&t.message===ry){e.next=2;break}throw t;case 2:Ev("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),oy.apply(this,arguments)}var sy=function(){function e(t){var n=this;re(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ae(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Iv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ne(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}();function uy(e){return"IndexedDbTransactionError"===e.name}var ly=function(){function e(t,n){var r=this;re(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return ae(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function cy(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hy(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fy(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}ly.ot=-1;var dy=function(){function e(t,n){re(this,e),this.comparator=t,this.root=n||vy.EMPTY}return ae(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,vy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new py(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new py(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new py(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new py(this.root,e,this.comparator,!0)}}]),e}(),py=function(){function e(t,n,r,i){re(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ae(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),vy=function(){function e(t,n,r,i,a){re(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ae(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Iv();if(this.right.isRed())throw Iv();var e=this.left.check();if(e!==this.right.check())throw Iv();return e+(this.isRed()?0:1)}}]),e}();vy.EMPTY=null,vy.RED=!0,vy.BLACK=!1,vy.EMPTY=new(function(){function e(){re(this,e),this.size=0}return ae(e,[{key:"key",get:function(){throw Iv()}},{key:"value",get:function(){throw Iv()}},{key:"color",get:function(){throw Iv()}},{key:"left",get:function(){throw Iv()}},{key:"right",get:function(){throw Iv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new vy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var yy=function(){function e(t){re(this,e),this.comparator=t,this.data=new dy(this.comparator)}return ae(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new my(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new my(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),my=function(){function e(t){re(this,e),this.iter=t}return ae(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var gy=function(){function e(t){re(this,e),this.fields=t,t.sort(Yv.comparator)}return ae(e,[{key:"unionWith",value:function(t){var n,r=new yy(Yv.comparator),i=ne(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,s=ne(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(l){s.e(l)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=ne(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Wv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var ky=function(e){function t(e){re(this,t),this.binaryString=e}return ae(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return qv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ky.EMPTY_BYTE_STRING=new ky("");var wy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _y(e){if(Nv(!!e),"string"==typeof e){var t=0,n=wy.exec(e);if(Nv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:by(e.seconds),nanos:by(e.nanos)}}function by(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xy(e){return"string"==typeof e?ky.fromBase64String(e):ky.fromUint8Array(e)}function Ey(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sy(e){var t=e.mapValue.fields.__previous_value__;return Ey(t)?Sy(t):t}function Ty(e){var t=_y(e.mapValue.fields.__local_write_time__.timestampValue);return new Hv(t.seconds,t.nanos)}var Cy=ae((function e(t,n,r,i,a,o,s,u){re(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Iy=function(){function e(t,n){re(this,e),this.projectId=t,this.database=n||"(default)"}return ae(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ny(e){return null==e}function Ry(e){return 0===e&&1/e==-1/0}function Ay(e){return"number"==typeof e&&Number.isInteger(e)&&!Ry(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Py={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Oy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ey(e)?4:Gy(e)?9007199254740991:10:Iv()}function Dy(e,t){if(e===t)return!0;var n=Oy(e);if(n!==Oy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ty(e).isEqual(Ty(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=_y(e.timestampValue),r=_y(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xy(e.bytesValue).isEqual(xy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return by(e.geoPointValue.latitude)===by(t.geoPointValue.latitude)&&by(e.geoPointValue.longitude)===by(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return by(e.integerValue)===by(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=by(e.doubleValue),r=by(t.doubleValue);return n===r?Ry(n)===Ry(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Wv(e.arrayValue.values||[],t.arrayValue.values||[],Dy);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(cy(n)!==cy(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dy(n[i],r[i])))return!1;return!0}(e,t);default:return Iv()}}function Ly(e,t){return void 0!==(e.values||[]).find((function(e){return Dy(e,t)}))}function My(e,t){if(e===t)return 0;var n=Oy(e),r=Oy(t);if(n!==r)return qv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=by(e.integerValue||e.doubleValue),r=by(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Fy(e.timestampValue,t.timestampValue);case 4:return Fy(Ty(e),Ty(t));case 5:return qv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=xy(e),r=xy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=qv(n[i],r[i]);if(0!==a)return a}return qv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=qv(by(e.latitude),by(t.latitude));return 0!==n?n:qv(by(e.longitude),by(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=My(n[i],r[i]);if(a)return a}return qv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Py.mapValue&&t===Py.mapValue)return 0;if(e===Py.mapValue)return 1;if(t===Py.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=qv(r[o],a[o]);if(0!==s)return s;var u=My(n[r[o]],i[a[o]]);if(0!==u)return u}return qv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Iv()}}function Fy(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return qv(e,t);var n=_y(e),r=_y(t),i=qv(n.seconds,r.seconds);return 0!==i?i:qv(n.nanos,r.nanos)}function Uy(e){return jy(e)}function jy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=_y(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?xy(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Xv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ne(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=jy(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ne(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(jy(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Iv();var t,n}function Vy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function zy(e){return!!e&&"integerValue"in e}function By(e){return!!e&&"arrayValue"in e}function qy(e){return!!e&&"nullValue"in e}function Wy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hy(e){return!!e&&"mapValue"in e}function Ky(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return hy(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ky(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ky(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Gy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var Qy=function(){function e(t){re(this,e),this.value=t}return ae(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Hy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ky(t)}},{key:"setAll",value:function(e){var t=this,n=Yv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ky(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Hy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Dy(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Hy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){hy(t,(function(t,n){return e[t]=n}));var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ky(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function $y(e){var t=[];return hy(e.fields,(function(e,n){var r=new Yv([e]);if(Hy(n)){var i=$y(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ne(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new gy(t)}var Yy=function(){function e(t,n,r,i,a,o){re(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ae(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Qy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Qy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Kv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Kv.min(),Kv.min(),Qy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Kv.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Kv.min(),Qy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Kv.min(),Qy.empty(),2)}}]),e}(),Xy=ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;re(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ut=null}));function Jy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Xy(e,t,n,r,i,a,o)}function Zy(e){var t=Rv(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Uy(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ny(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Uy(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Uy(e)})).join(",")),t.ut=n}return t.ut}function em(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!dm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Dy(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vm(e.startAt,t.startAt)&&vm(e.endAt,t.endAt)}function tm(e){return Xv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var nm=function(e){ue(n,e);var t=fe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(My(t,this.value)):null!==t&&Oy(this.value)===Oy(t)&&this.at(My(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Iv()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new rm(e,t,r):"array-contains"===t?new sm(e,r):"in"===t?new um(e,r):"not-in"===t?new lm(e,r):"array-contains-any"===t?new cm(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new im(e,n):new am(e,n)}}]),n}(function(){return ae((function e(){re(this,e)}))}()),rm=function(e){ue(n,e);var t=fe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,e,r,i)).key=Xv.fromName(i.referenceValue),a}return ae(n,[{key:"matches",value:function(e){var t=Xv.comparator(e.key,this.key);return this.at(t)}}]),n}(nm),im=function(e){ue(n,e);var t=fe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,"in",r)).keys=om("in",r),i}return ae(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(nm),am=function(e){ue(n,e);var t=fe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,e,"not-in",r)).keys=om("not-in",r),i}return ae(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(nm);function om(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Xv.fromName(e.referenceValue)}))}var sm=function(e){ue(n,e);var t=fe(n);function n(e,r){return re(this,n),t.call(this,e,"array-contains",r)}return ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return By(t)&&Ly(t.arrayValue,this.value)}}]),n}(nm),um=function(e){ue(n,e);var t=fe(n);function n(e,r){return re(this,n),t.call(this,e,"in",r)}return ae(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ly(this.value.arrayValue,t)}}]),n}(nm),lm=function(e){ue(n,e);var t=fe(n);function n(e,r){return re(this,n),t.call(this,e,"not-in",r)}return ae(n,[{key:"matches",value:function(e){if(Ly(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ly(this.value.arrayValue,t)}}]),n}(nm),cm=function(e){ue(n,e);var t=fe(n);function n(e,r){return re(this,n),t.call(this,e,"array-contains-any",r)}return ae(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!By(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ly(t.value.arrayValue,e)}))}}]),n}(nm),hm=ae((function e(t,n){re(this,e),this.position=t,this.inclusive=n})),fm=ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";re(this,e),this.field=t,this.dir=n}));function dm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function pm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Xv.comparator(Xv.fromName(o.referenceValue),n.key):My(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function vm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Dy(e.position[n],t.position[n]))return!1;return!0}var ym=ae((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;re(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}));function mm(e,t,n,r,i,a,o,s){return new ym(e,t,n,r,i,a,o,s)}function gm(e){return new ym(e)}function km(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function wm(e){var t,n=ne(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function _m(e){return null!==e.collectionGroup}function bm(e){var t=Rv(e);if(null===t.lt){t.lt=[];var n=wm(t),r=km(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new fm(n)),t.lt.push(new fm(Yv.keyField(),"asc"));else{var i,a=!1,o=ne(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.lt.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new fm(Yv.keyField(),u))}}}return t.lt}function xm(e){var t=Rv(e);if(!t.ft)if("F"===t.limitType)t.ft=Jy(t.path,t.collectionGroup,bm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ne(bm(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new fm(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var s=t.endAt?new hm(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new hm(t.startAt.position,t.startAt.inclusive):null;t.ft=Jy(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.ft}function Em(e,t,n){return new ym(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Sm(e,t){return em(xm(e),xm(t))&&e.limitType===t.limitType}function Tm(e){return"".concat(Zy(xm(e)),"|lt:").concat(e.limitType)}function Cm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Uy(t.value));var t})).join(", "),"]")),Ny(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Uy(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Uy(e)})).join(",")),"Target(".concat(t,")")}(xm(e)),"; limitType=").concat(e.limitType,")")}function Im(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ne(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ne(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=pm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,bm(e),t))&&!(e.endAt&&!function(e,t,n){var r=pm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,bm(e),t))}(e,t)}function Nm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Rm(e){return function(t,n){var r,i=!1,a=ne(bm(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Am(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Am(e,t,n){var r=e.field.isKeyField()?Xv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?My(r,i):Iv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Iv()}}function Pm(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ry(t)?"-0":t}}function Om(e){return{integerValue:""+e}}function Dm(e,t){return Ay(t)?Om(t):Pm(e,t)}var Lm=ae((function e(){re(this,e),this._=void 0}));function Mm(e,t,n){return e instanceof jm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Vm?zm(e,t):e instanceof Bm?qm(e,t):function(e,t){var n=Um(e,t),r=Hm(n)+Hm(e._t);return zy(n)&&zy(e._t)?Om(r):Pm(e.wt,r)}(e,t)}function Fm(e,t,n){return e instanceof Vm?zm(e,t):e instanceof Bm?qm(e,t):n}function Um(e,t){return e instanceof Wm?zy(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var jm=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n)}(Lm),Vm=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this)).elements=e,r}return ae(n)}(Lm);function zm(e,t){var n,r=Km(t),i=ne(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Dy(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Bm=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this)).elements=e,r}return ae(n)}(Lm);function qm(e,t){var n,r=Km(t),i=ne(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Dy(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Wm=function(e){ue(n,e);var t=fe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).wt=e,i._t=r,i}return ae(n)}(Lm);function Hm(e){return by(e.integerValue||e.doubleValue)}function Km(e){return By(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Gm=ae((function e(t,n){re(this,e),this.version=t,this.transformResults=n})),Qm=function(){function e(t,n){re(this,e),this.updateTime=t,this.exists=n}return ae(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function $m(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ym=ae((function e(){re(this,e)}));function Xm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new lg(e.key,Qm.none()):new ng(e.key,e.data,Qm.none());var n,r=e.data,i=Qy.empty(),a=new yy(Yv.comparator),o=ne(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new rg(e.key,i,new gy(a.toArray()),Qm.none())}function Jm(e,t,n){e instanceof ng?function(e,t,n){var r=e.value.clone(),i=ag(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof rg?function(e,t,n){if($m(e.precondition,t)){var r=ag(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ig(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Zm(e,t,n,r){return e instanceof ng?function(e,t,n,r){if(!$m(e.precondition,t))return n;var i=e.value.clone(),a=og(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof rg?function(e,t,n,r){if(!$m(e.precondition,t))return n;var i=og(e.fieldTransforms,r,t),a=t.data;return a.setAll(ig(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return $m(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function eg(e,t){var n,r=null,i=ne(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Um(a.transform,o||null);null!=s&&(null===r&&(r=Qy.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function tg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Wv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Vm&&t instanceof Vm||e instanceof Bm&&t instanceof Bm?Wv(e.elements,t.elements,Dy):e instanceof Wm&&t instanceof Wm?Dy(e._t,t._t):e instanceof jm&&t instanceof jm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ng=function(e){ue(n,e);var t=fe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return re(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ae(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ym),rg=function(e){ue(n,e);var t=fe(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return re(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return ae(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Ym);function ig(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ag(e,t,n){var r=new Map;Nv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Fm(o,s,n[i]))}return r}function og(e,t,n){var r,i=new Map,a=ne(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Mm(s,u,t))}}catch(l){a.e(l)}finally{a.f()}return i}var sg,ug,lg=function(e){ue(n,e);var t=fe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ae(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ym),cg=function(e){ue(n,e);var t=fe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ae(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ym),hg=ae((function e(t){re(this,e),this.count=t}));function fg(e){switch(e){default:return Iv();case Av.CANCELLED:case Av.UNKNOWN:case Av.DEADLINE_EXCEEDED:case Av.RESOURCE_EXHAUSTED:case Av.INTERNAL:case Av.UNAVAILABLE:case Av.UNAUTHENTICATED:return!1;case Av.INVALID_ARGUMENT:case Av.NOT_FOUND:case Av.ALREADY_EXISTS:case Av.PERMISSION_DENIED:case Av.FAILED_PRECONDITION:case Av.ABORTED:case Av.OUT_OF_RANGE:case Av.UNIMPLEMENTED:case Av.DATA_LOSS:return!0}}function dg(e){if(void 0===e)return Sv("GRPC error has no .code"),Av.UNKNOWN;switch(e){case sg.OK:return Av.OK;case sg.CANCELLED:return Av.CANCELLED;case sg.UNKNOWN:return Av.UNKNOWN;case sg.DEADLINE_EXCEEDED:return Av.DEADLINE_EXCEEDED;case sg.RESOURCE_EXHAUSTED:return Av.RESOURCE_EXHAUSTED;case sg.INTERNAL:return Av.INTERNAL;case sg.UNAVAILABLE:return Av.UNAVAILABLE;case sg.UNAUTHENTICATED:return Av.UNAUTHENTICATED;case sg.INVALID_ARGUMENT:return Av.INVALID_ARGUMENT;case sg.NOT_FOUND:return Av.NOT_FOUND;case sg.ALREADY_EXISTS:return Av.ALREADY_EXISTS;case sg.PERMISSION_DENIED:return Av.PERMISSION_DENIED;case sg.FAILED_PRECONDITION:return Av.FAILED_PRECONDITION;case sg.ABORTED:return Av.ABORTED;case sg.OUT_OF_RANGE:return Av.OUT_OF_RANGE;case sg.UNIMPLEMENTED:return Av.UNIMPLEMENTED;case sg.DATA_LOSS:return Av.DATA_LOSS;default:return Iv()}}(ug=sg||(sg={}))[ug.OK=0]="OK",ug[ug.CANCELLED=1]="CANCELLED",ug[ug.UNKNOWN=2]="UNKNOWN",ug[ug.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ug[ug.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ug[ug.NOT_FOUND=5]="NOT_FOUND",ug[ug.ALREADY_EXISTS=6]="ALREADY_EXISTS",ug[ug.PERMISSION_DENIED=7]="PERMISSION_DENIED",ug[ug.UNAUTHENTICATED=16]="UNAUTHENTICATED",ug[ug.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ug[ug.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ug[ug.ABORTED=10]="ABORTED",ug[ug.OUT_OF_RANGE=11]="OUT_OF_RANGE",ug[ug.UNIMPLEMENTED=12]="UNIMPLEMENTED",ug[ug.INTERNAL=13]="INTERNAL",ug[ug.UNAVAILABLE=14]="UNAVAILABLE",ug[ug.DATA_LOSS=15]="DATA_LOSS";var pg=function(){function e(t,n){re(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ae(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){hy(this.inner,(function(t,n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return fy(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),vg=new dy(Xv.comparator);function yg(){return vg}var mg=new dy(Xv.comparator);function gg(){for(var e=mg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function kg(e){var t=mg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function wg(){return bg()}function _g(){return bg()}function bg(){return new pg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var xg=new dy(Xv.comparator),Eg=new yy(Xv.comparator);function Sg(){for(var e=Eg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Tg=new yy(qv);function Cg(){return Tg}var Ig=function(){function e(t,n,r,i,a){re(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ae(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ng.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Kv.min(),r,Cg(),yg(),Sg())}}]),e}(),Ng=function(){function e(t,n,r,i,a){re(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ae(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(ky.EMPTY_BYTE_STRING,n,Sg(),Sg(),Sg())}}]),e}(),Rg=ae((function e(t,n,r,i){re(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),Ag=ae((function e(t,n){re(this,e),this.targetId=t,this.It=n})),Pg=ae((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ky.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;re(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Og=function(){function e(){re(this,e),this.Tt=0,this.Et=Mg(),this.At=ky.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return ae(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=Sg(),t=Sg(),n=Sg();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Iv()}})),new Ng(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Mg()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Dg=function(){function e(t){re(this,e),this.Mt=t,this.Ft=new Map,this.$t=yg(),this.Bt=Lg(),this.Lt=new yy(qv)}return ae(e,[{key:"Ut",value:function(e){var t,n=ne(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(s){n.e(s)}finally{n.f()}var i,a=ne(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:Iv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(tm(i))if(0===n){var a=new Xv(i.path);this.Kt(t,a,Yy.newNoDocument(a,Kv.min()))}else Nv(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&tm(a.target)){var o=new Xv(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Yy.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Sg();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ig(e,n,this.Lt,this.$t,r);return this.$t=yg(),this.Bt=Lg(),this.Lt=new yy(qv),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Og,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new yy(qv),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||Ev("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Og),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Lg(){return new dy(Xv.comparator)}function Mg(){return new dy(Xv.comparator)}var Fg={asc:"ASCENDING",desc:"DESCENDING"},Ug={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jg=ae((function e(t,n){re(this,e),this.databaseId=t,this.dt=n}));function Vg(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function zg(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Bg(e,t){return Vg(e,t.toTimestamp())}function qg(e){return Nv(!!e),Kv.fromTimestamp(function(e){var t=_y(e);return new Hv(t.seconds,t.nanos)}(e))}function Wg(e,t){return function(e){return new Qv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Hg(e){var t=Qv.fromString(e);return Nv(hk(t)),t}function Kg(e,t){return Wg(e.databaseId,t.path)}function Gg(e,t){var n=Hg(t);if(n.get(1)!==e.databaseId.projectId)throw new Pv(Av.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Pv(Av.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xv(Xg(n))}function Qg(e,t){return Wg(e.databaseId,t)}function $g(e){var t=Hg(e);return 4===t.length?Qv.emptyPath():Xg(t)}function Yg(e){return new Qv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xg(e){return Nv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jg(e,t,n){return{name:Kg(e,t),fields:n.value.mapValue.fields}}function Zg(e,t){var n;if(t instanceof ng)n={update:Jg(e,t.key,t.value)};else if(t instanceof lg)n={delete:Kg(e,t.key)};else if(t instanceof rg)n={update:Jg(e,t.key,t.data),updateMask:ck(t.fieldMask)};else{if(!(t instanceof cg))return Iv();n={verify:Kg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof jm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Vm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Bm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Wm)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Iv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Bg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Iv()}(e,t.precondition)),n}function ek(e,t){return{documents:[Qg(e,t.path)]}}function tk(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Qg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Qg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Wy(e.value))return{unaryFilter:{field:ok(e.field),op:"IS_NAN"}};if(qy(e.value))return{unaryFilter:{field:ok(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wy(e.value))return{unaryFilter:{field:ok(e.field),op:"IS_NOT_NAN"}};if(qy(e.value))return{unaryFilter:{field:ok(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ok(e.field),op:ak(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ok(e.field),direction:ik(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.dt||Ny(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function nk(e){var t=$g(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Nv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=rk(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new fm(sk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Ny(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new hm(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new hm(n,t)}(n.endAt)),mm(t,i,s,o,u,"F",l,c)}function rk(e){return e?void 0!==e.unaryFilter?[lk(e)]:void 0!==e.fieldFilter?[uk(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return rk(e)})).reduce((function(e,t){return e.concat(t)})):Iv():[]}function ik(e){return Fg[e]}function ak(e){return Ug[e]}function ok(e){return{fieldPath:e.canonicalString()}}function sk(e){return Yv.fromServerFormat(e.fieldPath)}function uk(e){return nm.create(sk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Iv()}}(e.fieldFilter.op),e.fieldFilter.value)}function lk(e){switch(e.unaryFilter.op){case"IS_NAN":var t=sk(e.unaryFilter.field);return nm.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=sk(e.unaryFilter.field);return nm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=sk(e.unaryFilter.field);return nm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=sk(e.unaryFilter.field);return nm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Iv()}}function ck(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function hk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var fk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),dk=([].concat(te(fk),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),pk=dk;[].concat(pk,["indexConfiguration","indexState","indexEntries"]);var vk=function(){function e(t,n,r,i){re(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ae(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Jm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=ne(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Zm(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=ne(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=Zm(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=_g();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=Xm(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Kv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Sg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Wv(this.mutations,e.mutations,(function(e,t){return tg(e,t)}))&&Wv(this.baseMutations,e.baseMutations,(function(e,t){return tg(e,t)}))}}]),e}(),yk=function(){function e(t,n,r,i){re(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ae(e,null,[{key:"from",value:function(t,n,r){Nv(t.mutations.length===r.length);for(var i=xg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),mk=function(){function e(t,n){re(this,e),this.largestBatchId=t,this.mutation=n}return ae(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),gk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Kv.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ky.EMPTY_BYTE_STRING;re(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return ae(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),kk=ae((function e(t){re(this,e),this.ne=t}));function wk(e){var t=nk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Em(t,t.limit,"L"):t}var _k=function(){function e(){re(this,e)}return ae(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(by(e.integerValue));else if("doubleValue"in e){var n=by(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Ry(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(xy(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Gy(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Iv()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Xv.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();_k.ye=new _k;var bk=function(){function e(){re(this,e),this.ze=new xk}return ae(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),sy.resolve()}},{key:"getCollectionParents",value:function(e,t){return sy.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return sy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return sy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return sy.resolve(null)}},{key:"getIndexType",value:function(e,t){return sy.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return sy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return sy.resolve(null)}},{key:"getMinOffset",value:function(e,t){return sy.resolve(ty.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return sy.resolve(ty.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return sy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return sy.resolve()}}]),e}(),xk=function(){function e(){re(this,e),this.index={}}return ae(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new yy(Qv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new yy(Qv.comparator)).toArray()}}]),e}();new Uint8Array(0);var Ek=function(){function e(t,n,r){re(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ae(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();Ek.DEFAULT_COLLECTION_PERCENTILE=10,Ek.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ek.DEFAULT=new Ek(41943040,Ek.DEFAULT_COLLECTION_PERCENTILE,Ek.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ek.DISABLED=new Ek(-1,0,0);var Sk=function(){function e(t){re(this,e),this.En=t}return ae(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}();var Tk=function(){function e(){re(this,e),this.changes=new pg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ae(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Yy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?sy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Ck=ae((function e(t,n){re(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Ik=function(){function e(t,n,r,i){re(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ae(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Zm(r.mutation,e,gy.empty(),Hv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Sg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sg(),i=wg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=gg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=wg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Sg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=yg(),a=bg(),o=bg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof rg)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Zm(o.mutation,t,o.mutation.getFieldMask(),Hv.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ck(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=bg(),i=new dy((function(e,t){return e-t})),a=Sg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=ne(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||gy.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Sg()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,l=i.value,c=_g();l.forEach((function(e){if(!a.has(e)){var n=Xm(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,c))};s.hasNext();)u();return sy.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Xv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_m(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):sy.resolve(wg()),s=-1,u=a;return o.next((function(t){return sy.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?sy.resolve():i.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Sg())})).next((function(e){return{batchId:s,changes:kg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Xv(t)).next((function(e){var t=gg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=gg();return this.indexManager.getCollectionParents(e,i).next((function(o){return sy.forEach(o,(function(o){var s=function(e,t){return new ym(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Yy.newInvalidDocument(n)))}));var n=gg();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Zm(a.mutation,i,gy.empty(),Hv.now()),Im(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):sy.resolve(Yy.newInvalidDocument(t))}}]),e}(),Nk=function(){function e(t){re(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return ae(e,[{key:"getBundleMetadata",value:function(e,t){return sy.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:qg(n.createTime)}),sy.resolve()}},{key:"getNamedQuery",value:function(e,t){return sy.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:wk(e.bundledQuery),readTime:qg(e.readTime)}}(t)),sy.resolve()}}]),e}(),Rk=function(){function e(){re(this,e),this.overlays=new dy(Xv.comparator),this.Xn=new Map}return ae(e,[{key:"getOverlay",value:function(e,t){return sy.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=wg();return sy.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),sy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),sy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=wg(),i=t.length+1,a=new Xv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return sy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new dy((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=wg(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=wg(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return sy.resolve(u)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new mk(t,n));var a=this.Xn.get(t);void 0===a&&(a=Sg(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),Ak=function(){function e(){re(this,e),this.Zn=new yy(Pk.ts),this.es=new yy(Pk.ns)}return ae(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Pk(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Pk(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Xv(new Qv([])),r=new Pk(n,e),i=new Pk(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Xv(new Qv([])),n=new Pk(t,e),r=new Pk(t,e+1),i=Sg();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Pk(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Pk=function(){function e(t,n){re(this,e),this.key=t,this.ls=n}return ae(e,null,[{key:"ts",value:function(e,t){return Xv.comparator(e.key,t.key)||qv(e.ls,t.ls)}},{key:"ns",value:function(e,t){return qv(e.ls,t.ls)||Xv.comparator(e.key,t.key)}}]),e}(),Ok=function(){function e(t,n){re(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new yy(Pk.ts)}return ae(e,[{key:"checkEmpty",value:function(e){return sy.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new vk(i,t,n,r);this.mutationQueue.push(a);var o,s=ne(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ds=this.ds.add(new Pk(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return sy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return sy.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return sy.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return sy.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return sy.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Pk(t,0),i=new Pk(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),sy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new yy(qv);return t.forEach((function(e){var t=new Pk(e,0),i=new Pk(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),sy.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Xv.isDocumentKey(i)||(i=i.child(""));var a=new Pk(new Xv(i),0),o=new yy(qv);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),sy.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Nv(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return sy.forEach(t.mutations,(function(i){var a=new Pk(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Pk(t,0),r=this.ds.firstAfterOrEqual(n);return sy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,sy.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Dk=function(){function e(t){re(this,e),this.ps=t,this.docs=new dy(Xv.comparator),this.size=0}return ae(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return sy.resolve(n?n.document.mutableCopy():Yy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=yg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Yy.newInvalidDocument(e))})),sy.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=yg(),i=new Xv(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||ny(ey(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return sy.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Iv()}},{key:"Is",value:function(e,t){return sy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Lk(this)}},{key:"getSize",value:function(e){return sy.resolve(this.size)}}]),e}(),Lk=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this)).zn=e,r}return ae(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),sy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(Tk),Mk=function(){function e(t){re(this,e),this.persistence=t,this.Ts=new pg((function(e){return Zy(e)}),em),this.lastRemoteSnapshotVersion=Kv.min(),this.highestTargetId=0,this.Es=0,this.As=new Ak,this.targetCount=0,this.Rs=Sk.An()}return ae(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),sy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return sy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return sy.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),sy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),sy.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Sk(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,sy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),sy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,sy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),sy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return sy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return sy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),sy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),sy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),sy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return sy.resolve(n)}},{key:"containsKey",value:function(e,t){return sy.resolve(this.As.containsKey(t))}}]),e}(),Fk=function(){function e(t,n){var r=this;re(this,e),this.bs={},this.overlays={},this.Ps=new ly(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Mk(this),this.indexManager=new bk,this.remoteDocumentCache=new Dk((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new kk(n),this.Ds=new Nk(this.wt)}return ae(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Rk,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Ok(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Ev("MemoryPersistence","Starting transaction:",e);var i=new Uk(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return sy.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Uk=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ae(n)}(iy),jk=function(){function e(t){re(this,e),this.persistence=t,this.ks=new Ak,this.Os=null}return ae(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw Iv()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),sy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),sy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),sy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sy.forEach(this.Fs,(function(r){var i=Xv.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Kv.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return sy.or([function(){return sy.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}();var Vk=function(){function e(t,n,r,i){re(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return ae(e,null,[{key:"Vi",value:function(t,n){var r,i=Sg(),a=Sg(),o=ne(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),zk=function(){function e(){re(this,e),this.Si=!1}return ae(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return sy.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Kv.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(xv()<=ot.DEBUG&&Ev("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cm(t)),i.Mi(e,o,t,Zv(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new yy(Rm(e));return t.forEach((function(t,r){Im(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return xv()<=ot.DEBUG&&Ev("QueryEngine","Using full collection scan to execute query:",Cm(t)),this.Di.getDocumentsMatchingQuery(e,t,ty.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Bk=function(){function e(t,n,r,i){re(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new dy(qv),this.Bi=new pg((function(e){return Zy(e)}),em),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return ae(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ik(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function qk(e,t,n,r){return new Bk(e,t,n,r)}function Wk(e,t){return Hk.apply(this,arguments)}function Hk(){return Hk=ee(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rv(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Sg(),u=ne(t);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.push(l.batchId);var c,h=ne(l.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=ne(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=ne(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Hk.apply(this,arguments)}function Kk(e,t){var n=Rv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=sy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Nv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Sg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Gk(e){var t=Rv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Qk(e,t){var n=Rv(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,s)})));var l=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?l=l.withResumeToken(ky.EMPTY_BYTE_STRING,Kv.min()).withLastLimboFreeSnapshotVersion(Kv.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&o.push(n.Vs.updateTargetData(e,l))}}));var s=yg(),u=Sg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push($k(e,a,t.documentUpdates).next((function(e){s=e.Gi,u=e.Qi}))),!r.isEqual(Kv.min())){var l=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return sy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.$i=i,e}))}function $k(e,t,n){var r=Sg(),i=Sg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=yg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Kv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Ev("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function Yk(e,t){var n=Rv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Xk(e,t){var n=Rv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,sy.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new gk(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Jk(e,t,n){return Zk.apply(this,arguments)}function Zk(){return Zk=ee(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Rv(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),uy(e.t1)){e.next=12;break}throw e.t1;case 12:Ev("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Zk.apply(this,arguments)}function ew(e,t,n){var r=Rv(e),i=Kv.min(),a=Sg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Rv(e),i=r.Bi.get(n);return void 0!==i?sy.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,xm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Kv.min(),n?a:Sg())})).next((function(e){return tw(r,Nm(t),e),{documents:e,ji:a}}))}))}function tw(e,t,n){var r=Kv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}var nw=function(){function e(){re(this,e),this.activeTargetIds=Cg()}return ae(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),rw=function(){function e(){re(this,e),this.Fr=new nw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ae(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new nw,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),iw=function(){function e(){re(this,e)}return ae(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),aw=function(){function e(){var t=this;re(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return ae(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Ev("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ne(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){Ev("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ne(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ow={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},sw=function(){function e(t){re(this,e),this.jr=t.jr,this.Wr=t.Wr}return ae(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),uw=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ae(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new gv;o.listenOnce(dv.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case fv.NO_ERROR:var t=o.getResponseJson();Ev("Connection","XHR received:",JSON.stringify(t)),i(t);break;case fv.TIMEOUT:Ev("Connection",'RPC "'+e+'" timed out'),a(new Pv(Av.DEADLINE_EXCEEDED,"Request time out"));break;case fv.HTTP_ERROR:var n=o.getStatus();if(Ev("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Av).indexOf(t)>=0?t:Av.UNKNOWN}(r.status);a(new Pv(s,r.message))}else a(new Pv(Av.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Pv(Av.UNAVAILABLE,"Connection failed."));break;default:Iv()}}finally{Ev("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=cv(),a=hv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new yv({})),this.uo(o.initMessageHeaders,t,n),Ne()||Ae()||Ie().indexOf("Electron/")>=0||Pe()||Ie().indexOf("MSAppHost/")>=0||Re()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Ev("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),l=!1,c=!1,h=new sw({jr:function(e){c?Ev("Connection","Not sending because WebChannel is closed:",e):(l||(Ev("Connection","Opening WebChannel transport."),u.open(),l=!0),Ev("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,mv.EventType.OPEN,(function(){c||Ev("Connection","WebChannel transport opened.")})),f(u,mv.EventType.CLOSE,(function(){c||(c=!0,Ev("Connection","WebChannel transport closed"),h.eo())})),f(u,mv.EventType.ERROR,(function(e){c||(c=!0,Tv("Connection","WebChannel transport errored:",e),h.eo(new Pv(Av.UNAVAILABLE,"The operation could not be completed")))})),f(u,mv.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Nv(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ev("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=sg[e];if(void 0!==t)return dg(t)}(a),s=i.message;void 0===o&&(o=Av.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),c=!0,h.eo(new Pv(o,s)),u.close()}else Ev("Connection","WebChannel received:",n),h.no(n)}})),f(a,pv.STAT_EVENT,(function(e){e.stat===vv.PROXY?Ev("Connection","Detected buffering proxy"):e.stat===vv.NOPROXY&&Ev("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){re(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ae(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Ev("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return Ev("RestConnection","Received: ",e),e}),(function(t){throw Tv("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_v,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=ow[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function lw(){return"undefined"!=typeof document?document:null}function cw(e){return new jg(e,!0)}var hw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;re(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ae(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Ev("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),fw=function(){function e(t,n,r,i,a,o,s,u){re(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new hw(t,n)}return ae(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Av.RESOURCE_EXHAUSTED?(Sv(n.toString()),Sv("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Av.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Pv(Av.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(ee(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Ev("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(Ev("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),dw=function(e){ue(n,e);var t=fe(n);function n(e,r,i,a,o,s){var u;return re(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u}return ae(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Iv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(Nv(void 0===t||"string"==typeof t),ky.fromBase64String(t||"")):(Nv(void 0===t||t instanceof Uint8Array),ky.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Av.UNKNOWN:dg(e.code);return new Pv(t,e.message||"")}(o);n=new Pg(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=Gg(e,u.document.name),c=qg(u.document.updateTime),h=new Qy({mapValue:{fields:u.document.fields}}),f=Yy.newFoundDocument(l,c,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Rg(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Gg(e,v.document),m=v.readTime?qg(v.readTime):Kv.min(),g=Yy.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Rg([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Gg(e,w.document),b=w.removedTargetIds||[];n=new Rg([],b,_,null)}else{if(!("filter"in t))return Iv();t.filter;var x=t.filter;x.targetId;var E=x.count||0,S=new hg(E),T=x.targetId;n=new Ag(T,S)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Kv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Kv.min():t.readTime?qg(t.readTime):Kv.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Yg(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=tm(r)?{documents:ek(e,r)}:{query:tk(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=zg(e,t.resumeToken):t.snapshotVersion.compareTo(Kv.min())>0&&(n.readTime=Vg(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Iv()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=Yg(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(fw),pw=function(e){ue(n,e);var t=fe(n);function n(e,r,i,a,o,s){var u;return re(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u.Wo=!1,u}return ae(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Jo(le(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Nv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Nv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?qg(e.updateTime):qg(t);return n.isEqual(Kv.min())&&(n=qg(t)),new Gm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=qg(e.commitTime);return this.listener.Jo(n,t)}return Nv(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Yg(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Zg(t.wt,e)}))};this.Mo(n)}}]),n}(fw),vw=function(e){ue(n,e);var t=fe(n);function n(e,r,i,a){var o;return re(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return ae(n,[{key:"tu",value:function(){if(this.Zo)throw new Pv(Av.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.bo.ro(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Av.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Pv(Av.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),s=o[0],u=o[1];return i.bo.ao(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Av.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Pv(Av.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ae((function e(){re(this,e)}))}()),yw=function(){function e(t,n){re(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ae(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Sv(t),this.su=!1):Ev("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),mw=ae((function e(t,n,r,i,a){var o=this;re(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Iw(o),!e.t0){e.next=5;break}return Ev("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Rv(t)).lu.add(4),e.next=4,ww(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,gw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new yw(r,i)}));function gw(e){return kw.apply(this,arguments)}function kw(){return kw=ee(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Iw(t)){e.next=18;break}n=ne(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),kw.apply(this,arguments)}function ww(e){return _w.apply(this,arguments)}function _w(){return _w=ee(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ne(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),_w.apply(this,arguments)}function bw(e,t){var n=Rv(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Cw(n)?Tw(n):r_(n).Co()&&Ew(n,t))}function xw(e,t){var n=Rv(e),r=r_(n);n.hu.delete(t),r.Co()&&Sw(n,t),0===n.hu.size&&(r.Co()?r.ko():Iw(n)&&n._u.set("Unknown"))}function Ew(e,t){e.wu.Nt(t.targetId),r_(e).Qo(t)}function Sw(e,t){e.wu.Nt(t),r_(e).jo(t)}function Tw(e){e.wu=new Dg({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),r_(e).start(),e._u.iu()}function Cw(e){return Iw(e)&&!r_(e).Do()&&e.hu.size>0}function Iw(e){return 0===Rv(e).lu.size}function Nw(e){e.wu=void 0}function Rw(e){return Aw.apply(this,arguments)}function Aw(){return Aw=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Ew(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Pw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Nw(t),Cw(t)?(t._u.uu(n),Tw(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Dw(e,t,n){return Lw.apply(this,arguments)}function Lw(){return Lw=ee(J().mark((function e(t,n,r){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Pg&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ee(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ne(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ev("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Mw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Rg?t.wu.Ut(n):n instanceof Ag?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Kv.min())){e.next=29;break}return e.prev=14,e.next=17,Gk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(ky.EMPTY_BYTE_STRING,n.snapshotVersion)),Sw(e,t);var r=new gk(n.target,t,1,n.sequenceNumber);Ew(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ev("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Mw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Lw.apply(this,arguments)}function Mw(e,t,n){return Fw.apply(this,arguments)}function Fw(){return Fw=ee(J().mark((function e(t,n,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uy(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,ww(t);case 5:t._u.set("Offline"),r||(r=function(){return Gk(t.localStore)}),t.asyncQueue.enqueueRetryable(ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ev("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,gw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Fw.apply(this,arguments)}function Uw(e,t){return t().catch((function(n){return Mw(e,n,t)}))}function jw(e){return Vw.apply(this,arguments)}function Vw(){return Vw=ee(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Rv(t),r=i_(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!zw(n)){e.next=19;break}return e.prev=3,e.next=6,Yk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Bw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Mw(n,e.t0);case 17:e.next=2;break;case 19:qw(n)&&Ww(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Vw.apply(this,arguments)}function zw(e){return Iw(e)&&e.au.length<10}function Bw(e,t){e.au.push(t);var n=i_(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function qw(e){return Iw(e)&&!i_(e).Do()&&e.au.length>0}function Ww(e){i_(e).start()}function Hw(e){return Kw.apply(this,arguments)}function Kw(){return Kw=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i_(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}function Gw(e){return Qw.apply(this,arguments)}function Qw(){return Qw=ee(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i_(t),r=ne(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}function $w(e,t,n){return Yw.apply(this,arguments)}function Yw(){return Yw=ee(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=yk.from(i,n,r),e.next=3,Uw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,jw(t);case 5:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function Xw(e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=ee(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&i_(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ee(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fg(i=n.code)||i===Av.ABORTED){e.next=7;break}return r=t.au.shift(),i_(t).No(),e.next=5,Uw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,jw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:qw(t)&&Ww(t);case 5:case"end":return e.stop()}}),e)}))),Jw.apply(this,arguments)}function Zw(e,t){return e_.apply(this,arguments)}function e_(){return e_=ee(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Rv(t)).asyncQueue.verifyOperationInProgress(),Ev("RemoteStore","RemoteStore received new credentials"),i=Iw(r),r.lu.add(3),e.next=6,ww(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,gw(r);case 12:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}function t_(e,t){return n_.apply(this,arguments)}function n_(){return n_=ee(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rv(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,gw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,ww(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e){return e.mu||(e.mu=function(e,t,n){var r=Rv(e);return r.tu(),new dw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Rw.bind(null,e),Jr:Pw.bind(null,e),Go:Dw.bind(null,e)}),e.fu.push(function(){var t=ee(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Cw(e)?Tw(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Nw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function i_(e){return e.gu||(e.gu=function(e,t,n){var r=Rv(e);return r.tu(),new pw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Hw.bind(null,e),Jr:Xw.bind(null,e),Yo:Gw.bind(null,e),Jo:$w.bind(null,e)}),e.fu.push(function(){var t=ee(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,jw(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(Ev("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var a_=function(){function e(t,n,r,i,a){re(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ov,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ae(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pv(Av.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function o_(e,t){if(Sv("AsyncQueue","".concat(t,": ").concat(e)),uy(e))return new Pv(Av.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var s_=function(){function e(t){re(this,e),this.comparator=t?function(e,n){return t(e,n)||Xv.comparator(e.key,n.key)}:function(e,t){return Xv.comparator(e.key,t.key)},this.keyedMap=gg(),this.sortedSet=new dy(this.comparator)}return ae(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),u_=function(){function e(){re(this,e),this.yu=new dy(Xv.comparator)}return ae(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Iv():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),l_=function(){function e(t,n,r,i,a,o,s,u){re(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return ae(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,s_.emptySet(n),a,r,i,!0,!1)}}]),e}(),c_=ae((function e(){re(this,e),this.Iu=void 0,this.listeners=[]})),h_=ae((function e(){re(this,e),this.queries=new pg((function(e){return Tm(e)}),Sm),this.onlineState="Unknown",this.Tu=new Set}));function f_(e,t){return d_.apply(this,arguments)}function d_(){return d_=ee(J().mark((function e(t,n){var r,i,a,o,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rv(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new c_),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=o_(e.t0,"Initialization of query '".concat(Cm(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&g_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),d_.apply(this,arguments)}function p_(e,t){return v_.apply(this,arguments)}function v_(){return v_=ee(J().mark((function e(t,n){var r,i,a,o,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rv(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function y_(e,t){var n,r=Rv(e),i=!1,a=ne(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var l,c=ne(u.listeners);try{for(c.s();!(l=c.n()).done;){l.value.Au(o)&&(i=!0)}}catch(h){c.e(h)}finally{c.f()}u.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&g_(r)}function m_(e,t,n){var r=Rv(e),i=r.queries.get(t);if(i){var a,o=ne(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function g_(e){e.Tu.forEach((function(e){e.next()}))}var k_=function(){function e(t,n,r){re(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ae(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ne(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new l_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=l_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}();var w_=ae((function e(t){re(this,e),this.key=t})),__=ae((function e(t){re(this,e),this.key=t})),b_=function(){function e(t,n){re(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Sg(),this.mutatedKeys=Sg(),this.Lu=Rm(t),this.Uu=new s_(this.Lu)}return ae(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new u_,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),h=Im(n.query,t)?t:null,f=!!c&&n.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(c,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||l&&n.Lu(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),p=!0):c&&!h&&(r.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Oi:s,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Iv()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==a.length||u?{snapshot:new l_(this.query,e.Uu,i,a,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new u_,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Sg(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new __(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new w_(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=Sg();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return l_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),x_=ae((function e(t,n,r){re(this,e),this.query=t,this.targetId=n,this.view=r})),E_=ae((function e(t){re(this,e),this.key=t,this.Xu=!1})),S_=function(){function e(t,n,r,i,a,o){re(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new pg((function(e){return Tm(e)}),Sm),this.ec=new Map,this.nc=new Set,this.sc=new dy(Xv.comparator),this.ic=new Map,this.rc=new Ak,this.oc={},this.uc=new Map,this.cc=Sk.Rn(),this.onlineState="Unknown",this.ac=void 0}return ae(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function T_(e,t){return C_.apply(this,arguments)}function C_(){return C_=ee(J().mark((function e(t,n){var r,i,a,o,s,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=tb(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Xk(r.localStore,xm(n));case 8:return s=e.sent,r.isPrimaryClient&&bw(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,I_(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}function I_(e,t,n,r){return N_.apply(this,arguments)}function N_(){return N_=ee(J().mark((function e(t,n,r,i){var a,o,s,u,l,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=ee(J().mark((function e(t,n,r,i){var a,o,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,ew(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(G_(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ew(t.localStore,n,!0);case 3:return a=e.sent,o=new b_(n,a.ji),s=o.Ku(a.documents),u=Ng.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=o.applyChanges(s,t.isPrimaryClient,u),G_(t,r,l.zu),c=new x_(n,r,o),e.abrupt("return",(t.tc.set(n,c),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),N_.apply(this,arguments)}function R_(e,t){return A_.apply(this,arguments)}function A_(){return A_=ee(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rv(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!Sm(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Jk(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),xw(r.remoteStore,i.targetId),H_(r,i.targetId)})).catch(ay);case 9:e.next=14;break;case 11:return H_(r,i.targetId),e.next=14,Jk(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function P_(e,t,n){return O_.apply(this,arguments)}function O_(){return O_=ee(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nb(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Rv(e),a=Hv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Sg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=yg(),u=Sg();return i.Ui.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=ne(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=eg(l,n.get(l.key).overlayedDocument);null!=c&&s.push(new rg(l.key,c,$y(c.value.mapValue),Qm.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:kg(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new dy(qv)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Y_(i,a.changes);case 9:return e.next=11,jw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=o_(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),O_.apply(this,arguments)}function D_(e,t){return L_.apply(this,arguments)}function L_(){return L_=ee(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rv(t),e.prev=1,e.next=4,Qk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(Nv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Nv(n.Xu):e.removedDocuments.size>0&&(Nv(n.Xu),n.Xu=!1))})),e.next=8,Y_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ay(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),L_.apply(this,arguments)}function M_(e,t,n){var r=Rv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Rv(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ne(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&g_(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function F_(e,t,n){return U_.apply(this,arguments)}function U_(){return U_=ee(J().mark((function e(t,n,r){var i,a,o,s,u,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Rv(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new dy(Xv.comparator)).insert(o,Yy.newNoDocument(o,Kv.min())),u=Sg().add(o),l=new Ig(Kv.min(),new Map,new yy(qv),s,u),e.next=9,D_(i,l);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),$_(i),e.next=16;break;case 14:return e.next=16,Jk(i.localStore,n,!1).then((function(){return H_(i,n,r)})).catch(ay);case 16:case"end":return e.stop()}}),e)}))),U_.apply(this,arguments)}function j_(e,t){return V_.apply(this,arguments)}function V_(){return V_=ee(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rv(t),i=n.batch.batchId,e.prev=1,e.next=4,Kk(r.localStore,n);case 4:return a=e.sent,W_(r,i,null),q_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Y_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ay(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),V_.apply(this,arguments)}function z_(e,t,n){return B_.apply(this,arguments)}function B_(){return B_=ee(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rv(t),e.prev=1,e.next=4,function(e,t){var n=Rv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Nv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,W_(i,n,r),q_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Y_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ay(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),B_.apply(this,arguments)}function q_(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function W_(e,t,n){var r=Rv(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function H_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ne(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||K_(e,t)}))}function K_(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(xw(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),$_(e))}function G_(e,t,n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof w_?(e.rc.addReference(a.key,t),Q_(e,a)):a instanceof __?(Ev("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||K_(e,a.key)):Iv()}}catch(o){i.e(o)}finally{i.f()}}function Q_(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(Ev("SyncEngine","New document in limbo: "+n),e.nc.add(r),$_(e))}function $_(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Xv(Qv.fromString(t)),r=e.cc.next();e.ic.set(r,new E_(n)),e.sc=e.sc.insert(n,r),bw(e.remoteStore,new gk(xm(gm(n.path)),r,2,ly.ot))}}function Y_(e,t,n){return X_.apply(this,arguments)}function X_(){return X_=ee(J().mark((function e(t,n,r){var i,a,o,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Rv(t),a=[],o=[],s=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){s.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Vk.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Zu.Go(a),e.next=9,function(){var e=ee(J().mark((function e(t,n){var r,i,a,o,s,u,l,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rv(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return sy.forEach(n,(function(t){return sy.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return sy.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),uy(e.t0)){e.next=10;break}throw e.t0;case 10:Ev("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ne(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.$i.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),r.$i=r.$i.insert(s,c))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function J_(e,t){return Z_.apply(this,arguments)}function Z_(){return Z_=ee(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Rv(t)).currentUser.isEqual(n)){e.next=11;break}return Ev("SyncEngine","User change. New user:",n.toKey()),e.next=5,Wk(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new Pv(Av.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Y_(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),Z_.apply(this,arguments)}function eb(e,t){var n=Rv(e),r=n.ic.get(t);if(r&&r.Xu)return Sg().add(r.key);var i=Sg(),a=n.ec.get(t);if(!a)return i;var o,s=ne(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n.tc.get(u);i=i.unionWith(l.view.qu)}}catch(c){s.e(c)}finally{s.f()}return i}function tb(e){var t=Rv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=D_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=eb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=F_.bind(null,t),t.Zu.Go=y_.bind(null,t.eventManager),t.Zu.lc=m_.bind(null,t.eventManager),t}function nb(e){var t=Rv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=j_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=z_.bind(null,t),t}var rb=function(){function e(){re(this,e),this.synchronizeTabs=!1}return ae(e,[{key:"initialize",value:function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=cw(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return qk(this.persistence,new zk,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Fk(jk.Ms,this.wt)}},{key:"dc",value:function(e){return new rw}},{key:"terminate",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ib=function(){function e(){re(this,e)}return ae(e,[{key:"initialize",value:function(){var e=ee(J().mark((function e(t,n){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return M_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=J_.bind(null,this.syncEngine),e.next=12,t_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new h_}},{key:"createDatastore",value:function(e){var t,n=cw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new uw(t));return function(e,t,n,r){return new vw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return M_(o.syncEngine,e,0)},a=aw.V()?new aw:new iw,new mw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new S_(e,t,n,r,i,a);return o&&(s.ac=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ee(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rv(t),Ev("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,ww(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var ab=function(){function e(t){re(this,e),this.observer=t,this.muted=!1}return ae(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ob=function(){function e(t,n,r,i){var a=this;re(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wv.UNAUTHENTICATED,this.clientId=Bv.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ev("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ev("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ae(e,[{key:"getConfiguration",value:function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Pv(Av.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ov;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ee(J().mark((function n(){var r;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=o_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function sb(e,t){return ub.apply(this,arguments)}function ub(){return ub=ee(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ev("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Wk(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ub.apply(this,arguments)}function lb(e,t){return cb.apply(this,arguments)}function cb(){return cb=ee(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,hb(t);case 3:return r=e.sent,Ev("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Zw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Zw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function hb(e){return fb.apply(this,arguments)}function fb(){return fb=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Ev("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,sb(t,new rb);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),fb.apply(this,arguments)}function db(e){return pb.apply(this,arguments)}function pb(){return pb=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Ev("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,lb(t,new ib);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(e){return db(e).then((function(e){return e.syncEngine}))}function yb(e){return mb.apply(this,arguments)}function mb(){return mb=ee(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,db(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=T_.bind(null,n.syncEngine),r.onUnlisten=R_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),mb.apply(this,arguments)}var gb=new Map;function kb(e,t,n){if(!n)throw new Pv(Av.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wb(e){if(!Xv.isDocumentKey(e))throw new Pv(Av.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function _b(e){if(Xv.isDocumentKey(e))throw new Pv(Av.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function bb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Iv()}function xb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Pv(Av.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=bb(e);throw new Pv(Av.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var Eb=function(){function e(t){var n;if(re(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Pv(Av.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Pv(Av.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Pv(Av.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ae(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Sb=function(){function e(t,n,r){re(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eb({}),this._settingsFrozen=!1,t instanceof Iy?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Pv(Av.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iy(e.options.projectId)}(t))}return ae(e,[{key:"app",get:function(){if(!this._app)throw new Pv(Av.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Pv(Av.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Lv;switch(e.type){case"gapi":var t=e.client;return Nv(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Uv(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Pv(Av.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=gb.get(e);t&&(Ev("ComponentProvider","Removing Datastore"),gb.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var Tb=function(){function e(t,n,r){re(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ae(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Ib(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Cb=function(){function e(t,n,r){re(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ae(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Ib=function(e){ue(n,e);var t=fe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,e,r,gm(i)))._path=i,a.type="collection",a}return ae(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Tb(this.firestore,null,new Xv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Cb);function Nb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=tt(e),kb("collection","path",t),e instanceof Sb){var a=Qv.fromString.apply(Qv,[t].concat(r));return _b(a),new Ib(e,null,a)}if(!(e instanceof Tb||e instanceof Ib))throw new Pv(Av.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qv.fromString.apply(Qv,[t].concat(r)));return _b(o),new Ib(e.firestore,null,o)}function Rb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=tt(e),1===arguments.length&&(t=Bv.I()),kb("doc","path",t),e instanceof Sb){var a=Qv.fromString.apply(Qv,[t].concat(r));return wb(a),new Tb(e,null,new Xv(a))}if(!(e instanceof Tb||e instanceof Ib))throw new Pv(Av.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qv.fromString.apply(Qv,[t].concat(r)));return wb(o),new Tb(e.firestore,e instanceof Ib?e.converter:null,new Xv(o))}var Ab=function(){function e(){var t=this;re(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new hw(this,"async_queue_retry"),this.Kc=function(){var e=lw();e&&Ev("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=lw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return ae(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=lw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new Ov;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=ee(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),uy(e.t0)){e.next=12;break}throw e.t0;case 12:Ev("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Sv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=a_.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&Iv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=ee(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=ne(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ne(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function Pb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ne(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Ob=function(e){ue(n,e);var t=fe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Ab,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ae(n,[{key:"_terminate",value:function(){return this._firestoreClient||Lb(this),this._firestoreClient.terminate()}}]),n}(Sb);function Db(e){return e._firestoreClient||Lb(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Lb(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Cy(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ob(e._authCredentials,e._appCheckCredentials,e._queue,r)}var Mb=function(){function e(){re(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Pv(Av.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yv(n)}return ae(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Fb=function(){function e(t){re(this,e),this._byteString=t}return ae(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ky.fromBase64String(t))}catch(t){throw new Pv(Av.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ky.fromUint8Array(t))}}]),e}(),Ub=ae((function e(t){re(this,e),this._methodName=t})),jb=function(){function e(t,n){if(re(this,e),!isFinite(t)||t<-90||t>90)throw new Pv(Av.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Pv(Av.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ae(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return qv(this._lat,e._lat)||qv(this._long,e._long)}}]),e}(),Vb=/^__.*__$/,zb=function(){function e(t,n,r){re(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ae(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new rg(e,this.data,this.fieldMask,t,this.fieldTransforms):new ng(e,this.data,t,this.fieldTransforms)}}]),e}(),Bb=function(){function e(t,n,r){re(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ae(e,[{key:"toMutation",value:function(e,t){return new rg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function qb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Iv()}}var Wb=function(){function e(t,n,r,i,a,o){re(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ae(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return ax(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(qb(this.Zc)&&Vb.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),Hb=function(){function e(t,n,r){re(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||cw(t)}return ae(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wb({Zc:e,methodName:t,ca:n,path:Yv.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function Kb(e){var t=e._freezeSettings(),n=cw(e._databaseId);return new Hb(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Gb(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);tx("Data must be an object, but it was:",o,r);var s,u,l=Zb(r,o);if(a.merge)s=new gy(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var c,h=[],f=ne(a.mergeFields);try{for(f.s();!(c=f.n()).done;){var d=c.value,p=nx(t,d,n);if(!o.contains(p))throw new Pv(Av.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));ox(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new gy(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new zb(new Qy(l),s,u)}var Qb=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ub);function $b(e,t,n,r){var i=e.aa(1,t,n);tx("Data must be an object, but it was:",i,r);var a=[],o=Qy.empty();hy(r,(function(e,r){var s=ix(t,e,n);r=tt(r);var u=i.ia(s);if(r instanceof Qb)a.push(s);else{var l=Jb(r,u);null!=l&&(a.push(s),o.set(s,l))}}));var s=new gy(a);return new Bb(o,s,i.fieldTransforms)}function Yb(e,t,n,r,i,a){var o=e.aa(1,t,n),s=[nx(t,r,n)],u=[i];if(a.length%2!=0)throw new Pv(Av.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)s.push(nx(t,a[l])),u.push(a[l+1]);for(var c=[],h=Qy.empty(),f=s.length-1;f>=0;--f)if(!ox(c,s[f])){var d=s[f],p=u[f];p=tt(p);var v=o.ia(d);if(p instanceof Qb)c.push(d);else{var y=Jb(p,v);null!=y&&(c.push(d),h.set(d,y))}}var m=new gy(c);return new Bb(h,m,o.fieldTransforms)}function Xb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Jb(n,e.aa(r?4:3,t))}function Jb(e,t){if(ex(e=tt(e)))return tx("Unsupported field value:",t,e),Zb(e,t);if(e instanceof Ub)return function(e,t){if(!qb(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ne(e);try{for(a.s();!(n=a.n()).done;){var o=Jb(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=tt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Dm(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Hv.fromDate(e);return{timestampValue:Vg(t.wt,n)}}if(e instanceof Hv){var r=new Hv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Vg(t.wt,r)}}if(e instanceof jb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fb)return{bytesValue:zg(t.wt,e._byteString)};if(e instanceof Tb){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Wg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(bb(e)))}(e,t)}function Zb(e,t){var n={};return fy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hy(e,(function(e,r){var i=Jb(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ex(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Hv||e instanceof jb||e instanceof Fb||e instanceof Tb||e instanceof Ub)}function tx(e,t,n){if(!ex(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=bb(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function nx(e,t,n){if((t=tt(t))instanceof Mb)return t._internalPath;if("string"==typeof t)return ix(e,t);throw ax("Field path arguments must be of type string or ",e,!1,void 0,n)}var rx=new RegExp("[~\\*/\\[\\]]");function ix(e,t,n){if(t.search(rx)>=0)throw ax("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return de(Mb,te(t.split(".")))._internalPath}catch(r){throw ax("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ax(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Pv(Av.INVALID_ARGUMENT,s+e+u)}function ox(e,t){return e.some((function(e){return e.isEqual(t)}))}var sx=function(){function e(t,n,r,i,a){re(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ae(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Tb(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ux(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(lx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ux=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"data",value:function(){return Jo(le(n.prototype),"data",this).call(this)}}]),n}(sx);function lx(e,t){return"string"==typeof t?ix(e,t):t instanceof Mb?t._internalPath:t._delegate._internalPath}var cx=function(){function e(t,n){re(this,e),this.hasPendingWrites=t,this.fromCache=n}return ae(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),hx=function(e){ue(n,e);var t=fe(n);function n(e,r,i,a,o,s){var u;return re(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return ae(n,[{key:"exists",value:function(){return Jo(le(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new fx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(lx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(sx),fx=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Jo(le(n.prototype),"data",this).call(this,e)}}]),n}(hx),dx=function(){function e(t,n,r,i){re(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new cx(i.hasPendingWrites,i.fromCache),this.query=r}return ae(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new fx(n._firestore,n._userDataWriter,r.key,r,new cx(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pv(Av.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new fx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new fx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:px(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function px(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Iv()}}function vx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Pv(Av.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yx=ae((function e(){re(this,e)}));function mx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var gx=function(e){ue(n,e);var t=fe(n);function n(e,r,i){var a;return re(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return ae(n,[{key:"_apply",value:function(e){var t=Kb(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Pv(Av.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){bx(o,a);var u,l=[],c=ne(o);try{for(c.s();!(u=c.n()).done;){var h=u.value;l.push(_x(r,e,h))}}catch(d){c.e(d)}finally{c.f()}s={arrayValue:{values:l}}}else s=_x(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||bx(o,a),s=Xb(n,"where",o,"in"===a||"not-in"===a);var f=nm.create(i,a,s);return function(e,t){if(t.ht()){var n=wm(e);if(null!==n&&!n.isEqual(t.field))throw new Pv(Av.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=km(e);null!==r&&xx(e,t.field,r)}var i=function(e,t){var n,r=ne(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Pv(Av.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Pv(Av.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Cb(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new ym(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(yx);var kx=function(e){ue(n,e);var t=fe(n);function n(e,r){var i;return re(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return ae(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Pv(Av.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Pv(Av.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new fm(t,n);return function(e,t){if(null===km(e)){var n=wm(e);null!==n&&xx(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new Cb(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ym(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(yx);function wx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=lx("orderBy",e);return new kx(r,n)}function _x(e,t,n){if("string"==typeof(n=tt(n))){if(""===n)throw new Pv(Av.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_m(t)&&-1!==n.indexOf("/"))throw new Pv(Av.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Qv.fromString(n));if(!Xv.isDocumentKey(r))throw new Pv(Av.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Vy(e,new Xv(r))}if(n instanceof Tb)return Vy(e,n._key);throw new Pv(Av.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(bb(n),"."))}function bx(e,t){if(!Array.isArray(e)||0===e.length)throw new Pv(Av.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Pv(Av.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function xx(e,t,n){if(!n.isEqual(t))throw new Pv(Av.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Ex=function(){function e(){re(this,e)}return ae(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Oy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return by(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Iv()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return hy(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new jb(by(e.latitude),by(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Sy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ty(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=_y(e);return new Hv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Qv.fromString(e);Nv(hk(n));var r=new Iy(n.get(1),n.get(3)),i=new Xv(n.popFirst(5));return r.isEqual(t)||Sv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Sx(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Tx=function(e){ue(n,e);var t=fe(n);function n(e){var r;return re(this,n),(r=t.call(this)).firestore=e,r}return ae(n,[{key:"convertBytes",value:function(e){return new Fb(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tb(this.firestore,null,t)}}]),n}(Ex);function Cx(e,t,n){e=xb(e,Tb);for(var r=xb(e.firestore,Ob),i=Kb(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return Ax(r,[("string"==typeof(t=tt(t))||t instanceof Mb?Yb(i,"updateDoc",e._key,t,n,o):$b(i,"updateDoc",e._key,t)).toMutation(e._key,Qm.exists(!0))])}function Ix(e){return Ax(xb(e.firestore,Ob),[new lg(e._key,Qm.none())])}function Nx(e,t){var n=xb(e.firestore,Ob),r=Rb(e),i=Sx(e.converter,t);return Ax(n,[Gb(Kb(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Qm.exists(!1))]).then((function(){return r}))}function Rx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=tt(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||Pb(n[u])||(s=n[u],u++);var l,c,h,f={includeMetadataChanges:s.includeMetadataChanges};if(Pb(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Tb)c=xb(e.firestore,Ob),h=gm(e._key.path),l={next:function(t){n[u]&&n[u](Px(c,e,t))},error:n[u+1],complete:n[u+2]};else{var p=xb(e,Cb);c=xb(p.firestore,Ob),h=p._query;var v=new Tx(c);l={next:function(e){n[u]&&n[u](new dx(c,v,p,e))},error:n[u+1],complete:n[u+2]},vx(e._query)}return function(e,t,n,r){var i=new ab(r),a=new k_(t,i,n);return e.asyncQueue.enqueueAndForget(ee(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=f_,t.next=3,yb(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(ee(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=p_,t.next=3,yb(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Db(c),h,f,l)}function Ax(e,t){return function(e,t){var n=new Ov;return e.asyncQueue.enqueueAndForget(ee(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P_,r.next=3,vb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Db(e),t)}function Px(e,t,n){var r=n.docs.get(t._key),i=new Tx(e);return new hx(e,i,t._key,r,new cx(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_v="9.8.4",zt(new nt("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Ob(i,new Mv(e.getProvider("auth-internal")),new Vv(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Qt(kv,"3.4.11",e),Qt(kv,"3.4.11","esm2017")}();var Ox="firebasestorage.googleapis.com",Dx=function(e){ue(n,e);var t=fe(n);function n(e,r){var i;return re(this,n),(i=t.call(this,Lx(e),"Firebase Storage: ".concat(r," (").concat(Lx(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(oe(i),n.prototype),i}return ae(n,[{key:"_codeEquals",value:function(e){return Lx(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(De);function Lx(e){return"storage/"+e}function Mx(){return new Dx("unknown","An unknown error occurred, please check the error payload for server response.")}function Fx(){return new Dx("canceled","User canceled the upload/download.")}function Ux(){return new Dx("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function jx(e){return new Dx("invalid-argument",e)}function Vx(){return new Dx("app-deleted","The Firebase app was deleted.")}function zx(e,t){return new Dx("invalid-format","String does not match format '"+e+"': "+t)}function Bx(e){throw new Dx("internal-error","Internal error: "+e)}var qx,Wx=function(){function e(t,n){re(this,e),this.bucket=t,this.path_=n}return ae(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new Dx("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Ox?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],l=0;l<u.length;l++){var c=u[l],h=c.regex.exec(t);if(h){var f=h[c.indices.bucket],d=h[c.indices.path];d||(d=""),r=new e(f,d),c.postModify(r);break}}if(null==r)throw function(e){return new Dx("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Hx=function(){function e(t){re(this,e),this.promise_=Promise.reject(t)}return ae(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Kx(e){return"string"===typeof e||e instanceof String}function Gx(e){return Qx()&&e instanceof Blob}function Qx(){return"undefined"!==typeof Blob}function $x(e,t,n,r){if(r<t)throw jx("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw jx("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Yx(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Xx(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(qx||(qx={}));var Jx=function(){function e(t,n,r,i,a,o,s,u,l,c,h){var f=this;re(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return ae(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=Mx();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?Vx():Fx());else i(new Dx("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Zx(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(l)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void c.call.apply(c,[null,e].concat(n));var a;if(u()||o)return f(),void c.call.apply(c,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),l||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Zx(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===qx.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new Zx(o,r))}else{var s=r.getErrorCode()===qx.ABORT;t(!1,new Zx(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),Zx=ae((function e(t,n,r){re(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function eE(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function tE(){for(var e=eE(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Qx())return new Blob(n);throw new Dx("unsupported-environment","This browser doesn't seem to support creating Blobs")}var nE="raw",rE="base64",iE="base64url",aE="data_url",oE=ae((function e(t,n){re(this,e),this.data=t,this.contentType=n||null}));function sE(e,t){switch(e){case nE:return new oE(uE(t));case rE:case iE:return new oE(lE(e,t));case aE:return new oE(function(e){var t=new cE(e);return t.base64?lE(rE,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw zx(aE,"Malformed data URL.")}return uE(t)}(t.rest)}(t),new cE(t).contentType)}throw Mx()}function uE(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function lE(e,t){switch(e){case rE:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw zx(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case iE:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw zx(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(l){throw zx(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var cE=ae((function e(t){re(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw zx(aE,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var hE=function(){function e(t,n){re(this,e);var r=0,i="";Gx(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return ae(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Gx(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Qx()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(tE.apply(null,i))}var a=n.map((function(e){return Kx(e)?sE(nE,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function fE(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function dE(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function pE(e,t){return t}var vE=ae((function e(t,n,r,i){re(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||pE})),yE=null;function mE(){if(yE)return yE;var e=[];e.push(new vE("bucket")),e.push(new vE("generation")),e.push(new vE("metageneration")),e.push(new vE("name","fullPath",!0));var t=new vE("name");t.xform=function(e,t){return function(e){return!Kx(e)||e.length<2?e:dE(e)}(t)},e.push(t);var n=new vE("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new vE("timeCreated")),e.push(new vE("updated")),e.push(new vE("md5Hash",null,!0)),e.push(new vE("cacheControl",null,!0)),e.push(new vE("contentDisposition",null,!0)),e.push(new vE("contentEncoding",null,!0)),e.push(new vE("contentLanguage",null,!0)),e.push(new vE("contentType",null,!0)),e.push(new vE("metadata","customMetadata",!0)),yE=e}function gE(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Wx(n,r);return t._makeStorageReference(i)}})}(r,e),r}function kE(e,t,n){var r=fE(t);return null===r?null:gE(e,r,n)}function wE(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var _E=ae((function e(t,n,r,i){re(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function bE(e){if(!e)throw Mx()}function xE(e,t){return function(n,r){var i=kE(e,r,t);return bE(null!==i),i}}function EE(e,t){return function(n,r){var i=kE(e,r,t);return bE(null!==i),function(e,t,n,r){var i=fE(t);if(null===i)return null;if(!Kx(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Yx("/b/"+o(i)+"/o/"+o(a),n,r)+Xx({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function SE(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Dx("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Dx("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Dx("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Dx("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function TE(e){var t=SE(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Dx("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function CE(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function IE(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=CE(t,r,i),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wE(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+s+"--",h=hE.getBlob(l,r,c);if(null===h)throw Ux();var f={name:u.fullPath},d=Yx(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new _E(d,"POST",xE(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=SE(t),v}var NE=function(){function e(){var t=this;re(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qx.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=qx.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=qx.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return ae(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Bx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Bx("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Bx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Bx("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Bx("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),RE=function(e){ue(n,e);var t=fe(n);function n(){return re(this,n),t.apply(this,arguments)}return ae(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(NE);function AE(){return new RE}var PE=function(){function e(t,n){re(this,e),this._service=t,this._location=n instanceof Wx?n:Wx.makeFromUrl(n,t.host)}return ae(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Wx(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return dE(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Wx(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new Dx("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function OE(e,t,n){e._throwIfRoot("uploadBytes");var r=IE(e.storage,e._location,mE(),new hE(t,!0),n);return e.storage.makeRequestWithTokens(r,AE).then((function(t){return{metadata:t,ref:e}}))}function DE(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Yx(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new _E(r,"GET",EE(e,n),i);return a.errorHandler=TE(t),a}(e.storage,e._location,mE());return e.storage.makeRequestWithTokens(t,AE).then((function(e){if(null===e)throw new Dx("no-download-url","The given file does not have any download URLs.");return e}))}function LE(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Yx(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new _E(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=TE(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,AE)}function ME(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Wx(e._location.bucket,n);return new PE(e.storage,r)}function FE(e,t){if(e instanceof VE){var n=e;if(null==n._bucket)throw new Dx("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new PE(n,n._bucket);return null!=t?FE(r,t):r}return void 0!==t?ME(e,t):e}function UE(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof VE)return new PE(e,t);throw jx("To use ref(service, url), the first argument must be a Storage instance.")}return FE(e,t)}function jE(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:Wx.makeFromBucketSpec(n,e)}var VE=function(){function e(t,n,r,i,a){re(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Ox,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Wx.makeFromBucketSpec(i,this._host):jE(this._host,this.app.options)}return ae(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Wx.makeFromBucketSpec(this._url,e):this._bucket=jE(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){$x("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){$x("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ee(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ee(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new PE(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new Hx(Vx());var a=function(e,t,n,r,i,a){var o=Xx(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Jx(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=ee(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),zE="@firebase/storage",BE="0.9.8",qE="storage";function WE(e,t,n,r){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nE,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");var i=sE(n,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),OE(e,i.data,a)}(e=tt(e),t,n,r)}function HE(e){return DE(e=tt(e))}function KE(e){return LE(e=tt(e))}function GE(e,t){return UE(e=tt(e),t)}function QE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt(),t=arguments.length>1?arguments[1]:void 0,n=Bt(e=tt(e),qE),r=n.getImmediate({identifier:t});return r}function $E(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new VE(r,i,a,n,Kt)}zt(new nt(qE,$E,"PUBLIC").setMultipleInstances(!0)),Qt(zE,BE,""),Qt(zE,BE,"esm2017");var YE,XE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Mt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Wt.create("bad-app-name",{appName:String(i)});var a=Ut.get(i);if(a){if(He(e,a.options)&&He(r,a.config))return a;throw Wt.create("duplicate-app",{appName:i})}var o,s=new st(i),u=ne(jt.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s.addComponent(l)}}catch(h){u.e(h)}finally{u.f()}var c=new Ht(e,r,s);return Ut.set(i,c),c}({apiKey:"AIzaSyChxZANunZ5GNHOAEbc5IAZ6iDBLlaFdrw",authDomain:"k-twitter-5c668.firebaseapp.com",databaseURL:"https://k-twitter-5c668.firebaseio.com",projectId:"k-twitter-5c668",storageBucket:"k-twitter-5c668.appspot.com",messagingSenderId:"90818870249",appId:"1:90818870249:web:0da5980ea6523225d1e978"}),JE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt(),t=Bt(e,"auth");return t.isInitialized()?t.getImmediate():ys(e,{popupRedirectResolver:Zc,persistence:[$l,El,Tl]})}(),ZE=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt(),t=arguments.length>1?arguments[1]:void 0;Bt(e,"database").getImmediate({identifier:t})}(XE),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt();return Bt(e,"firestore").getImmediate()}(XE)),eS=(QE(XE),["title","titleId"]);function tS(){return tS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tS.apply(this,arguments)}function nS(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rS(e,n){var r=e.title,i=e.titleId,a=nS(e,eS);return t.createElement("svg",tS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"current",height:"current",ref:n,"aria-labelledby":i},a),r?t.createElement("title",{id:i},r):null,YE||(YE=t.createElement("path",{fill:"current",d:"M42,12.429c-1.323,0.586-2.746,0.977-4.247,1.162c1.526-0.906,2.7-2.351,3.251-4.058c-1.428,0.837-3.01,1.452-4.693,1.776C34.967,9.884,33.05,9,30.926,9c-4.08,0-7.387,3.278-7.387,7.32c0,0.572,0.067,1.129,0.193,1.67c-6.138-0.308-11.582-3.226-15.224-7.654c-0.64,1.082-1,2.349-1,3.686c0,2.541,1.301,4.778,3.285,6.096c-1.211-0.037-2.351-0.374-3.349-0.914c0,0.022,0,0.055,0,0.086c0,3.551,2.547,6.508,5.923,7.181c-0.617,0.169-1.269,0.263-1.941,0.263c-0.477,0-0.942-0.054-1.392-0.135c0.94,2.902,3.667,5.023,6.898,5.086c-2.528,1.96-5.712,3.134-9.174,3.134c-0.598,0-1.183-0.034-1.761-0.104C9.268,36.786,13.152,38,17.321,38c13.585,0,21.017-11.156,21.017-20.834c0-0.317-0.01-0.633-0.025-0.945C39.763,15.197,41.013,13.905,42,12.429"})))}var iS,aS,oS=t.forwardRef(rS),sS=(n.p,["title","titleId"]);function uS(){return uS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uS.apply(this,arguments)}function lS(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cS(e,n){var r=e.title,i=e.titleId,a=lS(e,sS);return t.createElement("svg",uS({id:"Capa_1",width:"current",height:"current",style:{enableBackground:"new 0 0 150 150"},viewBox:"0 0 150 150",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:n,"aria-labelledby":i},a),r?t.createElement("title",{id:i},r):null,iS||(iS=t.createElement("style",{type:"text/css"},"\n\t.st0{fill:#1A73E8;}\n\t.st1{fill:#EA4335;}\n\t.st2{fill:#4285F4;}\n\t.st3{fill:#FBBC04;}\n\t.st4{fill:#34A853;}\n\t.st5{fill:#4CAF50;}\n\t.st6{fill:#1E88E5;}\n\t.st7{fill:#E53935;}\n\t.st8{fill:#C62828;}\n\t.st9{fill:#FBC02D;}\n\t.st10{fill:#1565C0;}\n\t.st11{fill:#2E7D32;}\n\t.st12{fill:#F6B704;}\n\t.st13{fill:#E54335;}\n\t.st14{fill:#4280EF;}\n\t.st15{fill:#34A353;}\n\t.st16{clip-path:url(#SVGID_2_);}\n\t.st17{fill:#188038;}\n\t.st18{opacity:0.2;fill:#FFFFFF;enable-background:new    ;}\n\t.st19{opacity:0.3;fill:#0D652D;enable-background:new    ;}\n\t.st20{clip-path:url(#SVGID_4_);}\n\t.st21{opacity:0.3;fill:url(#_45_shadow_1_);enable-background:new    ;}\n\t.st22{clip-path:url(#SVGID_6_);}\n\t.st23{fill:#FA7B17;}\n\t.st24{opacity:0.3;fill:#174EA6;enable-background:new    ;}\n\t.st25{opacity:0.3;fill:#A50E0E;enable-background:new    ;}\n\t.st26{opacity:0.3;fill:#E37400;enable-background:new    ;}\n\t.st27{fill:url(#Finish_mask_1_);}\n\t.st28{fill:#FFFFFF;}\n\t.st29{fill:#0C9D58;}\n\t.st30{opacity:0.2;fill:#004D40;enable-background:new    ;}\n\t.st31{opacity:0.2;fill:#3E2723;enable-background:new    ;}\n\t.st32{fill:#FFC107;}\n\t.st33{opacity:0.2;fill:#1A237E;enable-background:new    ;}\n\t.st34{opacity:0.2;}\n\t.st35{fill:#1A237E;}\n\t.st36{fill:url(#SVGID_7_);}\n\t.st37{fill:#FBBC05;}\n\t.st38{clip-path:url(#SVGID_9_);fill:#E53935;}\n\t.st39{clip-path:url(#SVGID_11_);fill:#FBC02D;}\n\t.st40{clip-path:url(#SVGID_13_);fill:#E53935;}\n\t.st41{clip-path:url(#SVGID_15_);fill:#FBC02D;}\n")),aS||(aS=t.createElement("g",null,t.createElement("path",{className:"st14",d:"M120,76.1c0-3.1-0.3-6.3-0.8-9.3H75.9v17.7h24.8c-1,5.7-4.3,10.7-9.2,13.9l14.8,11.5   C115,101.8,120,90,120,76.1L120,76.1z"}),t.createElement("path",{className:"st15",d:"M75.9,120.9c12.4,0,22.8-4.1,30.4-11.1L91.5,98.4c-4.1,2.8-9.4,4.4-15.6,4.4c-12,0-22.1-8.1-25.8-18.9   L34.9,95.6C42.7,111.1,58.5,120.9,75.9,120.9z"}),t.createElement("path",{className:"st12",d:"M50.1,83.8c-1.9-5.7-1.9-11.9,0-17.6L34.9,54.4c-6.5,13-6.5,28.3,0,41.2L50.1,83.8z"}),t.createElement("path",{className:"st13",d:"M75.9,47.3c6.5-0.1,12.9,2.4,17.6,6.9L106.6,41C98.3,33.2,87.3,29,75.9,29.1c-17.4,0-33.2,9.8-41,25.3   l15.2,11.8C53.8,55.3,63.9,47.3,75.9,47.3z"}))))}var hS,fS,dS,pS,vS,yS,mS,gS=t.forwardRef(cS),kS=(n.p,["title","titleId"]);function wS(){return wS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wS.apply(this,arguments)}function _S(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function bS(e,n){var r=e.title,i=e.titleId,a=_S(e,kS);return t.createElement("svg",wS({enableBackground:"new 0 0 32 32",height:"32px",id:"Layer_1",viewBox:"0 0 32 32",width:"32px",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:n,"aria-labelledby":i},a),r?t.createElement("title",{id:i},r):null,hS||(hS=t.createElement("path",{clipRule:"evenodd",d:"M16.003,0C7.17,0,0.008,7.162,0.008,15.997  c0,7.067,4.582,13.063,10.94,15.179c0.8,0.146,1.052-0.328,1.052-0.752c0-0.38,0.008-1.442,0-2.777  c-4.449,0.967-5.371-2.107-5.371-2.107c-0.727-1.848-1.775-2.34-1.775-2.34c-1.452-0.992,0.109-0.973,0.109-0.973  c1.605,0.113,2.451,1.649,2.451,1.649c1.427,2.443,3.743,1.737,4.654,1.329c0.146-1.034,0.56-1.739,1.017-2.139  c-3.552-0.404-7.286-1.776-7.286-7.906c0-1.747,0.623-3.174,1.646-4.292C7.28,10.464,6.73,8.837,7.602,6.634  c0,0,1.343-0.43,4.398,1.641c1.276-0.355,2.645-0.532,4.005-0.538c1.359,0.006,2.727,0.183,4.005,0.538  c3.055-2.07,4.396-1.641,4.396-1.641c0.872,2.203,0.323,3.83,0.159,4.234c1.023,1.118,1.644,2.545,1.644,4.292  c0,6.146-3.74,7.498-7.304,7.893C19.479,23.548,20,24.508,20,26c0,2,0,3.902,0,4.428c0,0.428,0.258,0.901,1.07,0.746  C27.422,29.055,32,23.062,32,15.997C32,7.162,24.838,0,16.003,0z",fill:"#181616",fillRule:"evenodd"})),fS||(fS=t.createElement("g",null)),dS||(dS=t.createElement("g",null)),pS||(pS=t.createElement("g",null)),vS||(vS=t.createElement("g",null)),yS||(yS=t.createElement("g",null)),mS||(mS=t.createElement("g",null)))}var xS,ES=t.forwardRef(bS),SS=(n.p,[{title:"\uc18c\uac1c",link:"/about"},{title:"\uace0\uac1d\uc13c\ud130",link:"/help"},{title:"\uc774\uc6a9\uc57d\uad00",link:"/tos"},{title:"\uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac\ubc29\uce68",link:"/privacy"},{title:"\ucfe0\ud0a4 \uc815\ucc45",link:"/cookiePolicy"},{title:"\uc811\uadfc\uc131",link:"/access"},{title:"\uad11\uace0 \uc815\ubcf4",link:"/ads"},{title:"\ube14\ub85c\uadf8",link:"/blog"},{title:"\uc0c1\ud0dc",link:"/status"},{title:"\ucc44\uc6a9",link:"/careers"},{title:"\ube0c\ub79c\ub4dc \ub9ac\uc18c\uc2a4",link:"/brandResource"},{title:"\uad11\uace0",link:"/ads"},{title:"\ub9c8\ucf00\ud305",link:"/marketing"},{title:"\ube44\uc988\ub2c8\uc2a4\uc6a9 \ud2b8\uc704\ud130",link:"/business"},{title:"\uac1c\ubc1c\uc790",link:"/developer"},{title:"\ub514\ub809\ud130\ub9ac",link:"/direct"},{title:"\uc124\uc815",link:"/setting"}]),TS=n(184),CS=function(){return(0,TS.jsxs)(TS.Fragment,{children:[(0,TS.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('images/randingPageBackground.png')] bg-cover"}),(0,TS.jsx)("div",{className:"absolute top-0 left-0 w-full h-full",children:(0,TS.jsx)(oS,{width:"100%",height:"100%",fill:"white"})})]})},IS=function(e){var t=e.currentTarget.name,n=function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hc(JE,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();if("google"===t)n(new Yu);else if("github"===t){n(new Xu)}},NS=function(){var e=j();return(0,TS.jsxs)(TS.Fragment,{children:[(0,TS.jsxs)("div",{className:"flex",children:[(0,TS.jsx)("div",{className:"hidden lg:block relative w-1/2 h-[90vh]",children:(0,TS.jsx)(CS,{})}),(0,TS.jsxs)("div",{className:"lg:w-1/2",children:[(0,TS.jsxs)("div",{className:"space-y-8 pt-8 px-8 w-full",children:[(0,TS.jsx)(oS,{width:"64px",height:"64px",fill:"#03A9F4"}),(0,TS.jsx)("div",{className:"text-4xl font-bold",children:"\uc9c0\uae08 \ubb34\uc2a8 \uc77c\uc774 \uc77c\uc5b4\ub098\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uc138\uc694."}),(0,TS.jsx)("div",{className:"text-2xl font-bold text-center",children:"\uc624\ub298 \ud2b8\uc704\ud130\uc5d0 \uac00\uc785\ud558\uc138\uc694."})]}),(0,TS.jsxs)("div",{className:"space-y-4 p-8 w-full flex flex-col items-center",children:[(0,TS.jsxs)("button",{name:"google",onClick:IS,className:"bg-white w-full h-10 border-2 rounded-full flex justify-center items-center space-x-1 max-w-md",children:[(0,TS.jsx)(gS,{width:"35px",height:"35px"}),(0,TS.jsxs)("span",{children:[(0,TS.jsx)("strong",{children:"Google"})," \uacc4\uc815\uc73c\ub85c \uac00\uc785\ud558\uae30"]})]}),(0,TS.jsxs)("button",{name:"github",onClick:IS,className:"bg-white w-full h-10 border-2 rounded-full flex justify-center items-center space-x-1 max-w-md",children:[(0,TS.jsx)(ES,{width:"25px",height:"25px",fill:"black"}),(0,TS.jsxs)("span",{children:[(0,TS.jsx)("strong",{children:"Github"}),"\uc5d0\uc11c \uac00\uc785\ud558\uae30"]})]}),(0,TS.jsxs)("div",{className:"w-full flex items-center justify-between max-w-md",children:[(0,TS.jsx)("span",{className:"bg-gray-300 w-[40%] h-[0.1px]"}),(0,TS.jsx)("span",{children:"\ub610\ub294"}),(0,TS.jsx)("span",{className:"bg-gray-300 w-[40%] h-[0.1px]"})]}),(0,TS.jsx)("button",{name:"email",className:"bg-[#03A9F4] w-full h-10 border-2 rounded-full text-white font-bold text-sm max-w-md",onClick:function(){e("/singup")},children:"\uc774\uba54\uc77c \uc8fc\uc18c\ub85c \uac00\uc785\ud558\uae30"}),(0,TS.jsxs)("div",{className:"text-[10px]",children:["By signing up, you agree to the\xa0",(0,TS.jsx)(Y,{to:"/tos",className:"text-[#03A9F4]",children:"Terms of Service\xa0"}),"and\xa0",(0,TS.jsx)(Y,{to:"/privacy",className:"text-[#03A9F4]",children:"Privacy Policy"}),", including\xa0",(0,TS.jsx)(Y,{to:"/cookiePolicy",className:"text-[#03A9F4]",children:"Cookie Use."})]})]}),(0,TS.jsxs)("div",{className:"p-8 space-y-4 w-full flex flex-col items-center",children:[(0,TS.jsx)("div",{className:"text-lg font-bold",children:"\uc774\ubbf8 \ud2b8\uc704\ud130\uc5d0 \uac00\uc785\ud558\uc168\ub098\uc694?"}),(0,TS.jsx)("button",{className:"bg-white w-full h-10 border-2 rounded-full text-[#03A9F4] font-bold max-w-md",onClick:function(){e("/login")},children:"\ub85c\uadf8\uc778"})]}),(0,TS.jsx)("div",{className:"relative w-screen h-[333px] lg:hidden",children:(0,TS.jsx)(CS,{})})]})]}),(0,TS.jsxs)("footer",{className:"p-4 text-sm text-center",children:[SS.map((function(e){return(0,TS.jsx)("span",{className:"px-2 whitespace-nowrap",children:(0,TS.jsx)(Y,{to:e.link,children:e.title})},e.title)})),(0,TS.jsx)("span",{className:"whitespace-nowrap",children:(0,TS.jsxs)("a",{href:"https://github.com/chigomuh/twitter-clone/tree/main",children:["\xa9 ",(new Date).getFullYear()," chigomuh"]})})]})]})},RS=function(){return(0,TS.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,TS.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"})})},AS=function(e){var t=e.width,n=e.height;return(0,TS.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",width:t,height:n,children:(0,TS.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},PS=function(e){var t=e.handleEditModal,n=e.toggleEditing,r=e.onDeleteClick;return(0,TS.jsxs)(TS.Fragment,{children:[(0,TS.jsx)("div",{className:"absolute w-screen h-screen bg-black opacity-40 z-40 max-w-4xl",style:{top:"".concat(window.scrollY,"px")},onClick:t}),(0,TS.jsxs)("div",{className:"absolute bottom-0 w-screen h-28 bg-white z-50 rounded-t-[40px] flex flex-col items-center justify-center space-y-2 max-w-4xl",style:{bottom:"-".concat(window.scrollY,"px")},children:[(0,TS.jsx)("button",{className:"w-[90%] h-10 rounded-full border-2 font-bold",onClick:n,children:"\uc218\uc815"}),(0,TS.jsx)("button",{className:"w-[90%] h-10 rounded-full border-2 font-bold",onClick:r,children:"\uc0ad\uc81c"})]})]})},OS=function(e){var n=e.tweet,r=e.isOwner,i=l((0,t.useState)(!1),2),a=i[0],o=i[1],s=l((0,t.useState)(n.text),2),u=s[0],c=s[1],h=l((0,t.useState)(!1),2),f=h[0],d=h[1],p=QE(),v=function(){var e=ee(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a||g(),e.next=4,Ix(Rb(ZE,"tweets",n.id));case 4:if(!n.attachmentUrl){e.next=7;break}return e.next=7,KE(GE(p,n.attachmentUrl));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),y=function(){o((function(e){return!e})),a||g()},m=function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o(!1),e.next=4,Cx(Rb(ZE,"tweets",n.id),{text:u});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){d((function(e){return!e})),document.body.style.cssText=f?"":"overflow-y: hidden; padding-right: 16px;"},k=new Date(n.createAt),w="".concat(k.getFullYear(),"\ub144 ").concat(k.getMonth()+1,"\uc6d4 ").concat(k.getDate(),"\uc77c");return(0,TS.jsxs)(TS.Fragment,{children:[(0,TS.jsxs)("div",{className:"relative flex justify-center w-full space-x-4 py-8 border-b-[1px]",children:[n.photoURL?(0,TS.jsx)("img",{src:n.photoURL,alt:"user-profile",className:"w-14 h-14 rounded-full"}):(0,TS.jsx)(AS,{width:"60px",height:"60px"}),(0,TS.jsxs)("div",{className:"w-2/3",children:[(0,TS.jsxs)("div",{className:"flex w-full",children:[(0,TS.jsx)("div",{className:"font-bold text-ellipsis w-2/5 whitespace-nowrap overflow-hidden",children:n.displayName}),(0,TS.jsx)("div",{className:"w-3/5 text-right whitespace-nowrap",children:w})]}),(0,TS.jsx)("div",{children:n.text}),n.attachmentUrl&&(0,TS.jsx)("img",{src:n.attachmentUrl,alt:"tweet-img"}),r&&(0,TS.jsx)("div",{className:"absolute top-0 right-0 p-1 cursor-pointer",onClick:g,children:(0,TS.jsx)(RS,{})})]})]}),f&&(0,TS.jsx)(PS,{toggleEditing:y,handleEditModal:g,onDeleteClick:v}),a&&(0,TS.jsx)("div",{className:"w-screen h-fit p-2 max-w-4xl",children:(0,TS.jsxs)("form",{onSubmit:m,className:"flex flex-col justify-center items-center py-6 space-y-10",children:[(0,TS.jsx)("input",{type:"text",value:u,placeholder:"\uc218\uc815 \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",onChange:function(e){var t=e.currentTarget.value;c(t)},required:!0,autoFocus:!0,className:"w-[90%] h-10 px-2 border-2"}),(0,TS.jsxs)("div",{className:"flex space-x-8",children:[(0,TS.jsx)("input",{type:"submit",value:"\uc218\uc815",className:"border-2 rounded-full w-24 h-8 text-center cursor-pointer"}),(0,TS.jsx)("div",{onClick:y,className:"border-2 rounded-full w-24 h-8 text-center cursor-pointer",children:"\ucde8\uc18c"})]})]})})]})},DS=new Uint8Array(16);function LS(){if(!xS&&!(xS="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xS(DS)}var MS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var FS=function(e){return"string"===typeof e&&MS.test(e)},US=[],jS=0;jS<256;++jS)US.push((jS+256).toString(16).substr(1));var VS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(US[e[t+0]]+US[e[t+1]]+US[e[t+2]]+US[e[t+3]]+"-"+US[e[t+4]]+US[e[t+5]]+"-"+US[e[t+6]]+US[e[t+7]]+"-"+US[e[t+8]]+US[e[t+9]]+"-"+US[e[t+10]]+US[e[t+11]]+US[e[t+12]]+US[e[t+13]]+US[e[t+14]]+US[e[t+15]]).toLowerCase();if(!FS(n))throw TypeError("Stringified UUID is invalid");return n};var zS,BS=function(e,t,n){var r=(e=e||{}).random||(e.rng||LS)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return VS(r)},qS=function(){return(0,TS.jsxs)(TS.Fragment,{children:[(0,TS.jsx)("div",{className:"absolute top-0 left-0 w-screen h-screen bg-black opacity-50 z-30"}),(0,TS.jsx)("div",{className:"z-50 flex flex-col justify-center w-screen h-screen absolute top-0 left-[10%] animate-loading",children:(0,TS.jsx)(oS,{width:"50px",height:"50px",fill:"#03A9F4"})})]})},WS=function(e){var n=e.user,r=l((0,t.useState)(""),2),i=r[0],a=r[1],o=l((0,t.useState)(null),2),s=o[0],u=o[1],c=(0,t.useRef)(null),h=l((0,t.useState)(!1),2),f=h[0],d=h[1],p=l((0,t.useState)(!1),2),v=p[0],y=p[1],m=function(){var e=ee(J().mark((function e(t){var r,o,l,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,""===i||null===n){e.next=20;break}if(y(!0),r=GE(QE(),"".concat(n.uid,"/").concat(BS())),o=null,!s){e.next=12;break}return e.next=9,WE(r,s,"data_url");case 9:return e.next=11,HE(r);case 11:o=e.sent;case 12:return l=n.photoURL,h={uid:n.uid,displayName:n.displayName,text:i,createAt:Date.now(),attachmentUrl:o,photoURL:l},e.next=16,Nx(Nb(ZE,"tweets"),h);case 16:e.sent&&(y(!1),a(""),u(null),c.current&&(c.current.value=""),d(!1)),e.next=21;break;case 20:d(!0);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(t){return e.apply(this,arguments)}}();return(0,TS.jsxs)("div",{className:"w-full h-max bg-white",children:[v&&(0,TS.jsx)(qS,{}),(0,TS.jsxs)("form",{onSubmit:m,className:"flex flex-col items-center w-full p-4 space-y-4",children:[(0,TS.jsx)("input",{type:"text",placeholder:"\ubb34\uc2a8 \uc0dd\uac01\uc744 \ud558\uace0 \uacc4\uc2e0\uac00\uc694?",maxLength:120,onChange:function(e){var t=e.currentTarget.value;a(t)},value:i,className:"w-full h-10 border-2 rounded-full px-4"}),f&&(0,TS.jsx)("div",{className:"text-red-700 font-bold",children:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694."}),(0,TS.jsxs)("div",{className:"flex justify-between w-full px-2",children:[(0,TS.jsxs)("label",{htmlFor:"fileInput",className:"border-2 rounded-full w-28 text-center bg-[#03A9F4] text-white font-bold",children:["\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc",(0,TS.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.currentTarget.files;if(t){var n=t[0],r=new FileReader;r.onloadend=function(){"string"===typeof r.result&&u(r.result)},r.readAsDataURL(n)}},ref:c,className:"hidden",id:"fileInput"})]}),(0,TS.jsx)("input",{type:"submit",value:"\ud2b8\uc717",className:"border-2 rounded-full w-16 bg-[#03A9F4] text-white font-bold"})]}),s&&(0,TS.jsxs)(TS.Fragment,{children:[(0,TS.jsx)("img",{src:s,width:"250px",height:"250px",alt:"upload-Thumnail"}),(0,TS.jsx)("button",{onClick:function(){u(null),c.current&&(c.current.value="")},className:"border-2 rounded-full w-16 bg-[#03A9F4] text-white",children:"\ucde8\uc18c"})]})]})]})},HS=function(e){var n=e.user,r=l((0,t.useState)([]),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){Rx(mx(Nb(ZE,"tweets"),wx("createAt","desc")),(function(e){var t=e.docs.map((function(e){var t=e.data(),n=t.createAt,r=t.displayName,i=t.text,a=t.uid,o=t.attachmentUrl,s=t.photoURL;return{id:e.id,createAt:n,displayName:r,text:i,uid:a,attachmentUrl:o,photoURL:s}}));a(t)}))}),[]),(0,TS.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,TS.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,TS.jsx)(WS,{user:n}),i.map((function(e){return(0,TS.jsx)(OS,{tweet:e,isOwner:e.uid===(null===n||void 0===n?void 0:n.uid)},e.id)}))]})})},KS=function(e){var t=e.user;return(0,TS.jsx)("nav",{className:"w-full h-max flex flex-col items-center",children:(0,TS.jsx)("div",{className:"sticky top-0 left-0 z-20 bg-white border-b-2 max-w-4xl w-full",children:(0,TS.jsxs)("ul",{className:"flex justify-between p-2 items-center",children:[(0,TS.jsx)("li",{children:(0,TS.jsx)(Y,{to:"/",children:(0,TS.jsx)(oS,{width:"40px",height:"40px",fill:"#03A9F4"})})}),(0,TS.jsx)("li",{children:(0,TS.jsx)(Y,{to:"/profile",children:t&&t.photoURL?(0,TS.jsx)("img",{src:t.photoURL,alt:"user-profile",className:"w-8 h-8 rounded-full"}):(0,TS.jsx)(AS,{width:"40px",height:"40px"})})})]})})})},GS=function(){return(0,TS.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:(0,TS.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})},QS=function(e){var n,r=e.user,i=e.refreshUser,a=l((0,t.useState)(!1),2),o=a[0],s=a[1],u=l((0,t.useState)(!1),2),c=u[0],h=u[1],f=l((0,t.useState)([]),2),d=f[0],p=f[1],v=r.displayName?r.displayName:null===(n=r.email)||void 0===n?void 0:n.split("@")[0],y=j(),m=l((0,t.useState)(v),2),g=m[0],k=m[1],w=function(){s((function(e){return!e}))};return(0,t.useEffect)((function(){var e=mx(Nb(ZE,"tweets"),function(e,t,n){var r=t,i=lx("where",e);return new gx(i,r,n)}("uid","==",r.uid),wx("createAt","desc"));Rx(e,(function(e){var t=e.docs.map((function(e){var t=e.data(),n=t.createAt,r=t.displayName,i=t.text,a=t.uid,o=t.attachmentUrl,s=t.photoURL;return{id:e.id,createAt:n,displayName:r,text:i,uid:a,attachmentUrl:o,photoURL:s}}));p(t)}))}),[r.uid]),(0,TS.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,TS.jsxs)("div",{className:"w-full max-w-4xl",children:[(0,TS.jsxs)("div",{className:"p-4",children:[c&&(0,TS.jsx)(qS,{}),(0,TS.jsxs)("div",{className:"flex justify-between items-end",children:[(0,TS.jsxs)("div",{className:"flex items-end",children:[r.photoURL?(0,TS.jsx)("img",{src:r.photoURL,alt:"profile",className:"w-20 h-20 rounded-full"}):(0,TS.jsx)("div",{children:(0,TS.jsx)(AS,{width:"100px",height:"100px"})}),(0,TS.jsxs)("label",{htmlFor:"profileImageInput",children:[(0,TS.jsx)("input",{type:"file",accept:"image/*",className:"hidden",id:"profileImageInput",onChange:function(e){var t=e.currentTarget.files;if(t){var n=t[0],a=new FileReader;a.onloadend=ee(J().mark((function e(){var t,n,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof a.result){e.next=12;break}if(t=a.result,!JE.currentUser||t===r.photoURL){e.next=12;break}if(h(!0),n=GE(QE(),"".concat(r.uid,"/profile")),!t){e.next=12;break}return e.next=8,WE(n,t,"data_url");case 8:return e.next=10,HE(n);case 10:o=e.sent,gl(JE.currentUser,{photoURL:o}).then((function(){i()})).catch((function(e){console.error(e)})).finally((function(){h(!1)}));case 12:case"end":return e.stop()}}),e)}))),a.readAsDataURL(n)}}}),(0,TS.jsx)("div",{className:"cursor-pointer",children:(0,TS.jsx)(GS,{})})]})]}),(0,TS.jsx)("button",{className:"rounded-full bg-[#03A9F4] text-white font-bold w-28 h-8",onClick:function(){try{(e=JE,tt(e).signOut()).then((function(){y("/",{replace:!0}),i()}))}catch(Cn){console.error(Cn)}var e},children:"\ub85c\uadf8\uc544\uc6c3"})]}),(0,TS.jsxs)("div",{className:"flex space-x-2 mt-10",children:[(0,TS.jsx)("div",{className:"text-xl font-bold",children:v}),!o&&(0,TS.jsx)("button",{onClick:w,children:(0,TS.jsx)(GS,{})})]}),o&&(0,TS.jsxs)("form",{onSubmit:function(e){e.preventDefault(),JE.currentUser&&v!==g&&(h(!0),gl(JE.currentUser,{displayName:g}).then((function(){i()})).catch((function(e){console.error(e)})).finally((function(){h(!1),s(!1)})))},className:"mt-4 space-y-6",children:[(0,TS.jsx)("div",{className:"w-full flex justify-center items-center",children:(0,TS.jsx)("input",{type:"text",placeholder:"\ub2c9\ub124\uc784",onChange:function(e){var t=e.currentTarget.value;k(t)},value:g,className:"border-2 w-[90%] px-2 h-10 text-center",autoFocus:!0})}),(0,TS.jsxs)("div",{className:"flex justify-center space-x-8",children:[(0,TS.jsx)("div",{onClick:w,className:"rounded-full border-2 w-24 text-center cursor-pointer",children:"\ucde8\uc18c"}),(0,TS.jsx)("input",{type:"submit",value:"\ubcc0\uacbd\ud558\uae30",className:"rounded-full border-2 w-24 text-center cursor-pointer"})]})]})]}),(0,TS.jsx)("div",{className:"h-max flex justify-center items-center font-bold",children:0!==d.length?"\uc791\uc131\ud55c \ud2b8\uc717":(0,TS.jsx)("span",{className:"mt-20 text-xl",children:"\uc0c8\ub85c\uc6b4 \ud2b8\uc717\uc744 \uc791\uc131\ud574\ubcf4\uc138\uc694!"})}),d.map((function(e){return(0,TS.jsx)(OS,{tweet:e,isOwner:!0},e.id)}))]})})},$S=["title","titleId"];function YS(){return YS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YS.apply(this,arguments)}function XS(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function JS(e,n){var r=e.title,i=e.titleId,a=XS(e,$S);return t.createElement("svg",YS({xmlns:"http://www.w3.org/2000/svg",width:"current",height:"current",className:"h-6 w-6",fill:"current",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,ref:n,"aria-labelledby":i},a),r?t.createElement("title",{id:i},r):null,zS||(zS=t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})))}var ZS=t.forwardRef(JS),eT=(n.p,function(e){var n=e.refreshUser,r=l((0,t.useState)(""),2),i=r[0],a=r[1],o=l((0,t.useState)(""),2),s=o[0],u=o[1],c=l((0,t.useState)(""),2),h=c[0],f=c[1],d=l((0,t.useState)(""),2),p=d[0],v=d[1],y=j(),m=function(e){var t=e.currentTarget,n=t.name,r=t.value;"email"===n?u(r):"password"===n?f(r):"displayName"===n&&v(r)},g=function(){var e=ee(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,dl(JE,s,h).then((function(){JE.currentUser&&gl(JE.currentUser,{displayName:p}).then((function(){n()})).catch((function(e){console.error(e)})),y("/")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0 instanceof De&&(console.error(e.t0),"auth/weak-password"===e.t0.code?a("\ud328\uc2a4\uc6cc\ub4dc\ub294 6\uc790\ub9ac \uc774\uc0c1 \uc785\ub825\ud558\uc138\uc694"):"auth/email-already-in-use"===e.t0.code&&a("\ud574\ub2f9 \uc774\uba54\uc77c\uc740 \uc774\ubbf8 \uac00\uc785\ub418\uc5c8\uc5b4\uc694."));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}();return(0,TS.jsx)("div",{className:"h-screen w-screen flex justify-center",children:(0,TS.jsxs)("div",{className:"p-2 space-y-6 w-screent h-screen max-w-lg lg:flex lg:flex-col lg:justify-center",children:[(0,TS.jsx)(ZS,{fill:"black",width:"28px",height:"28px",onClick:function(){y("/")},className:"cursor-pointer"}),(0,TS.jsxs)("form",{onSubmit:g,className:"p-4 flex flex-col justify-center",children:[(0,TS.jsxs)("div",{className:"space-y-8",children:[(0,TS.jsx)("p",{className:"text-2xl font-bold",children:"\uacc4\uc815\uc744 \uc0dd\uc131\ud558\uc138\uc694"}),(0,TS.jsx)("input",{type:"email",name:"email",placeholder:"\uc774\uba54\uc77c",value:s,required:!0,onChange:m,className:"w-full h-14 border-2 rounded-md px-2"}),(0,TS.jsx)("input",{type:"password",name:"password",placeholder:"\ube44\ubc00\ubc88\ud638",value:h,required:!0,onChange:m,className:"w-full h-14 border-2 rounded-md px-2"}),(0,TS.jsx)("input",{type:"text",name:"displayName",placeholder:"\ub2c9\ub124\uc784",value:p,required:!0,onChange:m,className:"w-full h-14 border-2 rounded-md px-2"}),(0,TS.jsx)("div",{className:"text-center text-red-500",children:i})]}),(0,TS.jsx)("button",{type:"submit",className:"w-full h-14 border-2 bg-gray-500 text-white rounded-full",children:"\uacc4\uc815 \uc0dd\uc131"})]})]})})}),tT=function(){var e=j(),n=l((0,t.useState)(""),2),r=n[0],i=n[1],a=l((0,t.useState)(""),2),o=a[0],s=a[1],u=l((0,t.useState)(""),2),c=u[0],h=u[1],f=function(e){var t=e.currentTarget,n=t.name,r=t.value;"email"===n?i(r):"password"===n&&s(r)},d=function(){var t=ee(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,vl(JE,r,o).then((function(){e("/")}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),t.t0 instanceof De&&(console.error(t.t0),"auth/wrong-password"!==t.t0.code&&"auth/user-not-found"!==t.t0.code||h("\uc774\uba54\uc77c\uacfc \ube44\ubc00\ubc88\ud638\ub97c \ub2e4\uc2dc \ud655\uc778\ud558\uc138\uc694."));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}();return(0,TS.jsx)("div",{className:"h-screen w-screen flex justify-center",children:(0,TS.jsxs)("div",{className:"p-2 space-y-6 w-screent h-screen max-w-lg lg:flex lg:flex-col lg:justify-center",children:[(0,TS.jsx)(ZS,{fill:"black",width:"28px",height:"28px",onClick:function(){e("/")},className:"cursor-pointer"}),(0,TS.jsx)("div",{className:"flex justify-center",children:(0,TS.jsx)(oS,{width:"46px",height:"46px",fill:"#03A9F4"})}),(0,TS.jsxs)("button",{name:"google",onClick:IS,className:"bg-white w-full h-10 border-2 rounded-full flex justify-center items-center space-x-1",children:[(0,TS.jsx)(gS,{width:"35px",height:"35px"}),(0,TS.jsxs)("span",{children:[(0,TS.jsx)("strong",{children:"Google"})," \uacc4\uc815\uc73c\ub85c \ub85c\uadf8\uc778\ud558\uae30"]})]}),(0,TS.jsxs)("button",{name:"github",onClick:IS,className:"bg-white w-full h-10 border-2 rounded-full flex justify-center items-center space-x-1",children:[(0,TS.jsx)(ES,{width:"25px",height:"25px",fill:"black"}),(0,TS.jsxs)("span",{children:[(0,TS.jsx)("strong",{children:"Github"}),"\uc5d0\uc11c \ub85c\uadf8\uc778\ud558\uae30"]})]}),(0,TS.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,TS.jsx)("span",{className:"bg-gray-300 w-[40%] h-[0.1px]"}),(0,TS.jsx)("span",{children:"\ub610\ub294"}),(0,TS.jsx)("span",{className:"bg-gray-300 w-[40%] h-[0.1px]"})]}),(0,TS.jsxs)("form",{onSubmit:d,className:"p-4 flex flex-col justify-center",children:[(0,TS.jsxs)("div",{className:"space-y-8",children:[(0,TS.jsx)("p",{className:"text-2xl font-bold",children:"\uc774\uba54\uc77c\ub85c \ub85c\uadf8\uc778\ud558\uae30"}),(0,TS.jsx)("input",{type:"email",name:"email",placeholder:"\uc774\uba54\uc77c",value:r,required:!0,onChange:f,className:"w-full h-14 border-2 rounded-md px-2"}),(0,TS.jsx)("input",{type:"password",name:"password",placeholder:"\ube44\ubc00\ubc88\ud638",value:o,required:!0,onChange:f,className:"w-full h-14 border-2 rounded-md px-2"}),(0,TS.jsx)("div",{className:"text-center text-red-500",children:c})]}),(0,TS.jsx)("button",{type:"submit",className:"w-full h-14 border-2 bg-gray-500 text-white rounded-full",children:"\ub85c\uadf8\uc778"})]})]})})},nT=function(e){var t=e.refreshUser,n=e.isLoggedIn,r=e.user;return(0,TS.jsxs)($,{basename:"/twitter-clone",children:[n&&(0,TS.jsx)(KS,{user:r}),(0,TS.jsx)(W,{children:n&&r?(0,TS.jsxs)(TS.Fragment,{children:[(0,TS.jsx)(B,{path:"/",element:(0,TS.jsx)(HS,{user:r})}),(0,TS.jsx)(B,{path:"/profile",element:(0,TS.jsx)(QS,{user:r,refreshUser:t})}),(0,TS.jsx)(B,{path:"*",element:(0,TS.jsx)(HS,{user:r})})]}):(0,TS.jsxs)(TS.Fragment,{children:[(0,TS.jsx)(B,{path:"/",element:(0,TS.jsx)(NS,{})}),(0,TS.jsx)(B,{path:"/singup",element:(0,TS.jsx)(eT,{refreshUser:t})}),(0,TS.jsx)(B,{path:"/login",element:(0,TS.jsx)(tT,{})})]})})]})},rT=function(){return(0,TS.jsx)("div",{className:"flex items-center justify-center w-screen h-screen",children:(0,TS.jsx)(oS,{fill:"#03A9F4",width:"100px",height:"100px"})})};var iT=function(){var e=l((0,t.useState)(!1),2),n=e[0],r=e[1],i=l((0,t.useState)(null),2),a=i[0],s=i[1];return(0,t.useEffect)((function(){!function(e,t,n,r){tt(e).onAuthStateChanged(t,n,r)}(JE,(function(e){e&&s(o({},e)),r(!0)}))}),[]),(0,TS.jsx)(TS.Fragment,{children:n?(0,TS.jsx)(nT,{refreshUser:function(){var e=JE.currentUser;s(e?o({},e):null)},isLoggedIn:Boolean(a),user:a}):(0,TS.jsx)(rT,{})})};r.createRoot(document.getElementById("root")).render((0,TS.jsx)(t.StrictMode,{children:(0,TS.jsx)(iT,{})}))}()}();
//# sourceMappingURL=main.c768e483.js.map